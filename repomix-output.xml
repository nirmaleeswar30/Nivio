This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
.metadata
android/.gitignore
android/app/build.gradle.kts
android/app/src/debug/AndroidManifest.xml
android/app/src/main/AndroidManifest.xml
android/app/src/main/kotlin/com/example/nivio/MainActivity.kt
android/app/src/main/res/drawable-hdpi/android12splash.png
android/app/src/main/res/drawable-hdpi/ic_launcher_foreground.png
android/app/src/main/res/drawable-hdpi/splash.png
android/app/src/main/res/drawable-mdpi/android12splash.png
android/app/src/main/res/drawable-mdpi/ic_launcher_foreground.png
android/app/src/main/res/drawable-mdpi/splash.png
android/app/src/main/res/drawable-night-hdpi/android12splash.png
android/app/src/main/res/drawable-night-mdpi/android12splash.png
android/app/src/main/res/drawable-night-xhdpi/android12splash.png
android/app/src/main/res/drawable-night-xxhdpi/android12splash.png
android/app/src/main/res/drawable-night-xxxhdpi/android12splash.png
android/app/src/main/res/drawable-v21/background.png
android/app/src/main/res/drawable-v21/launch_background.xml
android/app/src/main/res/drawable-xhdpi/android12splash.png
android/app/src/main/res/drawable-xhdpi/ic_launcher_foreground.png
android/app/src/main/res/drawable-xhdpi/splash.png
android/app/src/main/res/drawable-xxhdpi/android12splash.png
android/app/src/main/res/drawable-xxhdpi/ic_launcher_foreground.png
android/app/src/main/res/drawable-xxhdpi/splash.png
android/app/src/main/res/drawable-xxxhdpi/android12splash.png
android/app/src/main/res/drawable-xxxhdpi/ic_launcher_foreground.png
android/app/src/main/res/drawable-xxxhdpi/splash.png
android/app/src/main/res/drawable/background.png
android/app/src/main/res/drawable/launch_background.xml
android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
android/app/src/main/res/mipmap-hdpi/ic_launcher.png
android/app/src/main/res/mipmap-mdpi/ic_launcher.png
android/app/src/main/res/mipmap-xhdpi/ic_launcher.png
android/app/src/main/res/mipmap-xxhdpi/ic_launcher.png
android/app/src/main/res/mipmap-xxxhdpi/ic_launcher.png
android/app/src/main/res/values-night-v31/styles.xml
android/app/src/main/res/values-night/styles.xml
android/app/src/main/res/values-v31/styles.xml
android/app/src/main/res/values/colors.xml
android/app/src/main/res/values/styles.xml
android/app/src/main/res/xml/network_security_config.xml
android/app/src/profile/AndroidManifest.xml
android/build.gradle.kts
android/gradle.properties
android/gradle/wrapper/gradle-wrapper.properties
android/settings.gradle.kts
assets/images/app-icon.png
assets/images/logo.svg
assets/images/nivio-dark.png
FIREBASE_SETUP.md
firebase.json
ios/.gitignore
ios/Flutter/AppFrameworkInfo.plist
ios/Flutter/Debug.xcconfig
ios/Flutter/Release.xcconfig
ios/Runner.xcodeproj/project.pbxproj
ios/Runner.xcodeproj/project.xcworkspace/contents.xcworkspacedata
ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist
ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings
ios/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme
ios/Runner.xcworkspace/contents.xcworkspacedata
ios/Runner.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist
ios/Runner.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings
ios/Runner/AppDelegate.swift
ios/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-1024x1024@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@3x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@3x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@3x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-50x50@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-50x50@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-57x57@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-57x57@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-60x60@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-60x60@3x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-72x72@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-72x72@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-76x76@1x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-76x76@2x.png
ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-83.5x83.5@2x.png
ios/Runner/Assets.xcassets/LaunchBackground.imageset/background.png
ios/Runner/Assets.xcassets/LaunchBackground.imageset/Contents.json
ios/Runner/Assets.xcassets/LaunchImage.imageset/Contents.json
ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage.png
ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage@2x.png
ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage@3x.png
ios/Runner/Assets.xcassets/LaunchImage.imageset/README.md
ios/Runner/Base.lproj/LaunchScreen.storyboard
ios/Runner/Base.lproj/Main.storyboard
ios/Runner/Info.plist
ios/Runner/Runner-Bridging-Header.h
ios/RunnerTests/RunnerTests.swift
lib/core/constants.dart
lib/core/theme.dart
lib/firebase_options.dart
lib/main.dart
lib/models/api_source.dart
lib/models/api_source.freezed.dart
lib/models/api_source.g.dart
lib/models/search_result.dart
lib/models/search_result.freezed.dart
lib/models/search_result.g.dart
lib/models/season_info.dart
lib/models/season_info.freezed.dart
lib/models/season_info.g.dart
lib/models/stream_result.dart
lib/models/watch_history.dart
lib/models/watch_history.freezed.dart
lib/models/watch_history.g.dart
lib/providers/home_providers.dart
lib/providers/language_preferences_provider.dart
lib/providers/media_provider.dart
lib/providers/search_provider.dart
lib/providers/service_providers.dart
lib/providers/settings_providers.dart
lib/providers/watch_history_provider.dart
lib/screens/auth_screen.dart
lib/screens/home_screen.dart
lib/screens/media_detail_screen.dart
lib/screens/player_screen.dart
lib/screens/search_screen.dart
lib/screens/settings_screen.dart
lib/services/streaming_service.dart
lib/services/tmdb_service.dart
lib/services/watch_history_service.dart
lib/widgets/content_row.dart
lib/widgets/continue_watching_row.dart
lib/widgets/media_card.dart
lib/widgets/media_carousel.dart
lib/widgets/search_result_card.dart
lib/widgets/webview_player.dart
LICENSE
linux/.gitignore
linux/CMakeLists.txt
linux/flutter/CMakeLists.txt
linux/flutter/generated_plugin_registrant.cc
linux/flutter/generated_plugin_registrant.h
linux/flutter/generated_plugins.cmake
linux/runner/CMakeLists.txt
linux/runner/main.cc
linux/runner/my_application.cc
linux/runner/my_application.h
macos/.gitignore
macos/Flutter/Flutter-Debug.xcconfig
macos/Flutter/Flutter-Release.xcconfig
macos/Flutter/GeneratedPluginRegistrant.swift
macos/Runner.xcodeproj/project.pbxproj
macos/Runner.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist
macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme
macos/Runner.xcworkspace/contents.xcworkspacedata
macos/Runner.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist
macos/Runner/AppDelegate.swift
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_1024.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_128.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_16.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_256.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_32.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_512.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/app_icon_64.png
macos/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json
macos/Runner/Base.lproj/MainMenu.xib
macos/Runner/Configs/AppInfo.xcconfig
macos/Runner/Configs/Debug.xcconfig
macos/Runner/Configs/Release.xcconfig
macos/Runner/Configs/Warnings.xcconfig
macos/Runner/DebugProfile.entitlements
macos/Runner/Info.plist
macos/Runner/MainFlutterWindow.swift
macos/Runner/Release.entitlements
macos/RunnerTests/RunnerTests.swift
pubspec.lock
pubspec.yaml
README.md
web/favicon.png
web/icons/Icon-192.png
web/icons/Icon-512.png
web/icons/Icon-maskable-192.png
web/icons/Icon-maskable-512.png
web/index.html
web/manifest.json
windows/.gitignore
windows/cmake_toolchain.cmake
windows/cmake_wrapper.bat
windows/CMakeLists.txt
windows/flutter/CMakeLists.txt
windows/flutter/generated_plugin_registrant.cc
windows/flutter/generated_plugin_registrant.h
windows/flutter/generated_plugins.cmake
windows/runner/CMakeLists.txt
windows/runner/flutter_window.cpp
windows/runner/flutter_window.h
windows/runner/main.cpp
windows/runner/resource.h
windows/runner/resources/app_icon.ico
windows/runner/runner.exe.manifest
windows/runner/Runner.rc
windows/runner/utils.cpp
windows/runner/utils.h
windows/runner/win32_window.cpp
windows/runner/win32_window.h
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Miscellaneous
*.class
*.log
*.pyc
*.swp
.DS_Store
.atom/
.build/
.buildlog/
.history
.svn/
.swiftpm/
migrate_working_dir/

# IntelliJ related
*.iml
*.ipr
*.iws
.idea/

# The .vscode folder contains launch configuration and tasks you configure in
# VS Code which you may wish to be included in version control, so this line
# is commented out by default.
#.vscode/

# Flutter/Dart/Pub related
**/doc/api/
**/ios/Flutter/.last_build_id
.dart_tool/
.flutter-plugins-dependencies
.pub-cache/
.pub/
/build/
/coverage/

# Symbolication related
app.*.symbols

# Obfuscation related
app.*.map.json

# Android Studio will place build artifacts here
/android/app/debug
/android/app/profile
/android/app/release

# Firebase configuration files (contains project-specific settings)
# Note: firebase_options.dart is safe to commit (public API keys)
# but google-services.json should be kept private
**/google-services.json
**/GoogleService-Info.plist

# Environment files and secrets
.env
.env.*
*.env

# Private API keys (if you create this file)
lib/core/api_keys.dart
</file>

<file path=".metadata">
# This file tracks properties of this Flutter project.
# Used by Flutter tool to assess capabilities and perform upgrades etc.
#
# This file should be version controlled and should not be manually edited.

version:
  revision: "b45fa18946ecc2d9b4009952c636ba7e2ffbb787"
  channel: "stable"

project_type: app

# Tracks metadata for the flutter migrate command
migration:
  platforms:
    - platform: root
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: android
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: ios
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: linux
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: macos
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: web
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
    - platform: windows
      create_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787
      base_revision: b45fa18946ecc2d9b4009952c636ba7e2ffbb787

  # User provided section

  # List of Local paths (relative to this file) that should be
  # ignored by the migrate tool.
  #
  # Files that are not part of the templates will be ignored by default.
  unmanaged_files:
    - 'lib/main.dart'
    - 'ios/Runner.xcodeproj/project.pbxproj'
</file>

<file path="android/.gitignore">
gradle-wrapper.jar
/.gradle
/captures/
/gradlew
/gradlew.bat
/local.properties
GeneratedPluginRegistrant.java
.cxx/

# Remember to never publicly share your keystore.
# See https://flutter.dev/to/reference-keystore
key.properties
**/*.keystore
**/*.jks
</file>

<file path="android/app/build.gradle.kts">
plugins {
    id("com.android.application")
    // START: FlutterFire Configuration
    id("com.google.gms.google-services")
    // END: FlutterFire Configuration
    id("kotlin-android")
    // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
    id("dev.flutter.flutter-gradle-plugin")
}

android {
    namespace = "com.example.nivio"
    compileSdk = flutter.compileSdkVersion
    ndkVersion = flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_17.toString()
    }

    defaultConfig {
        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
        applicationId = "com.example.nivio"
        // You can update the following values to match your application needs.
        // For more information, see: https://flutter.dev/to/review-gradle-config.
        minSdk = flutter.minSdkVersion
        targetSdk = flutter.targetSdkVersion
        versionCode = flutter.versionCode
        versionName = flutter.versionName
    }

    buildTypes {
        release {
            // TODO: Add your own signing config for the release build.
            // Signing with the debug keys for now, so `flutter run --release` works.
            signingConfig = signingConfigs.getByName("debug")
        }
    }
}

flutter {
    source = "../.."
}
</file>

<file path="android/app/src/debug/AndroidManifest.xml">
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- The INTERNET permission is required for development. Specifically,
         the Flutter tool needs it to communicate with the running application
         to allow setting breakpoints, to provide hot reload, etc.
    -->
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest>
</file>

<file path="android/app/src/main/AndroidManifest.xml">
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Required permissions -->
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    
    <application
        android:label="Nivio"
        android:name="${applicationName}"
        android:icon="@mipmap/ic_launcher"
        android:networkSecurityConfig="@xml/network_security_config"
        android:usesCleartextTraffic="false">
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:launchMode="singleTop"
            android:taskAffinity=""
            android:theme="@style/LaunchTheme"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
            android:hardwareAccelerated="true"
            android:windowSoftInputMode="adjustResize">
            <!-- Specifies an Android theme to apply to this Activity as soon as
                 the Android process has started. This theme is visible to the user
                 while the Flutter UI initializes. After that, this theme continues
                 to determine the Window background behind the Flutter UI. -->
            <meta-data
              android:name="io.flutter.embedding.android.NormalTheme"
              android:resource="@style/NormalTheme"
              />
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <!-- Don't delete the meta-data below.
             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java -->
        <meta-data
            android:name="flutterEmbedding"
            android:value="2" />
    </application>
    <!-- Required to query activities that can process text, see:
         https://developer.android.com/training/package-visibility and
         https://developer.android.com/reference/android/content/Intent#ACTION_PROCESS_TEXT.

         In particular, this is used by the Flutter engine in io.flutter.plugin.text.ProcessTextPlugin. -->
    <queries>
        <intent>
            <action android:name="android.intent.action.PROCESS_TEXT"/>
            <data android:mimeType="text/plain"/>
        </intent>
    </queries>
</manifest>
</file>

<file path="android/app/src/main/kotlin/com/example/nivio/MainActivity.kt">
package com.example.nivio

import io.flutter.embedding.android.FlutterActivity

class MainActivity : FlutterActivity()
</file>

<file path="android/app/src/main/res/drawable-v21/launch_background.xml">
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <bitmap android:gravity="fill" android:src="@drawable/background"/>
    </item>
    <item>
        <bitmap android:gravity="center" android:src="@drawable/splash"/>
    </item>
</layer-list>
</file>

<file path="android/app/src/main/res/drawable/launch_background.xml">
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <bitmap android:gravity="fill" android:src="@drawable/background"/>
    </item>
    <item>
        <bitmap android:gravity="center" android:src="@drawable/splash"/>
    </item>
</layer-list>
</file>

<file path="android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml">
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
  <background android:drawable="@color/ic_launcher_background"/>
  <foreground>
      <inset
          android:drawable="@drawable/ic_launcher_foreground"
          android:inset="16%" />
  </foreground>
</adaptive-icon>
</file>

<file path="android/app/src/main/res/values-night-v31/styles.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Theme applied to the Android Window while the process is starting when the OS's Dark Mode setting is on -->
    <style name="LaunchTheme" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:forceDarkAllowed">false</item>
        <item name="android:windowFullscreen">false</item>
        <item name="android:windowDrawsSystemBarBackgrounds">false</item>
        <item name="android:windowLayoutInDisplayCutoutMode">shortEdges</item>
        <item name="android:windowSplashScreenBackground">#000000</item>
        <item name="android:windowSplashScreenAnimatedIcon">@drawable/android12splash</item>
    </style>
    <!-- Theme applied to the Android Window as soon as the process has started.
         This theme determines the color of the Android Window while your
         Flutter UI initializes, as well as behind your Flutter UI while its
         running.
         
         This Theme is only used starting with V2 of Flutter's Android embedding. -->
    <style name="NormalTheme" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:windowBackground">?android:colorBackground</item>
    </style>
</resources>
</file>

<file path="android/app/src/main/res/values-night/styles.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Theme applied to the Android Window while the process is starting when the OS's Dark Mode setting is on -->
    <style name="LaunchTheme" parent="@android:style/Theme.Black.NoTitleBar">
        <!-- Show a splash screen on the activity. Automatically removed when
             the Flutter engine draws its first frame -->
        <item name="android:windowBackground">@drawable/launch_background</item>
        <item name="android:forceDarkAllowed">false</item>
        <item name="android:windowFullscreen">false</item>
        <item name="android:windowDrawsSystemBarBackgrounds">false</item>
        <item name="android:windowLayoutInDisplayCutoutMode">shortEdges</item>
    </style>
    <!-- Theme applied to the Android Window as soon as the process has started.
         This theme determines the color of the Android Window while your
         Flutter UI initializes, as well as behind your Flutter UI while its
         running.

         This Theme is only used starting with V2 of Flutter's Android embedding. -->
    <style name="NormalTheme" parent="@android:style/Theme.Black.NoTitleBar">
        <item name="android:windowBackground">?android:colorBackground</item>
    </style>
</resources>
</file>

<file path="android/app/src/main/res/values-v31/styles.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Theme applied to the Android Window while the process is starting when the OS's Dark Mode setting is off -->
    <style name="LaunchTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:forceDarkAllowed">false</item>
        <item name="android:windowFullscreen">false</item>
        <item name="android:windowDrawsSystemBarBackgrounds">false</item>
        <item name="android:windowLayoutInDisplayCutoutMode">shortEdges</item>
        <item name="android:windowSplashScreenBackground">#000000</item>
        <item name="android:windowSplashScreenAnimatedIcon">@drawable/android12splash</item>
    </style>
    <!-- Theme applied to the Android Window as soon as the process has started.
         This theme determines the color of the Android Window while your
         Flutter UI initializes, as well as behind your Flutter UI while its
         running.
         
         This Theme is only used starting with V2 of Flutter's Android embedding. -->
    <style name="NormalTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:windowBackground">?android:colorBackground</item>
    </style>
</resources>
</file>

<file path="android/app/src/main/res/values/colors.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="ic_launcher_background">#000000</color>
</resources>
</file>

<file path="android/app/src/main/res/values/styles.xml">
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Theme applied to the Android Window while the process is starting when the OS's Dark Mode setting is off -->
    <style name="LaunchTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <!-- Show a splash screen on the activity. Automatically removed when
             the Flutter engine draws its first frame -->
        <item name="android:windowBackground">@drawable/launch_background</item>
        <item name="android:forceDarkAllowed">false</item>
        <item name="android:windowFullscreen">false</item>
        <item name="android:windowDrawsSystemBarBackgrounds">false</item>
        <item name="android:windowLayoutInDisplayCutoutMode">shortEdges</item>
    </style>
    <!-- Theme applied to the Android Window as soon as the process has started.
         This theme determines the color of the Android Window while your
         Flutter UI initializes, as well as behind your Flutter UI while its
         running.

         This Theme is only used starting with V2 of Flutter's Android embedding. -->
    <style name="NormalTheme" parent="@android:style/Theme.Light.NoTitleBar">
        <item name="android:windowBackground">?android:colorBackground</item>
    </style>
</resources>
</file>

<file path="android/app/src/main/res/xml/network_security_config.xml">
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
    <!-- Allow cleartext traffic for localhost (development) -->
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">localhost</domain>
        <domain includeSubdomains="true">127.0.0.1</domain>
        <domain includeSubdomains="true">10.0.2.2</domain>
    </domain-config>
    
    <!-- Default secure config for all other domains -->
    <base-config cleartextTrafficPermitted="false">
        <trust-anchors>
            <certificates src="system" />
        </trust-anchors>
    </base-config>
</network-security-config>
</file>

<file path="android/app/src/profile/AndroidManifest.xml">
<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- The INTERNET permission is required for development. Specifically,
         the Flutter tool needs it to communicate with the running application
         to allow setting breakpoints, to provide hot reload, etc.
    -->
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest>
</file>

<file path="android/build.gradle.kts">
allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

val newBuildDir: Directory =
    rootProject.layout.buildDirectory
        .dir("../../build")
        .get()
rootProject.layout.buildDirectory.value(newBuildDir)

subprojects {
    val newSubprojectBuildDir: Directory = newBuildDir.dir(project.name)
    project.layout.buildDirectory.value(newSubprojectBuildDir)
}
subprojects {
    project.evaluationDependsOn(":app")
}

tasks.register<Delete>("clean") {
    delete(rootProject.layout.buildDirectory)
}
</file>

<file path="android/gradle.properties">
org.gradle.jvmargs=-Xmx8G -XX:MaxMetaspaceSize=4G -XX:ReservedCodeCacheSize=512m -XX:+HeapDumpOnOutOfMemoryError
android.useAndroidX=true
</file>

<file path="android/gradle/wrapper/gradle-wrapper.properties">
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.14-all.zip
</file>

<file path="android/settings.gradle.kts">
pluginManagement {
    val flutterSdkPath =
        run {
            val properties = java.util.Properties()
            file("local.properties").inputStream().use { properties.load(it) }
            val flutterSdkPath = properties.getProperty("flutter.sdk")
            require(flutterSdkPath != null) { "flutter.sdk not set in local.properties" }
            flutterSdkPath
        }

    includeBuild("$flutterSdkPath/packages/flutter_tools/gradle")

    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

plugins {
    id("dev.flutter.flutter-plugin-loader") version "1.0.0"
    id("com.android.application") version "8.11.1" apply false
    // START: FlutterFire Configuration
    id("com.google.gms.google-services") version("4.3.15") apply false
    // END: FlutterFire Configuration
    id("org.jetbrains.kotlin.android") version "2.2.20" apply false
}

include(":app")
</file>

<file path="assets/images/logo.svg">
<!-- Placeholder - Replace with actual Nivio logo -->
<svg width="200" height="60" xmlns="http://www.w3.org/2000/svg">
  <text x="10" y="45" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="#E50914">NIVIO</text>
</svg>
</file>

<file path="FIREBASE_SETUP.md">
# üî• Firebase Setup - Final Steps

## ‚úÖ What You've Already Done

‚úÖ **Firebase Project Created** - Project ID: `nivio-*****`  
‚úÖ **FlutterFire Configured** - `firebase_options.dart` generated  
‚úÖ **Platforms Configured** - Android, Windows, Web  

---

## üéØ What You Need To Do Now

### Step 1: Enable Authentication

1. Go to **Firebase Console**: https://console.firebase.google.com
2. Select your project **"nivio-f6110"**
3. Click **"Authentication"** in left sidebar
4. Click **"Get started"** button
5. Click **"Sign-in method"** tab
6. Find **"Anonymous"** in the list
7. Click on it ‚Üí Toggle **"Enable"** ‚Üí Click **"Save"**

‚úÖ **Done!** Anonymous auth is now enabled.

---

### Step 2: Create Firestore Database

1. In Firebase Console, click **"Firestore Database"** in left sidebar
2. Click **"Create database"** button
3. **Start mode**: Select **"Production mode"** (we'll add rules next)
4. **Location**: Choose closest to you (e.g., `us-central1` or your region)
5. Click **"Enable"**

‚è≥ Wait 1-2 minutes for database to be created.

---

### Step 3: Set Firestore Security Rules

1. In **Firestore Database** ‚Üí Click **"Rules"** tab
2. **DELETE** everything in the editor
3. **PASTE** this exact code:

```javascript
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Allow users to read/write their own watch history
    match /users/{userId}/watchHistory/{historyId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Deny all other access
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
```

4. Click **"Publish"** button

‚úÖ **Done!** Your database is now secure.

---

## üìñ Understanding the Rules

### What These Rules Do:

```javascript
// Rule 1: Watch History Access
match /users/{userId}/watchHistory/{historyId} {
  allow read, write: if request.auth != null && request.auth.uid == userId;
}
```

**Means:**
- ‚úÖ Authenticated users CAN read/write their OWN watch history
- ‚ùå Users CANNOT read/write OTHER users' history
- ‚ùå Unauthenticated users CANNOT access anything

**Example:**
- User A (uid: `abc123`) can access: `/users/abc123/watchHistory/*`
- User A CANNOT access: `/users/xyz789/watchHistory/*` (User B's data)

```javascript
// Rule 2: Deny Everything Else
match /{document=**} {
  allow read, write: if false;
}
```

**Means:**
- ‚ùå All other database paths are completely locked
- No accidental data leaks

---

## üß™ Test Your Setup

### 1. Run the App

```powershell
flutter run -d edge
```

### 2. Test Authentication

1. App opens ‚Üí You see auth screen with "NIVIO" logo
2. Click **"GET STARTED"**
3. Should redirect to home screen

‚úÖ **Auth works!**

### 3. Check Firebase Console

1. Go to **Authentication ‚Üí Users**
2. You should see **1 anonymous user**
3. Copy the **User UID** (you'll use this to verify data)

### 4. Test Video Playback & Watch History

1. In the app, click **search icon** (top right)
2. Search for: **"Breaking Bad"**
3. Click on the result
4. Select **Season 1**
5. Click **play** on Episode 1
6. Wait for video to load (providers will try in order)
7. Let it play for ~10 seconds
8. Press **back** to exit player

### 5. Verify Watch History Saved

**Check Local (Hive):**
- Go back to home screen
- You should see **"Breaking Bad"** in "Continue Watching"
- Should show progress bar

**Check Cloud (Firestore):**
1. Firebase Console ‚Üí **Firestore Database ‚Üí Data**
2. Navigate to: `users ‚Üí {your-uid} ‚Üí watchHistory`
3. You should see a document with Breaking Bad data:
   ```
   tmdbId: 1396
   title: "Breaking Bad"
   currentSeason: 1
   currentEpisode: 1
   progressPercent: 0.05 (or similar)
   lastWatchedAt: (timestamp)
   ```

‚úÖ **Watch history sync works!**

---

## üîç Firestore Data Structure

Your database will look like this:

```
nivio-***** (database)
‚îî‚îÄ‚îÄ users/
    ‚îú‚îÄ‚îÄ abc123-user-id-1/
    ‚îÇ   ‚îî‚îÄ‚îÄ watchHistory/
    ‚îÇ       ‚îú‚îÄ‚îÄ 1396/  (Breaking Bad)
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ id: "abc123_1396"
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ tmdbId: 1396
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ title: "Breaking Bad"
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ currentSeason: 1
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ currentEpisode: 1
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ progressPercent: 0.15
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ lastPositionSeconds: 450
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ... (more fields)
    ‚îÇ       ‚îî‚îÄ‚îÄ 2316/  (The Office)
    ‚îÇ           ‚îî‚îÄ‚îÄ ... (similar structure)
    ‚îî‚îÄ‚îÄ xyz789-user-id-2/
        ‚îî‚îÄ‚îÄ watchHistory/
            ‚îî‚îÄ‚îÄ ... (their shows)
```

---

## üìä Firebase Quotas (Free Tier)

### Firestore
- **Storage**: 1 GB (you'll use <10 MB)
- **Reads**: 50,000/day (you'll use <100/day)
- **Writes**: 20,000/day (you'll use <500/day)
- **Deletes**: 20,000/day

### Authentication
- **Users**: Unlimited ‚úÖ
- **Sign-ins**: Unlimited ‚úÖ

**You're well within limits for 5 users!** üéâ

---

## üêõ Troubleshooting

### "Failed to initialize Firebase"
**Fix:** Make sure you ran:
```powershell
flutter pub get
```

### "Permission denied" in Firestore
**Check:**
1. Are Firestore rules published?
2. Is user authenticated? (Check Firebase Console ‚Üí Authentication)
3. Is userId matching in rules?

**Debug:**
```dart
// Add to your code temporarily to check user ID
print('User ID: ${FirebaseAuth.instance.currentUser?.uid}');
```

### Video plays but no watch history
**Check:**
1. Firebase initialized in main.dart? ‚úÖ (we just did this)
2. Firestore rules set? (do step 3 above)
3. Check Flutter console for errors

### "Anonymous sign-in is disabled"
**Fix:** Follow Step 1 above to enable it

---

## ‚úÖ Final Checklist

- [ ] **Firebase project created** (nivio-*****) ‚úÖ
- [ ] **Anonymous auth enabled** (Step 1)
- [ ] **Firestore database created** (Step 2)
- [ ] **Security rules set** (Step 3)
- [ ] **App tested** (search + play video)
- [ ] **Watch history verified** (check Firestore Console)

---

## üéâ You're Done!

Once all checkboxes are ‚úÖ, your Firebase is **fully configured** and ready!

### Next Steps:
1. Complete Step 1, 2, 3 above
2. Run: `flutter run -d edge`
3. Test search, play video, check continue watching
4. Enjoy your Netflix clone! üçø

---

## üí° Pro Tips

### Clear Watch History
```dart
// In Firebase Console ‚Üí Firestore ‚Üí Delete documents manually
// Or add a "Clear History" button in your app
```

### Add More Users
- Just click "GET STARTED" on auth screen again
- Each device gets a unique anonymous user ID
- Each user has separate watch history

### Monitor Usage
- Firebase Console ‚Üí Usage tab
- Check reads/writes/storage
- Set up budget alerts (optional)

---

**Need help?** Check the error messages in:
1. Flutter console (VS Code terminal)
2. Chrome DevTools console (F12)
3. Firebase Console ‚Üí Firestore ‚Üí Usage/Logs

Good luck! üöÄ
</file>

<file path="firebase.json">
{"flutter":{"platforms":{"android":{"default":{"projectId":"nivio-f6110","appId":"1:288514665926:android:84e02eefea379d83e316c7","fileOutput":"android/app/google-services.json"}},"dart":{"lib/firebase_options.dart":{"projectId":"nivio-f6110","configurations":{"android":"1:288514665926:android:84e02eefea379d83e316c7","web":"1:288514665926:web:6a1cd4d06e84741ae316c7","windows":"1:288514665926:web:65397d466c2710b7e316c7"}}}}}}
</file>

<file path="ios/.gitignore">
**/dgph
*.mode1v3
*.mode2v3
*.moved-aside
*.pbxuser
*.perspectivev3
**/*sync/
.sconsign.dblite
.tags*
**/.vagrant/
**/DerivedData/
Icon?
**/Pods/
**/.symlinks/
profile
xcuserdata
**/.generated/
Flutter/App.framework
Flutter/Flutter.framework
Flutter/Flutter.podspec
Flutter/Generated.xcconfig
Flutter/ephemeral/
Flutter/app.flx
Flutter/app.zip
Flutter/flutter_assets/
Flutter/flutter_export_environment.sh
ServiceDefinitions.json
Runner/GeneratedPluginRegistrant.*

# Exceptions to above rules.
!default.mode1v3
!default.mode2v3
!default.pbxuser
!default.perspectivev3
</file>

<file path="ios/Flutter/AppFrameworkInfo.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>CFBundleDevelopmentRegion</key>
  <string>en</string>
  <key>CFBundleExecutable</key>
  <string>App</string>
  <key>CFBundleIdentifier</key>
  <string>io.flutter.flutter.app</string>
  <key>CFBundleInfoDictionaryVersion</key>
  <string>6.0</string>
  <key>CFBundleName</key>
  <string>App</string>
  <key>CFBundlePackageType</key>
  <string>FMWK</string>
  <key>CFBundleShortVersionString</key>
  <string>1.0</string>
  <key>CFBundleSignature</key>
  <string>????</string>
  <key>CFBundleVersion</key>
  <string>1.0</string>
  <key>MinimumOSVersion</key>
  <string>13.0</string>
</dict>
</plist>
</file>

<file path="ios/Flutter/Debug.xcconfig">
#include "Generated.xcconfig"
</file>

<file path="ios/Flutter/Release.xcconfig">
#include "Generated.xcconfig"
</file>

<file path="ios/Runner.xcodeproj/project.pbxproj">
// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 54;
	objects = {

/* Begin PBXBuildFile section */
		1498D2341E8E89220040F4C2 /* GeneratedPluginRegistrant.m in Sources */ = {isa = PBXBuildFile; fileRef = 1498D2331E8E89220040F4C2 /* GeneratedPluginRegistrant.m */; };
		331C808B294A63AB00263BE5 /* RunnerTests.swift in Sources */ = {isa = PBXBuildFile; fileRef = 331C807B294A618700263BE5 /* RunnerTests.swift */; };
		3B3967161E833CAA004F5970 /* AppFrameworkInfo.plist in Resources */ = {isa = PBXBuildFile; fileRef = 3B3967151E833CAA004F5970 /* AppFrameworkInfo.plist */; };
		74858FAF1ED2DC5600515810 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 74858FAE1ED2DC5600515810 /* AppDelegate.swift */; };
		97C146FC1CF9000F007C117D /* Main.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 97C146FA1CF9000F007C117D /* Main.storyboard */; };
		97C146FE1CF9000F007C117D /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = 97C146FD1CF9000F007C117D /* Assets.xcassets */; };
		97C147011CF9000F007C117D /* LaunchScreen.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 97C146FF1CF9000F007C117D /* LaunchScreen.storyboard */; };
/* End PBXBuildFile section */

/* Begin PBXContainerItemProxy section */
		331C8085294A63A400263BE5 /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = 97C146E61CF9000F007C117D /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = 97C146ED1CF9000F007C117D;
			remoteInfo = Runner;
		};
/* End PBXContainerItemProxy section */

/* Begin PBXCopyFilesBuildPhase section */
		9705A1C41CF9048500538489 /* Embed Frameworks */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = "";
			dstSubfolderSpec = 10;
			files = (
			);
			name = "Embed Frameworks";
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXCopyFilesBuildPhase section */

/* Begin PBXFileReference section */
		1498D2321E8E86230040F4C2 /* GeneratedPluginRegistrant.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = GeneratedPluginRegistrant.h; sourceTree = "<group>"; };
		1498D2331E8E89220040F4C2 /* GeneratedPluginRegistrant.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = GeneratedPluginRegistrant.m; sourceTree = "<group>"; };
		331C807B294A618700263BE5 /* RunnerTests.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RunnerTests.swift; sourceTree = "<group>"; };
		331C8081294A63A400263BE5 /* RunnerTests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = RunnerTests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
		3B3967151E833CAA004F5970 /* AppFrameworkInfo.plist */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.xml; name = AppFrameworkInfo.plist; path = Flutter/AppFrameworkInfo.plist; sourceTree = "<group>"; };
		74858FAD1ED2DC5600515810 /* Runner-Bridging-Header.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = "Runner-Bridging-Header.h"; sourceTree = "<group>"; };
		74858FAE1ED2DC5600515810 /* AppDelegate.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		7AFA3C8E1D35360C0083082E /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; name = Release.xcconfig; path = Flutter/Release.xcconfig; sourceTree = "<group>"; };
		9740EEB21CF90195004384FC /* Debug.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; name = Debug.xcconfig; path = Flutter/Debug.xcconfig; sourceTree = "<group>"; };
		9740EEB31CF90195004384FC /* Generated.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; name = Generated.xcconfig; path = Flutter/Generated.xcconfig; sourceTree = "<group>"; };
		97C146EE1CF9000F007C117D /* Runner.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = Runner.app; sourceTree = BUILT_PRODUCTS_DIR; };
		97C146FB1CF9000F007C117D /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.storyboard; name = Base; path = Base.lproj/Main.storyboard; sourceTree = "<group>"; };
		97C146FD1CF9000F007C117D /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		97C147001CF9000F007C117D /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.storyboard; name = Base; path = Base.lproj/LaunchScreen.storyboard; sourceTree = "<group>"; };
		97C147021CF9000F007C117D /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
/* End PBXFileReference section */

/* Begin PBXFrameworksBuildPhase section */
		97C146EB1CF9000F007C117D /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		331C8082294A63A400263BE5 /* RunnerTests */ = {
			isa = PBXGroup;
			children = (
				331C807B294A618700263BE5 /* RunnerTests.swift */,
			);
			path = RunnerTests;
			sourceTree = "<group>";
		};
		9740EEB11CF90186004384FC /* Flutter */ = {
			isa = PBXGroup;
			children = (
				3B3967151E833CAA004F5970 /* AppFrameworkInfo.plist */,
				9740EEB21CF90195004384FC /* Debug.xcconfig */,
				7AFA3C8E1D35360C0083082E /* Release.xcconfig */,
				9740EEB31CF90195004384FC /* Generated.xcconfig */,
			);
			name = Flutter;
			sourceTree = "<group>";
		};
		97C146E51CF9000F007C117D = {
			isa = PBXGroup;
			children = (
				9740EEB11CF90186004384FC /* Flutter */,
				97C146F01CF9000F007C117D /* Runner */,
				97C146EF1CF9000F007C117D /* Products */,
				331C8082294A63A400263BE5 /* RunnerTests */,
			);
			sourceTree = "<group>";
		};
		97C146EF1CF9000F007C117D /* Products */ = {
			isa = PBXGroup;
			children = (
				97C146EE1CF9000F007C117D /* Runner.app */,
				331C8081294A63A400263BE5 /* RunnerTests.xctest */,
			);
			name = Products;
			sourceTree = "<group>";
		};
		97C146F01CF9000F007C117D /* Runner */ = {
			isa = PBXGroup;
			children = (
				97C146FA1CF9000F007C117D /* Main.storyboard */,
				97C146FD1CF9000F007C117D /* Assets.xcassets */,
				97C146FF1CF9000F007C117D /* LaunchScreen.storyboard */,
				97C147021CF9000F007C117D /* Info.plist */,
				1498D2321E8E86230040F4C2 /* GeneratedPluginRegistrant.h */,
				1498D2331E8E89220040F4C2 /* GeneratedPluginRegistrant.m */,
				74858FAE1ED2DC5600515810 /* AppDelegate.swift */,
				74858FAD1ED2DC5600515810 /* Runner-Bridging-Header.h */,
			);
			path = Runner;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXNativeTarget section */
		331C8080294A63A400263BE5 /* RunnerTests */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 331C8087294A63A400263BE5 /* Build configuration list for PBXNativeTarget "RunnerTests" */;
			buildPhases = (
				331C807D294A63A400263BE5 /* Sources */,
				331C807F294A63A400263BE5 /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
				331C8086294A63A400263BE5 /* PBXTargetDependency */,
			);
			name = RunnerTests;
			productName = RunnerTests;
			productReference = 331C8081294A63A400263BE5 /* RunnerTests.xctest */;
			productType = "com.apple.product-type.bundle.unit-test";
		};
		97C146ED1CF9000F007C117D /* Runner */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 97C147051CF9000F007C117D /* Build configuration list for PBXNativeTarget "Runner" */;
			buildPhases = (
				9740EEB61CF901F6004384FC /* Run Script */,
				97C146EA1CF9000F007C117D /* Sources */,
				97C146EB1CF9000F007C117D /* Frameworks */,
				97C146EC1CF9000F007C117D /* Resources */,
				9705A1C41CF9048500538489 /* Embed Frameworks */,
				3B06AD1E1E4923F5004D2608 /* Thin Binary */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = Runner;
			productName = Runner;
			productReference = 97C146EE1CF9000F007C117D /* Runner.app */;
			productType = "com.apple.product-type.application";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		97C146E61CF9000F007C117D /* Project object */ = {
			isa = PBXProject;
			attributes = {
				BuildIndependentTargetsInParallel = YES;
				LastUpgradeCheck = 1510;
				ORGANIZATIONNAME = "";
				TargetAttributes = {
					331C8080294A63A400263BE5 = {
						CreatedOnToolsVersion = 14.0;
						TestTargetID = 97C146ED1CF9000F007C117D;
					};
					97C146ED1CF9000F007C117D = {
						CreatedOnToolsVersion = 7.3.1;
						LastSwiftMigration = 1100;
					};
				};
			};
			buildConfigurationList = 97C146E91CF9000F007C117D /* Build configuration list for PBXProject "Runner" */;
			compatibilityVersion = "Xcode 9.3";
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = 97C146E51CF9000F007C117D;
			productRefGroup = 97C146EF1CF9000F007C117D /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				97C146ED1CF9000F007C117D /* Runner */,
				331C8080294A63A400263BE5 /* RunnerTests */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		331C807F294A63A400263BE5 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		97C146EC1CF9000F007C117D /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				97C147011CF9000F007C117D /* LaunchScreen.storyboard in Resources */,
				3B3967161E833CAA004F5970 /* AppFrameworkInfo.plist in Resources */,
				97C146FE1CF9000F007C117D /* Assets.xcassets in Resources */,
				97C146FC1CF9000F007C117D /* Main.storyboard in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXShellScriptBuildPhase section */
		3B06AD1E1E4923F5004D2608 /* Thin Binary */ = {
			isa = PBXShellScriptBuildPhase;
			alwaysOutOfDate = 1;
			buildActionMask = 2147483647;
			files = (
			);
			inputPaths = (
				"${TARGET_BUILD_DIR}/${INFOPLIST_PATH}",
			);
			name = "Thin Binary";
			outputPaths = (
			);
			runOnlyForDeploymentPostprocessing = 0;
			shellPath = /bin/sh;
			shellScript = "/bin/sh \"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh\" embed_and_thin";
		};
		9740EEB61CF901F6004384FC /* Run Script */ = {
			isa = PBXShellScriptBuildPhase;
			alwaysOutOfDate = 1;
			buildActionMask = 2147483647;
			files = (
			);
			inputPaths = (
			);
			name = "Run Script";
			outputPaths = (
			);
			runOnlyForDeploymentPostprocessing = 0;
			shellPath = /bin/sh;
			shellScript = "/bin/sh \"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh\" build";
		};
/* End PBXShellScriptBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		331C807D294A63A400263BE5 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				331C808B294A63AB00263BE5 /* RunnerTests.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		97C146EA1CF9000F007C117D /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				74858FAF1ED2DC5600515810 /* AppDelegate.swift in Sources */,
				1498D2341E8E89220040F4C2 /* GeneratedPluginRegistrant.m in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin PBXTargetDependency section */
		331C8086294A63A400263BE5 /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = 97C146ED1CF9000F007C117D /* Runner */;
			targetProxy = 331C8085294A63A400263BE5 /* PBXContainerItemProxy */;
		};
/* End PBXTargetDependency section */

/* Begin PBXVariantGroup section */
		97C146FA1CF9000F007C117D /* Main.storyboard */ = {
			isa = PBXVariantGroup;
			children = (
				97C146FB1CF9000F007C117D /* Base */,
			);
			name = Main.storyboard;
			sourceTree = "<group>";
		};
		97C146FF1CF9000F007C117D /* LaunchScreen.storyboard */ = {
			isa = PBXVariantGroup;
			children = (
				97C147001CF9000F007C117D /* Base */,
			);
			name = LaunchScreen.storyboard;
			sourceTree = "<group>";
		};
/* End PBXVariantGroup section */

/* Begin XCBuildConfiguration section */
		249021D3217E4FDB00AE95B9 /* Profile */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu99;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 13.0;
				MTL_ENABLE_DEBUG_INFO = NO;
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = iphoneos;
				TARGETED_DEVICE_FAMILY = "1,2";
				VALIDATE_PRODUCT = YES;
			};
			name = Profile;
		};
		249021D4217E4FDB00AE95B9 /* Profile */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CURRENT_PROJECT_VERSION = "$(FLUTTER_BUILD_NUMBER)";
				ENABLE_BITCODE = NO;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_OBJC_BRIDGING_HEADER = "Runner/Runner-Bridging-Header.h";
				SWIFT_VERSION = 5.0;
				VERSIONING_SYSTEM = "apple-generic";
			};
			name = Profile;
		};
		331C8088294A63A400263BE5 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG;
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/Runner.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/Runner";
			};
			name = Debug;
		};
		331C8089294A63A400263BE5 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/Runner.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/Runner";
			};
			name = Release;
		};
		331C808A294A63A400263BE5 /* Profile */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/Runner.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/Runner";
			};
			name = Profile;
		};
		97C147031CF9000F007C117D /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = AppIcon;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = dwarf;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu99;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 13.0;
				MTL_ENABLE_DEBUG_INFO = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = iphoneos;
				TARGETED_DEVICE_FAMILY = "1,2";
			};
			name = Debug;
		};
		97C147041CF9000F007C117D /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = AppIcon;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++0x";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				"CODE_SIGN_IDENTITY[sdk=iphoneos*]" = "iPhone Developer";
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu99;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 13.0;
				MTL_ENABLE_DEBUG_INFO = NO;
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = iphoneos;
				SWIFT_COMPILATION_MODE = wholemodule;
				SWIFT_OPTIMIZATION_LEVEL = "-O";
				TARGETED_DEVICE_FAMILY = "1,2";
				VALIDATE_PRODUCT = YES;
			};
			name = Release;
		};
		97C147061CF9000F007C117D /* Debug */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 9740EEB21CF90195004384FC /* Debug.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CURRENT_PROJECT_VERSION = "$(FLUTTER_BUILD_NUMBER)";
				ENABLE_BITCODE = NO;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_OBJC_BRIDGING_HEADER = "Runner/Runner-Bridging-Header.h";
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				SWIFT_VERSION = 5.0;
				VERSIONING_SYSTEM = "apple-generic";
			};
			name = Debug;
		};
		97C147071CF9000F007C117D /* Release */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CURRENT_PROJECT_VERSION = "$(FLUTTER_BUILD_NUMBER)";
				ENABLE_BITCODE = NO;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_OBJC_BRIDGING_HEADER = "Runner/Runner-Bridging-Header.h";
				SWIFT_VERSION = 5.0;
				VERSIONING_SYSTEM = "apple-generic";
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		331C8087294A63A400263BE5 /* Build configuration list for PBXNativeTarget "RunnerTests" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				331C8088294A63A400263BE5 /* Debug */,
				331C8089294A63A400263BE5 /* Release */,
				331C808A294A63A400263BE5 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		97C146E91CF9000F007C117D /* Build configuration list for PBXProject "Runner" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				97C147031CF9000F007C117D /* Debug */,
				97C147041CF9000F007C117D /* Release */,
				249021D3217E4FDB00AE95B9 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		97C147051CF9000F007C117D /* Build configuration list for PBXNativeTarget "Runner" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				97C147061CF9000F007C117D /* Debug */,
				97C147071CF9000F007C117D /* Release */,
				249021D4217E4FDB00AE95B9 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */
	};
	rootObject = 97C146E61CF9000F007C117D /* Project object */;
}
</file>

<file path="ios/Runner.xcodeproj/project.xcworkspace/contents.xcworkspacedata">
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "self:">
   </FileRef>
</Workspace>
</file>

<file path="ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDEDidComputeMac32BitWarning</key>
	<true/>
</dict>
</plist>
</file>

<file path="ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>PreviewsEnabled</key>
	<false/>
</dict>
</plist>
</file>

<file path="ios/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme">
<?xml version="1.0" encoding="UTF-8"?>
<Scheme
   LastUpgradeVersion = "1510"
   version = "1.3">
   <BuildAction
      parallelizeBuildables = "YES"
      buildImplicitDependencies = "YES">
      <BuildActionEntries>
         <BuildActionEntry
            buildForTesting = "YES"
            buildForRunning = "YES"
            buildForProfiling = "YES"
            buildForArchiving = "YES"
            buildForAnalyzing = "YES">
            <BuildableReference
               BuildableIdentifier = "primary"
               BlueprintIdentifier = "97C146ED1CF9000F007C117D"
               BuildableName = "Runner.app"
               BlueprintName = "Runner"
               ReferencedContainer = "container:Runner.xcodeproj">
            </BuildableReference>
         </BuildActionEntry>
      </BuildActionEntries>
   </BuildAction>
   <TestAction
      buildConfiguration = "Debug"
      selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.LLDB"
      selectedLauncherIdentifier = "Xcode.DebuggerFoundation.Launcher.LLDB"
      customLLDBInitFile = "$(SRCROOT)/Flutter/ephemeral/flutter_lldbinit"
      shouldUseLaunchSchemeArgsEnv = "YES">
      <MacroExpansion>
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "97C146ED1CF9000F007C117D"
            BuildableName = "Runner.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </MacroExpansion>
      <Testables>
         <TestableReference
            skipped = "NO"
            parallelizable = "YES">
            <BuildableReference
               BuildableIdentifier = "primary"
               BlueprintIdentifier = "331C8080294A63A400263BE5"
               BuildableName = "RunnerTests.xctest"
               BlueprintName = "RunnerTests"
               ReferencedContainer = "container:Runner.xcodeproj">
            </BuildableReference>
         </TestableReference>
      </Testables>
   </TestAction>
   <LaunchAction
      buildConfiguration = "Debug"
      selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.LLDB"
      selectedLauncherIdentifier = "Xcode.DebuggerFoundation.Launcher.LLDB"
      customLLDBInitFile = "$(SRCROOT)/Flutter/ephemeral/flutter_lldbinit"
      launchStyle = "0"
      useCustomWorkingDirectory = "NO"
      ignoresPersistentStateOnLaunch = "NO"
      debugDocumentVersioning = "YES"
      debugServiceExtension = "internal"
      enableGPUValidationMode = "1"
      allowLocationSimulation = "YES">
      <BuildableProductRunnable
         runnableDebuggingMode = "0">
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "97C146ED1CF9000F007C117D"
            BuildableName = "Runner.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </BuildableProductRunnable>
   </LaunchAction>
   <ProfileAction
      buildConfiguration = "Profile"
      shouldUseLaunchSchemeArgsEnv = "YES"
      savedToolIdentifier = ""
      useCustomWorkingDirectory = "NO"
      debugDocumentVersioning = "YES">
      <BuildableProductRunnable
         runnableDebuggingMode = "0">
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "97C146ED1CF9000F007C117D"
            BuildableName = "Runner.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </BuildableProductRunnable>
   </ProfileAction>
   <AnalyzeAction
      buildConfiguration = "Debug">
   </AnalyzeAction>
   <ArchiveAction
      buildConfiguration = "Release"
      revealArchiveInOrganizer = "YES">
   </ArchiveAction>
</Scheme>
</file>

<file path="ios/Runner.xcworkspace/contents.xcworkspacedata">
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "group:Runner.xcodeproj">
   </FileRef>
</Workspace>
</file>

<file path="ios/Runner.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDEDidComputeMac32BitWarning</key>
	<true/>
</dict>
</plist>
</file>

<file path="ios/Runner.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>PreviewsEnabled</key>
	<false/>
</dict>
</plist>
</file>

<file path="ios/Runner/AppDelegate.swift">
import Flutter
import UIKit

@main
@objc class AppDelegate: FlutterAppDelegate {
  override func application(
    _ application: UIApplication,
    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
  ) -> Bool {
    GeneratedPluginRegistrant.register(with: self)
    return super.application(application, didFinishLaunchingWithOptions: launchOptions)
  }
}
</file>

<file path="ios/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json">
{"images":[{"size":"20x20","idiom":"iphone","filename":"Icon-App-20x20@2x.png","scale":"2x"},{"size":"20x20","idiom":"iphone","filename":"Icon-App-20x20@3x.png","scale":"3x"},{"size":"29x29","idiom":"iphone","filename":"Icon-App-29x29@1x.png","scale":"1x"},{"size":"29x29","idiom":"iphone","filename":"Icon-App-29x29@2x.png","scale":"2x"},{"size":"29x29","idiom":"iphone","filename":"Icon-App-29x29@3x.png","scale":"3x"},{"size":"40x40","idiom":"iphone","filename":"Icon-App-40x40@2x.png","scale":"2x"},{"size":"40x40","idiom":"iphone","filename":"Icon-App-40x40@3x.png","scale":"3x"},{"size":"57x57","idiom":"iphone","filename":"Icon-App-57x57@1x.png","scale":"1x"},{"size":"57x57","idiom":"iphone","filename":"Icon-App-57x57@2x.png","scale":"2x"},{"size":"60x60","idiom":"iphone","filename":"Icon-App-60x60@2x.png","scale":"2x"},{"size":"60x60","idiom":"iphone","filename":"Icon-App-60x60@3x.png","scale":"3x"},{"size":"20x20","idiom":"ipad","filename":"Icon-App-20x20@1x.png","scale":"1x"},{"size":"20x20","idiom":"ipad","filename":"Icon-App-20x20@2x.png","scale":"2x"},{"size":"29x29","idiom":"ipad","filename":"Icon-App-29x29@1x.png","scale":"1x"},{"size":"29x29","idiom":"ipad","filename":"Icon-App-29x29@2x.png","scale":"2x"},{"size":"40x40","idiom":"ipad","filename":"Icon-App-40x40@1x.png","scale":"1x"},{"size":"40x40","idiom":"ipad","filename":"Icon-App-40x40@2x.png","scale":"2x"},{"size":"50x50","idiom":"ipad","filename":"Icon-App-50x50@1x.png","scale":"1x"},{"size":"50x50","idiom":"ipad","filename":"Icon-App-50x50@2x.png","scale":"2x"},{"size":"72x72","idiom":"ipad","filename":"Icon-App-72x72@1x.png","scale":"1x"},{"size":"72x72","idiom":"ipad","filename":"Icon-App-72x72@2x.png","scale":"2x"},{"size":"76x76","idiom":"ipad","filename":"Icon-App-76x76@1x.png","scale":"1x"},{"size":"76x76","idiom":"ipad","filename":"Icon-App-76x76@2x.png","scale":"2x"},{"size":"83.5x83.5","idiom":"ipad","filename":"Icon-App-83.5x83.5@2x.png","scale":"2x"},{"size":"1024x1024","idiom":"ios-marketing","filename":"Icon-App-1024x1024@1x.png","scale":"1x"}],"info":{"version":1,"author":"xcode"}}
</file>

<file path="ios/Runner/Assets.xcassets/LaunchBackground.imageset/Contents.json">
{
  "images" : [
    {
      "filename" : "background.png",
      "idiom" : "universal",
      "scale" : "1x"
    },
    {
      "idiom" : "universal",
      "scale" : "2x"
    },
    {
      "idiom" : "universal",
      "scale" : "3x"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}
</file>

<file path="ios/Runner/Assets.xcassets/LaunchImage.imageset/Contents.json">
{
  "images" : [
    {
      "filename" : "LaunchImage.png",
      "idiom" : "universal",
      "scale" : "1x"
    },
    {
      "filename" : "LaunchImage@2x.png",
      "idiom" : "universal",
      "scale" : "2x"
    },
    {
      "filename" : "LaunchImage@3x.png",
      "idiom" : "universal",
      "scale" : "3x"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}
</file>

<file path="ios/Runner/Assets.xcassets/LaunchImage.imageset/README.md">
# Launch Screen Assets

You can customize the launch screen with your own desired assets by replacing the image files in this directory.

You can also do it by opening your Flutter project's Xcode project with `open ios/Runner.xcworkspace`, selecting `Runner/Assets.xcassets` in the Project Navigator and dropping in the desired images.
</file>

<file path="ios/Runner/Base.lproj/LaunchScreen.storyboard">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="12121" systemVersion="16G29" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" launchScreen="YES" colorMatched="YES" initialViewController="01J-lp-oVM">
    <dependencies>
        <deployment identifier="iOS"/>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="12089"/>
    </dependencies>
    <scenes>
        <!--View Controller-->
        <scene sceneID="EHf-IW-A2E">
            <objects>
                <viewController id="01J-lp-oVM" sceneMemberID="viewController">
                    <layoutGuides>
                        <viewControllerLayoutGuide type="top" id="Ydg-fD-yQy"/>
                        <viewControllerLayoutGuide type="bottom" id="xbc-2k-c8Z"/>
                    </layoutGuides>
                    <view key="view" contentMode="scaleToFill" id="Ze5-6b-2t3">
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <imageView clipsSubviews="YES" userInteractionEnabled="NO" contentMode="scaleToFill" image="LaunchBackground" translatesAutoresizingMaskIntoConstraints="NO" id="tWc-Dq-wcI"/>
                            <imageView opaque="NO" clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="center" image="LaunchImage" translatesAutoresizingMaskIntoConstraints="NO" id="YRO-k0-Ey4"></imageView>
                        </subviews>
                        <color key="backgroundColor" red="1" green="1" blue="1" alpha="1" colorSpace="custom" customColorSpace="sRGB"/>
                        <constraints>
                            <constraint firstItem="YRO-k0-Ey4" firstAttribute="leading" secondItem="Ze5-6b-2t3" secondAttribute="leading" id="3T2-ad-Qdv"/>
                            <constraint firstItem="tWc-Dq-wcI" firstAttribute="bottom" secondItem="Ze5-6b-2t3" secondAttribute="bottom" id="RPx-PI-7Xg"/>
                            <constraint firstItem="tWc-Dq-wcI" firstAttribute="top" secondItem="Ze5-6b-2t3" secondAttribute="top" id="SdS-ul-q2q"/>
                            <constraint firstAttribute="trailing" secondItem="tWc-Dq-wcI" secondAttribute="trailing" id="Swv-Gf-Rwn"/>
                            <constraint firstAttribute="trailing" secondItem="YRO-k0-Ey4" secondAttribute="trailing" id="TQA-XW-tRk"/>
                            <constraint firstItem="YRO-k0-Ey4" firstAttribute="bottom" secondItem="Ze5-6b-2t3" secondAttribute="bottom" id="duK-uY-Gun"/>
                            <constraint firstItem="tWc-Dq-wcI" firstAttribute="leading" secondItem="Ze5-6b-2t3" secondAttribute="leading" id="kV7-tw-vXt"/>
                            <constraint firstItem="YRO-k0-Ey4" firstAttribute="top" secondItem="Ze5-6b-2t3" secondAttribute="top" id="xPn-NY-SIU"/>
                        </constraints>
                    </view>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="iYj-Kq-Ea1" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="53" y="375"/>
        </scene>
    </scenes>
    <resources>
        <image name="LaunchImage" width="585" height="427"/>
        <image name="LaunchBackground" width="1" height="1"/>
    </resources>
</document>
</file>

<file path="ios/Runner/Base.lproj/Main.storyboard">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="10117" systemVersion="15F34" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" useTraitCollections="YES" initialViewController="BYZ-38-t0r">
    <dependencies>
        <deployment identifier="iOS"/>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="10085"/>
    </dependencies>
    <scenes>
        <!--Flutter View Controller-->
        <scene sceneID="tne-QT-ifu">
            <objects>
                <viewController id="BYZ-38-t0r" customClass="FlutterViewController" sceneMemberID="viewController">
                    <layoutGuides>
                        <viewControllerLayoutGuide type="top" id="y3c-jy-aDJ"/>
                        <viewControllerLayoutGuide type="bottom" id="wfy-db-euE"/>
                    </layoutGuides>
                    <view key="view" contentMode="scaleToFill" id="8bC-Xf-vdC">
                        <rect key="frame" x="0.0" y="0.0" width="600" height="600"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <color key="backgroundColor" white="1" alpha="1" colorSpace="custom" customColorSpace="calibratedWhite"/>
                    </view>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="dkx-z0-nzr" sceneMemberID="firstResponder"/>
            </objects>
        </scene>
    </scenes>
</document>
</file>

<file path="ios/Runner/Info.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
	<dict>
		<key>CFBundleDevelopmentRegion</key>
		<string>$(DEVELOPMENT_LANGUAGE)</string>
		<key>CFBundleDisplayName</key>
		<string>Nivio</string>
		<key>CFBundleExecutable</key>
		<string>$(EXECUTABLE_NAME)</string>
		<key>CFBundleIdentifier</key>
		<string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>
	<key>CFBundleInfoDictionaryVersion</key>
	<string>6.0</string>
	<key>CFBundleName</key>
	<string>Nivio</string>
	<key>CFBundlePackageType</key>
	<string>APPL</string>
		<key>CFBundleShortVersionString</key>
		<string>$(FLUTTER_BUILD_NAME)</string>
		<key>CFBundleSignature</key>
		<string>????</string>
		<key>CFBundleVersion</key>
		<string>$(FLUTTER_BUILD_NUMBER)</string>
		<key>LSRequiresIPhoneOS</key>
		<true/>
		<key>UILaunchStoryboardName</key>
		<string>LaunchScreen</string>
		<key>UIMainStoryboardFile</key>
		<string>Main</string>
		<key>UISupportedInterfaceOrientations</key>
		<array>
			<string>UIInterfaceOrientationPortrait</string>
			<string>UIInterfaceOrientationLandscapeLeft</string>
			<string>UIInterfaceOrientationLandscapeRight</string>
		</array>
		<key>UISupportedInterfaceOrientations~ipad</key>
		<array>
			<string>UIInterfaceOrientationPortrait</string>
			<string>UIInterfaceOrientationPortraitUpsideDown</string>
			<string>UIInterfaceOrientationLandscapeLeft</string>
			<string>UIInterfaceOrientationLandscapeRight</string>
		</array>
		<key>CADisableMinimumFrameDurationOnPhone</key>
		<true/>
		<key>UIApplicationSupportsIndirectInputEvents</key>
		<true/>
		<key>UIStatusBarHidden</key>
		<false/>
	</dict>
</plist>
</file>

<file path="ios/Runner/Runner-Bridging-Header.h">
#import "GeneratedPluginRegistrant.h"
</file>

<file path="ios/RunnerTests/RunnerTests.swift">
import Flutter
import UIKit
import XCTest

class RunnerTests: XCTestCase {

  func testExample() {
    // If you add code to the Runner application, consider adding tests here.
    // See https://developer.apple.com/documentation/xctest for more information about using XCTest.
  }

}
</file>

<file path="lib/core/constants.dart">
// API Constants
const String tmdbApiKey = 'd39245e111947eb92b947e3a8aacc89f';
const String tmdbBaseUrl = 'https://api.themoviedb.org';

// TMDB Image Base URLs
const String tmdbImageBaseUrl = 'https://image.tmdb.org/t/p';
const String posterSize = 'w500';
const String backdropSize = 'original';

// Video Quality Priority
const List<String> qualityPriority = [
  '2160p',
  '1440p',
  '1080p',
  '720p',
  '480p',
  '360p',
  'auto',
];
</file>

<file path="lib/core/theme.dart">
import 'package:flutter/material.dart';

class NivioTheme {
  // Netflix Colors
  static const Color netflixRed = Color(0xFFE50914);
  static const Color netflixBlack = Color(0xFF141414);
  static const Color netflixDarkGrey = Color(0xFF2F2F2F);
  static const Color netflixGrey = Color(0xFF808080);
  static const Color netflixLightGrey = Color(0xFFB3B3B3);
  static const Color netflixWhite = Color(0xFFFFFFFF);

  static ThemeData darkTheme = ThemeData(
    useMaterial3: true,
    brightness: Brightness.dark,
    scaffoldBackgroundColor: netflixBlack,
    primaryColor: netflixRed,
    colorScheme: const ColorScheme.dark(
      primary: netflixRed,
      secondary: netflixRed,
      surface: netflixDarkGrey,
      surfaceContainer: netflixDarkGrey,
    ),
    
    // AppBar
    appBarTheme: const AppBarTheme(
      backgroundColor: Colors.transparent,
      elevation: 0,
      centerTitle: false,
      titleTextStyle: TextStyle(
        color: netflixRed,
        fontSize: 32,
        fontWeight: FontWeight.bold,
        letterSpacing: 2,
      ),
    ),
    
    // Text Theme
    textTheme: const TextTheme(
      displayLarge: TextStyle(
        color: netflixWhite,
        fontSize: 32,
        fontWeight: FontWeight.bold,
      ),
      displayMedium: TextStyle(
        color: netflixWhite,
        fontSize: 28,
        fontWeight: FontWeight.bold,
      ),
      displaySmall: TextStyle(
        color: netflixWhite,
        fontSize: 24,
        fontWeight: FontWeight.bold,
      ),
      headlineMedium: TextStyle(
        color: netflixWhite,
        fontSize: 20,
        fontWeight: FontWeight.w600,
      ),
      titleLarge: TextStyle(
        color: netflixWhite,
        fontSize: 18,
        fontWeight: FontWeight.w600,
      ),
      titleMedium: TextStyle(
        color: netflixWhite,
        fontSize: 16,
        fontWeight: FontWeight.w500,
      ),
      bodyLarge: TextStyle(
        color: netflixWhite,
        fontSize: 16,
      ),
      bodyMedium: TextStyle(
        color: netflixLightGrey,
        fontSize: 14,
      ),
      bodySmall: TextStyle(
        color: netflixGrey,
        fontSize: 12,
      ),
    ),
    
    // Input Decoration
    inputDecorationTheme: InputDecorationTheme(
      filled: true,
      fillColor: netflixDarkGrey,
      border: OutlineInputBorder(
        borderRadius: BorderRadius.circular(4),
        borderSide: BorderSide.none,
      ),
      hintStyle: const TextStyle(color: netflixGrey),
      contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 14),
    ),
    
    // Elevated Button
    elevatedButtonTheme: ElevatedButtonThemeData(
      style: ElevatedButton.styleFrom(
        backgroundColor: netflixRed,
        foregroundColor: netflixWhite,
        padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.circular(4),
        ),
        textStyle: const TextStyle(
          fontSize: 16,
          fontWeight: FontWeight.w600,
        ),
      ),
    ),
    
    // Card
    cardTheme: const CardThemeData(
      color: netflixDarkGrey,
      elevation: 0,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.all(Radius.circular(4)),
      ),
    ),
    
    // Progress Indicator
    progressIndicatorTheme: const ProgressIndicatorThemeData(
      color: netflixRed,
    ),
  );
}
</file>

<file path="lib/firebase_options.dart">
// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps.
///
/// Example:
/// ```dart
/// import 'firebase_options.dart';
/// // ...
/// await Firebase.initializeApp(
///   options: DefaultFirebaseOptions.currentPlatform,
/// );
/// ```
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for ios - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      case TargetPlatform.macOS:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for macos - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'AIzaSyDLTqG3tjv6MTQd3RZraIdJ4gv0QKNQYE8',
    appId: '1:288514665926:web:6a1cd4d06e84741ae316c7',
    messagingSenderId: '288514665926',
    projectId: 'nivio-f6110',
    authDomain: 'nivio-f6110.firebaseapp.com',
    storageBucket: 'nivio-f6110.firebasestorage.app',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'AIzaSyBV8q-J6A_aAklyKNuiTv4q_TiuoyO-yQI',
    appId: '1:288514665926:android:84e02eefea379d83e316c7',
    messagingSenderId: '288514665926',
    projectId: 'nivio-f6110',
    storageBucket: 'nivio-f6110.firebasestorage.app',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'AIzaSyDLTqG3tjv6MTQd3RZraIdJ4gv0QKNQYE8',
    appId: '1:288514665926:web:65397d466c2710b7e316c7',
    messagingSenderId: '288514665926',
    projectId: 'nivio-f6110',
    authDomain: 'nivio-f6110.firebaseapp.com',
    storageBucket: 'nivio-f6110.firebasestorage.app',
  );
}
</file>

<file path="lib/models/api_source.dart">
import 'package:freezed_annotation/freezed_annotation.dart';

part 'api_source.freezed.dart';
part 'api_source.g.dart';

@freezed
class SubtitleTrack with _$SubtitleTrack {
  const factory SubtitleTrack({
    String? url,
    String? file,
    String? lang,
    String? language,
  }) = _SubtitleTrack;

  factory SubtitleTrack.fromJson(Map<String, dynamic> json) =>
      _$SubtitleTrackFromJson(json);
}

@freezed
class APISource with _$APISource {
  const factory APISource({
    required String url,
    required String quality,
  }) = _APISource;

  factory APISource.fromJson(Map<String, dynamic> json) =>
      _$APISourceFromJson(json);
}

@freezed
class APISourceResults with _$APISourceResults {
  const factory APISourceResults({
    List<APISource>? sources,
    List<SubtitleTrack>? subtitles,
  }) = _APISourceResults;

  factory APISourceResults.fromJson(Map<String, dynamic> json) =>
      _$APISourceResultsFromJson(json);
}
</file>

<file path="lib/models/api_source.freezed.dart">
// coverage:ignore-file
// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'api_source.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

T _$identity<T>(T value) => value;

final _privateConstructorUsedError = UnsupportedError(
  'It seems like you constructed your class using `MyClass._()`. This constructor is only meant to be used by freezed and you are not supposed to need it nor use it.\nPlease check the documentation here for more information: https://github.com/rrousselGit/freezed#adding-getters-and-methods-to-our-models',
);

SubtitleTrack _$SubtitleTrackFromJson(Map<String, dynamic> json) {
  return _SubtitleTrack.fromJson(json);
}

/// @nodoc
mixin _$SubtitleTrack {
  String? get url => throw _privateConstructorUsedError;
  String? get file => throw _privateConstructorUsedError;
  String? get lang => throw _privateConstructorUsedError;
  String? get language => throw _privateConstructorUsedError;

  /// Serializes this SubtitleTrack to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SubtitleTrack
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SubtitleTrackCopyWith<SubtitleTrack> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SubtitleTrackCopyWith<$Res> {
  factory $SubtitleTrackCopyWith(
    SubtitleTrack value,
    $Res Function(SubtitleTrack) then,
  ) = _$SubtitleTrackCopyWithImpl<$Res, SubtitleTrack>;
  @useResult
  $Res call({String? url, String? file, String? lang, String? language});
}

/// @nodoc
class _$SubtitleTrackCopyWithImpl<$Res, $Val extends SubtitleTrack>
    implements $SubtitleTrackCopyWith<$Res> {
  _$SubtitleTrackCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SubtitleTrack
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? url = freezed,
    Object? file = freezed,
    Object? lang = freezed,
    Object? language = freezed,
  }) {
    return _then(
      _value.copyWith(
            url: freezed == url
                ? _value.url
                : url // ignore: cast_nullable_to_non_nullable
                      as String?,
            file: freezed == file
                ? _value.file
                : file // ignore: cast_nullable_to_non_nullable
                      as String?,
            lang: freezed == lang
                ? _value.lang
                : lang // ignore: cast_nullable_to_non_nullable
                      as String?,
            language: freezed == language
                ? _value.language
                : language // ignore: cast_nullable_to_non_nullable
                      as String?,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SubtitleTrackImplCopyWith<$Res>
    implements $SubtitleTrackCopyWith<$Res> {
  factory _$$SubtitleTrackImplCopyWith(
    _$SubtitleTrackImpl value,
    $Res Function(_$SubtitleTrackImpl) then,
  ) = __$$SubtitleTrackImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({String? url, String? file, String? lang, String? language});
}

/// @nodoc
class __$$SubtitleTrackImplCopyWithImpl<$Res>
    extends _$SubtitleTrackCopyWithImpl<$Res, _$SubtitleTrackImpl>
    implements _$$SubtitleTrackImplCopyWith<$Res> {
  __$$SubtitleTrackImplCopyWithImpl(
    _$SubtitleTrackImpl _value,
    $Res Function(_$SubtitleTrackImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SubtitleTrack
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? url = freezed,
    Object? file = freezed,
    Object? lang = freezed,
    Object? language = freezed,
  }) {
    return _then(
      _$SubtitleTrackImpl(
        url: freezed == url
            ? _value.url
            : url // ignore: cast_nullable_to_non_nullable
                  as String?,
        file: freezed == file
            ? _value.file
            : file // ignore: cast_nullable_to_non_nullable
                  as String?,
        lang: freezed == lang
            ? _value.lang
            : lang // ignore: cast_nullable_to_non_nullable
                  as String?,
        language: freezed == language
            ? _value.language
            : language // ignore: cast_nullable_to_non_nullable
                  as String?,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SubtitleTrackImpl implements _SubtitleTrack {
  const _$SubtitleTrackImpl({this.url, this.file, this.lang, this.language});

  factory _$SubtitleTrackImpl.fromJson(Map<String, dynamic> json) =>
      _$$SubtitleTrackImplFromJson(json);

  @override
  final String? url;
  @override
  final String? file;
  @override
  final String? lang;
  @override
  final String? language;

  @override
  String toString() {
    return 'SubtitleTrack(url: $url, file: $file, lang: $lang, language: $language)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SubtitleTrackImpl &&
            (identical(other.url, url) || other.url == url) &&
            (identical(other.file, file) || other.file == file) &&
            (identical(other.lang, lang) || other.lang == lang) &&
            (identical(other.language, language) ||
                other.language == language));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(runtimeType, url, file, lang, language);

  /// Create a copy of SubtitleTrack
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SubtitleTrackImplCopyWith<_$SubtitleTrackImpl> get copyWith =>
      __$$SubtitleTrackImplCopyWithImpl<_$SubtitleTrackImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SubtitleTrackImplToJson(this);
  }
}

abstract class _SubtitleTrack implements SubtitleTrack {
  const factory _SubtitleTrack({
    final String? url,
    final String? file,
    final String? lang,
    final String? language,
  }) = _$SubtitleTrackImpl;

  factory _SubtitleTrack.fromJson(Map<String, dynamic> json) =
      _$SubtitleTrackImpl.fromJson;

  @override
  String? get url;
  @override
  String? get file;
  @override
  String? get lang;
  @override
  String? get language;

  /// Create a copy of SubtitleTrack
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SubtitleTrackImplCopyWith<_$SubtitleTrackImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

APISource _$APISourceFromJson(Map<String, dynamic> json) {
  return _APISource.fromJson(json);
}

/// @nodoc
mixin _$APISource {
  String get url => throw _privateConstructorUsedError;
  String get quality => throw _privateConstructorUsedError;

  /// Serializes this APISource to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of APISource
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $APISourceCopyWith<APISource> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $APISourceCopyWith<$Res> {
  factory $APISourceCopyWith(APISource value, $Res Function(APISource) then) =
      _$APISourceCopyWithImpl<$Res, APISource>;
  @useResult
  $Res call({String url, String quality});
}

/// @nodoc
class _$APISourceCopyWithImpl<$Res, $Val extends APISource>
    implements $APISourceCopyWith<$Res> {
  _$APISourceCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of APISource
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? url = null, Object? quality = null}) {
    return _then(
      _value.copyWith(
            url: null == url
                ? _value.url
                : url // ignore: cast_nullable_to_non_nullable
                      as String,
            quality: null == quality
                ? _value.quality
                : quality // ignore: cast_nullable_to_non_nullable
                      as String,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$APISourceImplCopyWith<$Res>
    implements $APISourceCopyWith<$Res> {
  factory _$$APISourceImplCopyWith(
    _$APISourceImpl value,
    $Res Function(_$APISourceImpl) then,
  ) = __$$APISourceImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({String url, String quality});
}

/// @nodoc
class __$$APISourceImplCopyWithImpl<$Res>
    extends _$APISourceCopyWithImpl<$Res, _$APISourceImpl>
    implements _$$APISourceImplCopyWith<$Res> {
  __$$APISourceImplCopyWithImpl(
    _$APISourceImpl _value,
    $Res Function(_$APISourceImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of APISource
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? url = null, Object? quality = null}) {
    return _then(
      _$APISourceImpl(
        url: null == url
            ? _value.url
            : url // ignore: cast_nullable_to_non_nullable
                  as String,
        quality: null == quality
            ? _value.quality
            : quality // ignore: cast_nullable_to_non_nullable
                  as String,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$APISourceImpl implements _APISource {
  const _$APISourceImpl({required this.url, required this.quality});

  factory _$APISourceImpl.fromJson(Map<String, dynamic> json) =>
      _$$APISourceImplFromJson(json);

  @override
  final String url;
  @override
  final String quality;

  @override
  String toString() {
    return 'APISource(url: $url, quality: $quality)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$APISourceImpl &&
            (identical(other.url, url) || other.url == url) &&
            (identical(other.quality, quality) || other.quality == quality));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(runtimeType, url, quality);

  /// Create a copy of APISource
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$APISourceImplCopyWith<_$APISourceImpl> get copyWith =>
      __$$APISourceImplCopyWithImpl<_$APISourceImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$APISourceImplToJson(this);
  }
}

abstract class _APISource implements APISource {
  const factory _APISource({
    required final String url,
    required final String quality,
  }) = _$APISourceImpl;

  factory _APISource.fromJson(Map<String, dynamic> json) =
      _$APISourceImpl.fromJson;

  @override
  String get url;
  @override
  String get quality;

  /// Create a copy of APISource
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$APISourceImplCopyWith<_$APISourceImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

APISourceResults _$APISourceResultsFromJson(Map<String, dynamic> json) {
  return _APISourceResults.fromJson(json);
}

/// @nodoc
mixin _$APISourceResults {
  List<APISource>? get sources => throw _privateConstructorUsedError;
  List<SubtitleTrack>? get subtitles => throw _privateConstructorUsedError;

  /// Serializes this APISourceResults to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of APISourceResults
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $APISourceResultsCopyWith<APISourceResults> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $APISourceResultsCopyWith<$Res> {
  factory $APISourceResultsCopyWith(
    APISourceResults value,
    $Res Function(APISourceResults) then,
  ) = _$APISourceResultsCopyWithImpl<$Res, APISourceResults>;
  @useResult
  $Res call({List<APISource>? sources, List<SubtitleTrack>? subtitles});
}

/// @nodoc
class _$APISourceResultsCopyWithImpl<$Res, $Val extends APISourceResults>
    implements $APISourceResultsCopyWith<$Res> {
  _$APISourceResultsCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of APISourceResults
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? sources = freezed, Object? subtitles = freezed}) {
    return _then(
      _value.copyWith(
            sources: freezed == sources
                ? _value.sources
                : sources // ignore: cast_nullable_to_non_nullable
                      as List<APISource>?,
            subtitles: freezed == subtitles
                ? _value.subtitles
                : subtitles // ignore: cast_nullable_to_non_nullable
                      as List<SubtitleTrack>?,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$APISourceResultsImplCopyWith<$Res>
    implements $APISourceResultsCopyWith<$Res> {
  factory _$$APISourceResultsImplCopyWith(
    _$APISourceResultsImpl value,
    $Res Function(_$APISourceResultsImpl) then,
  ) = __$$APISourceResultsImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({List<APISource>? sources, List<SubtitleTrack>? subtitles});
}

/// @nodoc
class __$$APISourceResultsImplCopyWithImpl<$Res>
    extends _$APISourceResultsCopyWithImpl<$Res, _$APISourceResultsImpl>
    implements _$$APISourceResultsImplCopyWith<$Res> {
  __$$APISourceResultsImplCopyWithImpl(
    _$APISourceResultsImpl _value,
    $Res Function(_$APISourceResultsImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of APISourceResults
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? sources = freezed, Object? subtitles = freezed}) {
    return _then(
      _$APISourceResultsImpl(
        sources: freezed == sources
            ? _value._sources
            : sources // ignore: cast_nullable_to_non_nullable
                  as List<APISource>?,
        subtitles: freezed == subtitles
            ? _value._subtitles
            : subtitles // ignore: cast_nullable_to_non_nullable
                  as List<SubtitleTrack>?,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$APISourceResultsImpl implements _APISourceResults {
  const _$APISourceResultsImpl({
    final List<APISource>? sources,
    final List<SubtitleTrack>? subtitles,
  }) : _sources = sources,
       _subtitles = subtitles;

  factory _$APISourceResultsImpl.fromJson(Map<String, dynamic> json) =>
      _$$APISourceResultsImplFromJson(json);

  final List<APISource>? _sources;
  @override
  List<APISource>? get sources {
    final value = _sources;
    if (value == null) return null;
    if (_sources is EqualUnmodifiableListView) return _sources;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableListView(value);
  }

  final List<SubtitleTrack>? _subtitles;
  @override
  List<SubtitleTrack>? get subtitles {
    final value = _subtitles;
    if (value == null) return null;
    if (_subtitles is EqualUnmodifiableListView) return _subtitles;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableListView(value);
  }

  @override
  String toString() {
    return 'APISourceResults(sources: $sources, subtitles: $subtitles)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$APISourceResultsImpl &&
            const DeepCollectionEquality().equals(other._sources, _sources) &&
            const DeepCollectionEquality().equals(
              other._subtitles,
              _subtitles,
            ));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    const DeepCollectionEquality().hash(_sources),
    const DeepCollectionEquality().hash(_subtitles),
  );

  /// Create a copy of APISourceResults
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$APISourceResultsImplCopyWith<_$APISourceResultsImpl> get copyWith =>
      __$$APISourceResultsImplCopyWithImpl<_$APISourceResultsImpl>(
        this,
        _$identity,
      );

  @override
  Map<String, dynamic> toJson() {
    return _$$APISourceResultsImplToJson(this);
  }
}

abstract class _APISourceResults implements APISourceResults {
  const factory _APISourceResults({
    final List<APISource>? sources,
    final List<SubtitleTrack>? subtitles,
  }) = _$APISourceResultsImpl;

  factory _APISourceResults.fromJson(Map<String, dynamic> json) =
      _$APISourceResultsImpl.fromJson;

  @override
  List<APISource>? get sources;
  @override
  List<SubtitleTrack>? get subtitles;

  /// Create a copy of APISourceResults
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$APISourceResultsImplCopyWith<_$APISourceResultsImpl> get copyWith =>
      throw _privateConstructorUsedError;
}
</file>

<file path="lib/models/api_source.g.dart">
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'api_source.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_$SubtitleTrackImpl _$$SubtitleTrackImplFromJson(Map<String, dynamic> json) =>
    _$SubtitleTrackImpl(
      url: json['url'] as String?,
      file: json['file'] as String?,
      lang: json['lang'] as String?,
      language: json['language'] as String?,
    );

Map<String, dynamic> _$$SubtitleTrackImplToJson(_$SubtitleTrackImpl instance) =>
    <String, dynamic>{
      'url': instance.url,
      'file': instance.file,
      'lang': instance.lang,
      'language': instance.language,
    };

_$APISourceImpl _$$APISourceImplFromJson(Map<String, dynamic> json) =>
    _$APISourceImpl(
      url: json['url'] as String,
      quality: json['quality'] as String,
    );

Map<String, dynamic> _$$APISourceImplToJson(_$APISourceImpl instance) =>
    <String, dynamic>{'url': instance.url, 'quality': instance.quality};

_$APISourceResultsImpl _$$APISourceResultsImplFromJson(
  Map<String, dynamic> json,
) => _$APISourceResultsImpl(
  sources: (json['sources'] as List<dynamic>?)
      ?.map((e) => APISource.fromJson(e as Map<String, dynamic>))
      .toList(),
  subtitles: (json['subtitles'] as List<dynamic>?)
      ?.map((e) => SubtitleTrack.fromJson(e as Map<String, dynamic>))
      .toList(),
);

Map<String, dynamic> _$$APISourceResultsImplToJson(
  _$APISourceResultsImpl instance,
) => <String, dynamic>{
  'sources': instance.sources,
  'subtitles': instance.subtitles,
};
</file>

<file path="lib/models/search_result.dart">
import 'package:freezed_annotation/freezed_annotation.dart';

part 'search_result.freezed.dart';
part 'search_result.g.dart';

@freezed
class SearchResult with _$SearchResult {
  const factory SearchResult({
    @Default(false) bool adult,
    required int id,
    String? name,
    String? title,
    @JsonKey(name: 'original_language') String? originalLanguage,
    @JsonKey(name: 'media_type') required String mediaType,
    @JsonKey(name: 'release_date') String? releaseDate,
    @JsonKey(name: 'first_air_date') String? firstAirDate,
    @JsonKey(name: 'poster_path') String? posterPath,
    @JsonKey(name: 'backdrop_path') String? backdropPath,
    String? overview,
    @JsonKey(name: 'vote_average') double? voteAverage,
  }) = _SearchResult;

  factory SearchResult.fromJson(Map<String, dynamic> json) =>
      _$SearchResultFromJson(json);
}

@freezed
class SearchResults with _$SearchResults {
  const factory SearchResults({
    required int page,
    required List<SearchResult> results,
    @JsonKey(name: 'total_pages') required int totalPages,
    @JsonKey(name: 'total_results') required int totalResults,
  }) = _SearchResults;

  factory SearchResults.fromJson(Map<String, dynamic> json) =>
      _$SearchResultsFromJson(json);
}
</file>

<file path="lib/models/search_result.freezed.dart">
// coverage:ignore-file
// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'search_result.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

T _$identity<T>(T value) => value;

final _privateConstructorUsedError = UnsupportedError(
  'It seems like you constructed your class using `MyClass._()`. This constructor is only meant to be used by freezed and you are not supposed to need it nor use it.\nPlease check the documentation here for more information: https://github.com/rrousselGit/freezed#adding-getters-and-methods-to-our-models',
);

SearchResult _$SearchResultFromJson(Map<String, dynamic> json) {
  return _SearchResult.fromJson(json);
}

/// @nodoc
mixin _$SearchResult {
  bool get adult => throw _privateConstructorUsedError;
  int get id => throw _privateConstructorUsedError;
  String? get name => throw _privateConstructorUsedError;
  String? get title => throw _privateConstructorUsedError;
  @JsonKey(name: 'original_language')
  String? get originalLanguage => throw _privateConstructorUsedError;
  @JsonKey(name: 'media_type')
  String get mediaType => throw _privateConstructorUsedError;
  @JsonKey(name: 'release_date')
  String? get releaseDate => throw _privateConstructorUsedError;
  @JsonKey(name: 'first_air_date')
  String? get firstAirDate => throw _privateConstructorUsedError;
  @JsonKey(name: 'poster_path')
  String? get posterPath => throw _privateConstructorUsedError;
  @JsonKey(name: 'backdrop_path')
  String? get backdropPath => throw _privateConstructorUsedError;
  String? get overview => throw _privateConstructorUsedError;
  @JsonKey(name: 'vote_average')
  double? get voteAverage => throw _privateConstructorUsedError;

  /// Serializes this SearchResult to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SearchResult
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SearchResultCopyWith<SearchResult> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SearchResultCopyWith<$Res> {
  factory $SearchResultCopyWith(
    SearchResult value,
    $Res Function(SearchResult) then,
  ) = _$SearchResultCopyWithImpl<$Res, SearchResult>;
  @useResult
  $Res call({
    bool adult,
    int id,
    String? name,
    String? title,
    @JsonKey(name: 'original_language') String? originalLanguage,
    @JsonKey(name: 'media_type') String mediaType,
    @JsonKey(name: 'release_date') String? releaseDate,
    @JsonKey(name: 'first_air_date') String? firstAirDate,
    @JsonKey(name: 'poster_path') String? posterPath,
    @JsonKey(name: 'backdrop_path') String? backdropPath,
    String? overview,
    @JsonKey(name: 'vote_average') double? voteAverage,
  });
}

/// @nodoc
class _$SearchResultCopyWithImpl<$Res, $Val extends SearchResult>
    implements $SearchResultCopyWith<$Res> {
  _$SearchResultCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SearchResult
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? adult = null,
    Object? id = null,
    Object? name = freezed,
    Object? title = freezed,
    Object? originalLanguage = freezed,
    Object? mediaType = null,
    Object? releaseDate = freezed,
    Object? firstAirDate = freezed,
    Object? posterPath = freezed,
    Object? backdropPath = freezed,
    Object? overview = freezed,
    Object? voteAverage = freezed,
  }) {
    return _then(
      _value.copyWith(
            adult: null == adult
                ? _value.adult
                : adult // ignore: cast_nullable_to_non_nullable
                      as bool,
            id: null == id
                ? _value.id
                : id // ignore: cast_nullable_to_non_nullable
                      as int,
            name: freezed == name
                ? _value.name
                : name // ignore: cast_nullable_to_non_nullable
                      as String?,
            title: freezed == title
                ? _value.title
                : title // ignore: cast_nullable_to_non_nullable
                      as String?,
            originalLanguage: freezed == originalLanguage
                ? _value.originalLanguage
                : originalLanguage // ignore: cast_nullable_to_non_nullable
                      as String?,
            mediaType: null == mediaType
                ? _value.mediaType
                : mediaType // ignore: cast_nullable_to_non_nullable
                      as String,
            releaseDate: freezed == releaseDate
                ? _value.releaseDate
                : releaseDate // ignore: cast_nullable_to_non_nullable
                      as String?,
            firstAirDate: freezed == firstAirDate
                ? _value.firstAirDate
                : firstAirDate // ignore: cast_nullable_to_non_nullable
                      as String?,
            posterPath: freezed == posterPath
                ? _value.posterPath
                : posterPath // ignore: cast_nullable_to_non_nullable
                      as String?,
            backdropPath: freezed == backdropPath
                ? _value.backdropPath
                : backdropPath // ignore: cast_nullable_to_non_nullable
                      as String?,
            overview: freezed == overview
                ? _value.overview
                : overview // ignore: cast_nullable_to_non_nullable
                      as String?,
            voteAverage: freezed == voteAverage
                ? _value.voteAverage
                : voteAverage // ignore: cast_nullable_to_non_nullable
                      as double?,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SearchResultImplCopyWith<$Res>
    implements $SearchResultCopyWith<$Res> {
  factory _$$SearchResultImplCopyWith(
    _$SearchResultImpl value,
    $Res Function(_$SearchResultImpl) then,
  ) = __$$SearchResultImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    bool adult,
    int id,
    String? name,
    String? title,
    @JsonKey(name: 'original_language') String? originalLanguage,
    @JsonKey(name: 'media_type') String mediaType,
    @JsonKey(name: 'release_date') String? releaseDate,
    @JsonKey(name: 'first_air_date') String? firstAirDate,
    @JsonKey(name: 'poster_path') String? posterPath,
    @JsonKey(name: 'backdrop_path') String? backdropPath,
    String? overview,
    @JsonKey(name: 'vote_average') double? voteAverage,
  });
}

/// @nodoc
class __$$SearchResultImplCopyWithImpl<$Res>
    extends _$SearchResultCopyWithImpl<$Res, _$SearchResultImpl>
    implements _$$SearchResultImplCopyWith<$Res> {
  __$$SearchResultImplCopyWithImpl(
    _$SearchResultImpl _value,
    $Res Function(_$SearchResultImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SearchResult
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? adult = null,
    Object? id = null,
    Object? name = freezed,
    Object? title = freezed,
    Object? originalLanguage = freezed,
    Object? mediaType = null,
    Object? releaseDate = freezed,
    Object? firstAirDate = freezed,
    Object? posterPath = freezed,
    Object? backdropPath = freezed,
    Object? overview = freezed,
    Object? voteAverage = freezed,
  }) {
    return _then(
      _$SearchResultImpl(
        adult: null == adult
            ? _value.adult
            : adult // ignore: cast_nullable_to_non_nullable
                  as bool,
        id: null == id
            ? _value.id
            : id // ignore: cast_nullable_to_non_nullable
                  as int,
        name: freezed == name
            ? _value.name
            : name // ignore: cast_nullable_to_non_nullable
                  as String?,
        title: freezed == title
            ? _value.title
            : title // ignore: cast_nullable_to_non_nullable
                  as String?,
        originalLanguage: freezed == originalLanguage
            ? _value.originalLanguage
            : originalLanguage // ignore: cast_nullable_to_non_nullable
                  as String?,
        mediaType: null == mediaType
            ? _value.mediaType
            : mediaType // ignore: cast_nullable_to_non_nullable
                  as String,
        releaseDate: freezed == releaseDate
            ? _value.releaseDate
            : releaseDate // ignore: cast_nullable_to_non_nullable
                  as String?,
        firstAirDate: freezed == firstAirDate
            ? _value.firstAirDate
            : firstAirDate // ignore: cast_nullable_to_non_nullable
                  as String?,
        posterPath: freezed == posterPath
            ? _value.posterPath
            : posterPath // ignore: cast_nullable_to_non_nullable
                  as String?,
        backdropPath: freezed == backdropPath
            ? _value.backdropPath
            : backdropPath // ignore: cast_nullable_to_non_nullable
                  as String?,
        overview: freezed == overview
            ? _value.overview
            : overview // ignore: cast_nullable_to_non_nullable
                  as String?,
        voteAverage: freezed == voteAverage
            ? _value.voteAverage
            : voteAverage // ignore: cast_nullable_to_non_nullable
                  as double?,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SearchResultImpl implements _SearchResult {
  const _$SearchResultImpl({
    this.adult = false,
    required this.id,
    this.name,
    this.title,
    @JsonKey(name: 'original_language') this.originalLanguage,
    @JsonKey(name: 'media_type') required this.mediaType,
    @JsonKey(name: 'release_date') this.releaseDate,
    @JsonKey(name: 'first_air_date') this.firstAirDate,
    @JsonKey(name: 'poster_path') this.posterPath,
    @JsonKey(name: 'backdrop_path') this.backdropPath,
    this.overview,
    @JsonKey(name: 'vote_average') this.voteAverage,
  });

  factory _$SearchResultImpl.fromJson(Map<String, dynamic> json) =>
      _$$SearchResultImplFromJson(json);

  @override
  @JsonKey()
  final bool adult;
  @override
  final int id;
  @override
  final String? name;
  @override
  final String? title;
  @override
  @JsonKey(name: 'original_language')
  final String? originalLanguage;
  @override
  @JsonKey(name: 'media_type')
  final String mediaType;
  @override
  @JsonKey(name: 'release_date')
  final String? releaseDate;
  @override
  @JsonKey(name: 'first_air_date')
  final String? firstAirDate;
  @override
  @JsonKey(name: 'poster_path')
  final String? posterPath;
  @override
  @JsonKey(name: 'backdrop_path')
  final String? backdropPath;
  @override
  final String? overview;
  @override
  @JsonKey(name: 'vote_average')
  final double? voteAverage;

  @override
  String toString() {
    return 'SearchResult(adult: $adult, id: $id, name: $name, title: $title, originalLanguage: $originalLanguage, mediaType: $mediaType, releaseDate: $releaseDate, firstAirDate: $firstAirDate, posterPath: $posterPath, backdropPath: $backdropPath, overview: $overview, voteAverage: $voteAverage)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SearchResultImpl &&
            (identical(other.adult, adult) || other.adult == adult) &&
            (identical(other.id, id) || other.id == id) &&
            (identical(other.name, name) || other.name == name) &&
            (identical(other.title, title) || other.title == title) &&
            (identical(other.originalLanguage, originalLanguage) ||
                other.originalLanguage == originalLanguage) &&
            (identical(other.mediaType, mediaType) ||
                other.mediaType == mediaType) &&
            (identical(other.releaseDate, releaseDate) ||
                other.releaseDate == releaseDate) &&
            (identical(other.firstAirDate, firstAirDate) ||
                other.firstAirDate == firstAirDate) &&
            (identical(other.posterPath, posterPath) ||
                other.posterPath == posterPath) &&
            (identical(other.backdropPath, backdropPath) ||
                other.backdropPath == backdropPath) &&
            (identical(other.overview, overview) ||
                other.overview == overview) &&
            (identical(other.voteAverage, voteAverage) ||
                other.voteAverage == voteAverage));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    adult,
    id,
    name,
    title,
    originalLanguage,
    mediaType,
    releaseDate,
    firstAirDate,
    posterPath,
    backdropPath,
    overview,
    voteAverage,
  );

  /// Create a copy of SearchResult
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SearchResultImplCopyWith<_$SearchResultImpl> get copyWith =>
      __$$SearchResultImplCopyWithImpl<_$SearchResultImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SearchResultImplToJson(this);
  }
}

abstract class _SearchResult implements SearchResult {
  const factory _SearchResult({
    final bool adult,
    required final int id,
    final String? name,
    final String? title,
    @JsonKey(name: 'original_language') final String? originalLanguage,
    @JsonKey(name: 'media_type') required final String mediaType,
    @JsonKey(name: 'release_date') final String? releaseDate,
    @JsonKey(name: 'first_air_date') final String? firstAirDate,
    @JsonKey(name: 'poster_path') final String? posterPath,
    @JsonKey(name: 'backdrop_path') final String? backdropPath,
    final String? overview,
    @JsonKey(name: 'vote_average') final double? voteAverage,
  }) = _$SearchResultImpl;

  factory _SearchResult.fromJson(Map<String, dynamic> json) =
      _$SearchResultImpl.fromJson;

  @override
  bool get adult;
  @override
  int get id;
  @override
  String? get name;
  @override
  String? get title;
  @override
  @JsonKey(name: 'original_language')
  String? get originalLanguage;
  @override
  @JsonKey(name: 'media_type')
  String get mediaType;
  @override
  @JsonKey(name: 'release_date')
  String? get releaseDate;
  @override
  @JsonKey(name: 'first_air_date')
  String? get firstAirDate;
  @override
  @JsonKey(name: 'poster_path')
  String? get posterPath;
  @override
  @JsonKey(name: 'backdrop_path')
  String? get backdropPath;
  @override
  String? get overview;
  @override
  @JsonKey(name: 'vote_average')
  double? get voteAverage;

  /// Create a copy of SearchResult
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SearchResultImplCopyWith<_$SearchResultImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

SearchResults _$SearchResultsFromJson(Map<String, dynamic> json) {
  return _SearchResults.fromJson(json);
}

/// @nodoc
mixin _$SearchResults {
  int get page => throw _privateConstructorUsedError;
  List<SearchResult> get results => throw _privateConstructorUsedError;
  @JsonKey(name: 'total_pages')
  int get totalPages => throw _privateConstructorUsedError;
  @JsonKey(name: 'total_results')
  int get totalResults => throw _privateConstructorUsedError;

  /// Serializes this SearchResults to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SearchResults
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SearchResultsCopyWith<SearchResults> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SearchResultsCopyWith<$Res> {
  factory $SearchResultsCopyWith(
    SearchResults value,
    $Res Function(SearchResults) then,
  ) = _$SearchResultsCopyWithImpl<$Res, SearchResults>;
  @useResult
  $Res call({
    int page,
    List<SearchResult> results,
    @JsonKey(name: 'total_pages') int totalPages,
    @JsonKey(name: 'total_results') int totalResults,
  });
}

/// @nodoc
class _$SearchResultsCopyWithImpl<$Res, $Val extends SearchResults>
    implements $SearchResultsCopyWith<$Res> {
  _$SearchResultsCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SearchResults
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? page = null,
    Object? results = null,
    Object? totalPages = null,
    Object? totalResults = null,
  }) {
    return _then(
      _value.copyWith(
            page: null == page
                ? _value.page
                : page // ignore: cast_nullable_to_non_nullable
                      as int,
            results: null == results
                ? _value.results
                : results // ignore: cast_nullable_to_non_nullable
                      as List<SearchResult>,
            totalPages: null == totalPages
                ? _value.totalPages
                : totalPages // ignore: cast_nullable_to_non_nullable
                      as int,
            totalResults: null == totalResults
                ? _value.totalResults
                : totalResults // ignore: cast_nullable_to_non_nullable
                      as int,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SearchResultsImplCopyWith<$Res>
    implements $SearchResultsCopyWith<$Res> {
  factory _$$SearchResultsImplCopyWith(
    _$SearchResultsImpl value,
    $Res Function(_$SearchResultsImpl) then,
  ) = __$$SearchResultsImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    int page,
    List<SearchResult> results,
    @JsonKey(name: 'total_pages') int totalPages,
    @JsonKey(name: 'total_results') int totalResults,
  });
}

/// @nodoc
class __$$SearchResultsImplCopyWithImpl<$Res>
    extends _$SearchResultsCopyWithImpl<$Res, _$SearchResultsImpl>
    implements _$$SearchResultsImplCopyWith<$Res> {
  __$$SearchResultsImplCopyWithImpl(
    _$SearchResultsImpl _value,
    $Res Function(_$SearchResultsImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SearchResults
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? page = null,
    Object? results = null,
    Object? totalPages = null,
    Object? totalResults = null,
  }) {
    return _then(
      _$SearchResultsImpl(
        page: null == page
            ? _value.page
            : page // ignore: cast_nullable_to_non_nullable
                  as int,
        results: null == results
            ? _value._results
            : results // ignore: cast_nullable_to_non_nullable
                  as List<SearchResult>,
        totalPages: null == totalPages
            ? _value.totalPages
            : totalPages // ignore: cast_nullable_to_non_nullable
                  as int,
        totalResults: null == totalResults
            ? _value.totalResults
            : totalResults // ignore: cast_nullable_to_non_nullable
                  as int,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SearchResultsImpl implements _SearchResults {
  const _$SearchResultsImpl({
    required this.page,
    required final List<SearchResult> results,
    @JsonKey(name: 'total_pages') required this.totalPages,
    @JsonKey(name: 'total_results') required this.totalResults,
  }) : _results = results;

  factory _$SearchResultsImpl.fromJson(Map<String, dynamic> json) =>
      _$$SearchResultsImplFromJson(json);

  @override
  final int page;
  final List<SearchResult> _results;
  @override
  List<SearchResult> get results {
    if (_results is EqualUnmodifiableListView) return _results;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableListView(_results);
  }

  @override
  @JsonKey(name: 'total_pages')
  final int totalPages;
  @override
  @JsonKey(name: 'total_results')
  final int totalResults;

  @override
  String toString() {
    return 'SearchResults(page: $page, results: $results, totalPages: $totalPages, totalResults: $totalResults)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SearchResultsImpl &&
            (identical(other.page, page) || other.page == page) &&
            const DeepCollectionEquality().equals(other._results, _results) &&
            (identical(other.totalPages, totalPages) ||
                other.totalPages == totalPages) &&
            (identical(other.totalResults, totalResults) ||
                other.totalResults == totalResults));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    page,
    const DeepCollectionEquality().hash(_results),
    totalPages,
    totalResults,
  );

  /// Create a copy of SearchResults
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SearchResultsImplCopyWith<_$SearchResultsImpl> get copyWith =>
      __$$SearchResultsImplCopyWithImpl<_$SearchResultsImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SearchResultsImplToJson(this);
  }
}

abstract class _SearchResults implements SearchResults {
  const factory _SearchResults({
    required final int page,
    required final List<SearchResult> results,
    @JsonKey(name: 'total_pages') required final int totalPages,
    @JsonKey(name: 'total_results') required final int totalResults,
  }) = _$SearchResultsImpl;

  factory _SearchResults.fromJson(Map<String, dynamic> json) =
      _$SearchResultsImpl.fromJson;

  @override
  int get page;
  @override
  List<SearchResult> get results;
  @override
  @JsonKey(name: 'total_pages')
  int get totalPages;
  @override
  @JsonKey(name: 'total_results')
  int get totalResults;

  /// Create a copy of SearchResults
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SearchResultsImplCopyWith<_$SearchResultsImpl> get copyWith =>
      throw _privateConstructorUsedError;
}
</file>

<file path="lib/models/search_result.g.dart">
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'search_result.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_$SearchResultImpl _$$SearchResultImplFromJson(Map<String, dynamic> json) =>
    _$SearchResultImpl(
      adult: json['adult'] as bool? ?? false,
      id: (json['id'] as num).toInt(),
      name: json['name'] as String?,
      title: json['title'] as String?,
      originalLanguage: json['original_language'] as String?,
      mediaType: json['media_type'] as String,
      releaseDate: json['release_date'] as String?,
      firstAirDate: json['first_air_date'] as String?,
      posterPath: json['poster_path'] as String?,
      backdropPath: json['backdrop_path'] as String?,
      overview: json['overview'] as String?,
      voteAverage: (json['vote_average'] as num?)?.toDouble(),
    );

Map<String, dynamic> _$$SearchResultImplToJson(_$SearchResultImpl instance) =>
    <String, dynamic>{
      'adult': instance.adult,
      'id': instance.id,
      'name': instance.name,
      'title': instance.title,
      'original_language': instance.originalLanguage,
      'media_type': instance.mediaType,
      'release_date': instance.releaseDate,
      'first_air_date': instance.firstAirDate,
      'poster_path': instance.posterPath,
      'backdrop_path': instance.backdropPath,
      'overview': instance.overview,
      'vote_average': instance.voteAverage,
    };

_$SearchResultsImpl _$$SearchResultsImplFromJson(Map<String, dynamic> json) =>
    _$SearchResultsImpl(
      page: (json['page'] as num).toInt(),
      results: (json['results'] as List<dynamic>)
          .map((e) => SearchResult.fromJson(e as Map<String, dynamic>))
          .toList(),
      totalPages: (json['total_pages'] as num).toInt(),
      totalResults: (json['total_results'] as num).toInt(),
    );

Map<String, dynamic> _$$SearchResultsImplToJson(_$SearchResultsImpl instance) =>
    <String, dynamic>{
      'page': instance.page,
      'results': instance.results,
      'total_pages': instance.totalPages,
      'total_results': instance.totalResults,
    };
</file>

<file path="lib/models/season_info.dart">
import 'package:freezed_annotation/freezed_annotation.dart';

part 'season_info.freezed.dart';
part 'season_info.g.dart';

@freezed
class EpisodeData with _$EpisodeData {
  const factory EpisodeData({
    @JsonKey(name: 'episode_number') required int episodeNumber,
    @JsonKey(name: 'name') String? episodeName,
    String? overview,
    @JsonKey(name: 'still_path') String? stillPath,
    @JsonKey(name: 'vote_average') double? voteAverage,
    @JsonKey(name: 'runtime') int? runtime,
    @JsonKey(name: 'air_date') String? airDate,
  }) = _EpisodeData;

  factory EpisodeData.fromJson(Map<String, dynamic> json) =>
      _$EpisodeDataFromJson(json);
}

@freezed
class SeasonData with _$SeasonData {
  const factory SeasonData({
    required List<EpisodeData> episodes,
  }) = _SeasonData;

  factory SeasonData.fromJson(Map<String, dynamic> json) =>
      _$SeasonDataFromJson(json);
}

@freezed
class SeasonInfo with _$SeasonInfo {
  const factory SeasonInfo({
    @JsonKey(name: 'episode_count') required int episodeCount,
    required int id,
    required String name,
    @JsonKey(name: 'season_number') required int seasonNumber,
    @JsonKey(name: 'air_date') String? airDate,
    @JsonKey(name: 'poster_path') String? posterPath,
  }) = _SeasonInfo;

  factory SeasonInfo.fromJson(Map<String, dynamic> json) =>
      _$SeasonInfoFromJson(json);
}

@freezed
class SeriesInfo with _$SeriesInfo {
  const factory SeriesInfo({
    @JsonKey(name: 'number_of_seasons') required int numberOfSeasons,
    required List<SeasonInfo> seasons,
  }) = _SeriesInfo;

  factory SeriesInfo.fromJson(Map<String, dynamic> json) =>
      _$SeriesInfoFromJson(json);
}
</file>

<file path="lib/models/season_info.freezed.dart">
// coverage:ignore-file
// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'season_info.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

T _$identity<T>(T value) => value;

final _privateConstructorUsedError = UnsupportedError(
  'It seems like you constructed your class using `MyClass._()`. This constructor is only meant to be used by freezed and you are not supposed to need it nor use it.\nPlease check the documentation here for more information: https://github.com/rrousselGit/freezed#adding-getters-and-methods-to-our-models',
);

EpisodeData _$EpisodeDataFromJson(Map<String, dynamic> json) {
  return _EpisodeData.fromJson(json);
}

/// @nodoc
mixin _$EpisodeData {
  @JsonKey(name: 'episode_number')
  int get episodeNumber => throw _privateConstructorUsedError;
  @JsonKey(name: 'name')
  String? get episodeName => throw _privateConstructorUsedError;
  String? get overview => throw _privateConstructorUsedError;
  @JsonKey(name: 'still_path')
  String? get stillPath => throw _privateConstructorUsedError;
  @JsonKey(name: 'vote_average')
  double? get voteAverage => throw _privateConstructorUsedError;
  @JsonKey(name: 'runtime')
  int? get runtime => throw _privateConstructorUsedError;
  @JsonKey(name: 'air_date')
  String? get airDate => throw _privateConstructorUsedError;

  /// Serializes this EpisodeData to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of EpisodeData
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $EpisodeDataCopyWith<EpisodeData> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $EpisodeDataCopyWith<$Res> {
  factory $EpisodeDataCopyWith(
    EpisodeData value,
    $Res Function(EpisodeData) then,
  ) = _$EpisodeDataCopyWithImpl<$Res, EpisodeData>;
  @useResult
  $Res call({
    @JsonKey(name: 'episode_number') int episodeNumber,
    @JsonKey(name: 'name') String? episodeName,
    String? overview,
    @JsonKey(name: 'still_path') String? stillPath,
    @JsonKey(name: 'vote_average') double? voteAverage,
    @JsonKey(name: 'runtime') int? runtime,
    @JsonKey(name: 'air_date') String? airDate,
  });
}

/// @nodoc
class _$EpisodeDataCopyWithImpl<$Res, $Val extends EpisodeData>
    implements $EpisodeDataCopyWith<$Res> {
  _$EpisodeDataCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of EpisodeData
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? episodeNumber = null,
    Object? episodeName = freezed,
    Object? overview = freezed,
    Object? stillPath = freezed,
    Object? voteAverage = freezed,
    Object? runtime = freezed,
    Object? airDate = freezed,
  }) {
    return _then(
      _value.copyWith(
            episodeNumber: null == episodeNumber
                ? _value.episodeNumber
                : episodeNumber // ignore: cast_nullable_to_non_nullable
                      as int,
            episodeName: freezed == episodeName
                ? _value.episodeName
                : episodeName // ignore: cast_nullable_to_non_nullable
                      as String?,
            overview: freezed == overview
                ? _value.overview
                : overview // ignore: cast_nullable_to_non_nullable
                      as String?,
            stillPath: freezed == stillPath
                ? _value.stillPath
                : stillPath // ignore: cast_nullable_to_non_nullable
                      as String?,
            voteAverage: freezed == voteAverage
                ? _value.voteAverage
                : voteAverage // ignore: cast_nullable_to_non_nullable
                      as double?,
            runtime: freezed == runtime
                ? _value.runtime
                : runtime // ignore: cast_nullable_to_non_nullable
                      as int?,
            airDate: freezed == airDate
                ? _value.airDate
                : airDate // ignore: cast_nullable_to_non_nullable
                      as String?,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$EpisodeDataImplCopyWith<$Res>
    implements $EpisodeDataCopyWith<$Res> {
  factory _$$EpisodeDataImplCopyWith(
    _$EpisodeDataImpl value,
    $Res Function(_$EpisodeDataImpl) then,
  ) = __$$EpisodeDataImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    @JsonKey(name: 'episode_number') int episodeNumber,
    @JsonKey(name: 'name') String? episodeName,
    String? overview,
    @JsonKey(name: 'still_path') String? stillPath,
    @JsonKey(name: 'vote_average') double? voteAverage,
    @JsonKey(name: 'runtime') int? runtime,
    @JsonKey(name: 'air_date') String? airDate,
  });
}

/// @nodoc
class __$$EpisodeDataImplCopyWithImpl<$Res>
    extends _$EpisodeDataCopyWithImpl<$Res, _$EpisodeDataImpl>
    implements _$$EpisodeDataImplCopyWith<$Res> {
  __$$EpisodeDataImplCopyWithImpl(
    _$EpisodeDataImpl _value,
    $Res Function(_$EpisodeDataImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of EpisodeData
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? episodeNumber = null,
    Object? episodeName = freezed,
    Object? overview = freezed,
    Object? stillPath = freezed,
    Object? voteAverage = freezed,
    Object? runtime = freezed,
    Object? airDate = freezed,
  }) {
    return _then(
      _$EpisodeDataImpl(
        episodeNumber: null == episodeNumber
            ? _value.episodeNumber
            : episodeNumber // ignore: cast_nullable_to_non_nullable
                  as int,
        episodeName: freezed == episodeName
            ? _value.episodeName
            : episodeName // ignore: cast_nullable_to_non_nullable
                  as String?,
        overview: freezed == overview
            ? _value.overview
            : overview // ignore: cast_nullable_to_non_nullable
                  as String?,
        stillPath: freezed == stillPath
            ? _value.stillPath
            : stillPath // ignore: cast_nullable_to_non_nullable
                  as String?,
        voteAverage: freezed == voteAverage
            ? _value.voteAverage
            : voteAverage // ignore: cast_nullable_to_non_nullable
                  as double?,
        runtime: freezed == runtime
            ? _value.runtime
            : runtime // ignore: cast_nullable_to_non_nullable
                  as int?,
        airDate: freezed == airDate
            ? _value.airDate
            : airDate // ignore: cast_nullable_to_non_nullable
                  as String?,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$EpisodeDataImpl implements _EpisodeData {
  const _$EpisodeDataImpl({
    @JsonKey(name: 'episode_number') required this.episodeNumber,
    @JsonKey(name: 'name') this.episodeName,
    this.overview,
    @JsonKey(name: 'still_path') this.stillPath,
    @JsonKey(name: 'vote_average') this.voteAverage,
    @JsonKey(name: 'runtime') this.runtime,
    @JsonKey(name: 'air_date') this.airDate,
  });

  factory _$EpisodeDataImpl.fromJson(Map<String, dynamic> json) =>
      _$$EpisodeDataImplFromJson(json);

  @override
  @JsonKey(name: 'episode_number')
  final int episodeNumber;
  @override
  @JsonKey(name: 'name')
  final String? episodeName;
  @override
  final String? overview;
  @override
  @JsonKey(name: 'still_path')
  final String? stillPath;
  @override
  @JsonKey(name: 'vote_average')
  final double? voteAverage;
  @override
  @JsonKey(name: 'runtime')
  final int? runtime;
  @override
  @JsonKey(name: 'air_date')
  final String? airDate;

  @override
  String toString() {
    return 'EpisodeData(episodeNumber: $episodeNumber, episodeName: $episodeName, overview: $overview, stillPath: $stillPath, voteAverage: $voteAverage, runtime: $runtime, airDate: $airDate)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$EpisodeDataImpl &&
            (identical(other.episodeNumber, episodeNumber) ||
                other.episodeNumber == episodeNumber) &&
            (identical(other.episodeName, episodeName) ||
                other.episodeName == episodeName) &&
            (identical(other.overview, overview) ||
                other.overview == overview) &&
            (identical(other.stillPath, stillPath) ||
                other.stillPath == stillPath) &&
            (identical(other.voteAverage, voteAverage) ||
                other.voteAverage == voteAverage) &&
            (identical(other.runtime, runtime) || other.runtime == runtime) &&
            (identical(other.airDate, airDate) || other.airDate == airDate));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    episodeNumber,
    episodeName,
    overview,
    stillPath,
    voteAverage,
    runtime,
    airDate,
  );

  /// Create a copy of EpisodeData
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$EpisodeDataImplCopyWith<_$EpisodeDataImpl> get copyWith =>
      __$$EpisodeDataImplCopyWithImpl<_$EpisodeDataImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$EpisodeDataImplToJson(this);
  }
}

abstract class _EpisodeData implements EpisodeData {
  const factory _EpisodeData({
    @JsonKey(name: 'episode_number') required final int episodeNumber,
    @JsonKey(name: 'name') final String? episodeName,
    final String? overview,
    @JsonKey(name: 'still_path') final String? stillPath,
    @JsonKey(name: 'vote_average') final double? voteAverage,
    @JsonKey(name: 'runtime') final int? runtime,
    @JsonKey(name: 'air_date') final String? airDate,
  }) = _$EpisodeDataImpl;

  factory _EpisodeData.fromJson(Map<String, dynamic> json) =
      _$EpisodeDataImpl.fromJson;

  @override
  @JsonKey(name: 'episode_number')
  int get episodeNumber;
  @override
  @JsonKey(name: 'name')
  String? get episodeName;
  @override
  String? get overview;
  @override
  @JsonKey(name: 'still_path')
  String? get stillPath;
  @override
  @JsonKey(name: 'vote_average')
  double? get voteAverage;
  @override
  @JsonKey(name: 'runtime')
  int? get runtime;
  @override
  @JsonKey(name: 'air_date')
  String? get airDate;

  /// Create a copy of EpisodeData
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$EpisodeDataImplCopyWith<_$EpisodeDataImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

SeasonData _$SeasonDataFromJson(Map<String, dynamic> json) {
  return _SeasonData.fromJson(json);
}

/// @nodoc
mixin _$SeasonData {
  List<EpisodeData> get episodes => throw _privateConstructorUsedError;

  /// Serializes this SeasonData to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SeasonData
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SeasonDataCopyWith<SeasonData> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SeasonDataCopyWith<$Res> {
  factory $SeasonDataCopyWith(
    SeasonData value,
    $Res Function(SeasonData) then,
  ) = _$SeasonDataCopyWithImpl<$Res, SeasonData>;
  @useResult
  $Res call({List<EpisodeData> episodes});
}

/// @nodoc
class _$SeasonDataCopyWithImpl<$Res, $Val extends SeasonData>
    implements $SeasonDataCopyWith<$Res> {
  _$SeasonDataCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SeasonData
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? episodes = null}) {
    return _then(
      _value.copyWith(
            episodes: null == episodes
                ? _value.episodes
                : episodes // ignore: cast_nullable_to_non_nullable
                      as List<EpisodeData>,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SeasonDataImplCopyWith<$Res>
    implements $SeasonDataCopyWith<$Res> {
  factory _$$SeasonDataImplCopyWith(
    _$SeasonDataImpl value,
    $Res Function(_$SeasonDataImpl) then,
  ) = __$$SeasonDataImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({List<EpisodeData> episodes});
}

/// @nodoc
class __$$SeasonDataImplCopyWithImpl<$Res>
    extends _$SeasonDataCopyWithImpl<$Res, _$SeasonDataImpl>
    implements _$$SeasonDataImplCopyWith<$Res> {
  __$$SeasonDataImplCopyWithImpl(
    _$SeasonDataImpl _value,
    $Res Function(_$SeasonDataImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SeasonData
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? episodes = null}) {
    return _then(
      _$SeasonDataImpl(
        episodes: null == episodes
            ? _value._episodes
            : episodes // ignore: cast_nullable_to_non_nullable
                  as List<EpisodeData>,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SeasonDataImpl implements _SeasonData {
  const _$SeasonDataImpl({required final List<EpisodeData> episodes})
    : _episodes = episodes;

  factory _$SeasonDataImpl.fromJson(Map<String, dynamic> json) =>
      _$$SeasonDataImplFromJson(json);

  final List<EpisodeData> _episodes;
  @override
  List<EpisodeData> get episodes {
    if (_episodes is EqualUnmodifiableListView) return _episodes;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableListView(_episodes);
  }

  @override
  String toString() {
    return 'SeasonData(episodes: $episodes)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SeasonDataImpl &&
            const DeepCollectionEquality().equals(other._episodes, _episodes));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode =>
      Object.hash(runtimeType, const DeepCollectionEquality().hash(_episodes));

  /// Create a copy of SeasonData
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SeasonDataImplCopyWith<_$SeasonDataImpl> get copyWith =>
      __$$SeasonDataImplCopyWithImpl<_$SeasonDataImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SeasonDataImplToJson(this);
  }
}

abstract class _SeasonData implements SeasonData {
  const factory _SeasonData({required final List<EpisodeData> episodes}) =
      _$SeasonDataImpl;

  factory _SeasonData.fromJson(Map<String, dynamic> json) =
      _$SeasonDataImpl.fromJson;

  @override
  List<EpisodeData> get episodes;

  /// Create a copy of SeasonData
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SeasonDataImplCopyWith<_$SeasonDataImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

SeasonInfo _$SeasonInfoFromJson(Map<String, dynamic> json) {
  return _SeasonInfo.fromJson(json);
}

/// @nodoc
mixin _$SeasonInfo {
  @JsonKey(name: 'episode_count')
  int get episodeCount => throw _privateConstructorUsedError;
  int get id => throw _privateConstructorUsedError;
  String get name => throw _privateConstructorUsedError;
  @JsonKey(name: 'season_number')
  int get seasonNumber => throw _privateConstructorUsedError;
  @JsonKey(name: 'air_date')
  String? get airDate => throw _privateConstructorUsedError;
  @JsonKey(name: 'poster_path')
  String? get posterPath => throw _privateConstructorUsedError;

  /// Serializes this SeasonInfo to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SeasonInfo
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SeasonInfoCopyWith<SeasonInfo> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SeasonInfoCopyWith<$Res> {
  factory $SeasonInfoCopyWith(
    SeasonInfo value,
    $Res Function(SeasonInfo) then,
  ) = _$SeasonInfoCopyWithImpl<$Res, SeasonInfo>;
  @useResult
  $Res call({
    @JsonKey(name: 'episode_count') int episodeCount,
    int id,
    String name,
    @JsonKey(name: 'season_number') int seasonNumber,
    @JsonKey(name: 'air_date') String? airDate,
    @JsonKey(name: 'poster_path') String? posterPath,
  });
}

/// @nodoc
class _$SeasonInfoCopyWithImpl<$Res, $Val extends SeasonInfo>
    implements $SeasonInfoCopyWith<$Res> {
  _$SeasonInfoCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SeasonInfo
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? episodeCount = null,
    Object? id = null,
    Object? name = null,
    Object? seasonNumber = null,
    Object? airDate = freezed,
    Object? posterPath = freezed,
  }) {
    return _then(
      _value.copyWith(
            episodeCount: null == episodeCount
                ? _value.episodeCount
                : episodeCount // ignore: cast_nullable_to_non_nullable
                      as int,
            id: null == id
                ? _value.id
                : id // ignore: cast_nullable_to_non_nullable
                      as int,
            name: null == name
                ? _value.name
                : name // ignore: cast_nullable_to_non_nullable
                      as String,
            seasonNumber: null == seasonNumber
                ? _value.seasonNumber
                : seasonNumber // ignore: cast_nullable_to_non_nullable
                      as int,
            airDate: freezed == airDate
                ? _value.airDate
                : airDate // ignore: cast_nullable_to_non_nullable
                      as String?,
            posterPath: freezed == posterPath
                ? _value.posterPath
                : posterPath // ignore: cast_nullable_to_non_nullable
                      as String?,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SeasonInfoImplCopyWith<$Res>
    implements $SeasonInfoCopyWith<$Res> {
  factory _$$SeasonInfoImplCopyWith(
    _$SeasonInfoImpl value,
    $Res Function(_$SeasonInfoImpl) then,
  ) = __$$SeasonInfoImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    @JsonKey(name: 'episode_count') int episodeCount,
    int id,
    String name,
    @JsonKey(name: 'season_number') int seasonNumber,
    @JsonKey(name: 'air_date') String? airDate,
    @JsonKey(name: 'poster_path') String? posterPath,
  });
}

/// @nodoc
class __$$SeasonInfoImplCopyWithImpl<$Res>
    extends _$SeasonInfoCopyWithImpl<$Res, _$SeasonInfoImpl>
    implements _$$SeasonInfoImplCopyWith<$Res> {
  __$$SeasonInfoImplCopyWithImpl(
    _$SeasonInfoImpl _value,
    $Res Function(_$SeasonInfoImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SeasonInfo
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? episodeCount = null,
    Object? id = null,
    Object? name = null,
    Object? seasonNumber = null,
    Object? airDate = freezed,
    Object? posterPath = freezed,
  }) {
    return _then(
      _$SeasonInfoImpl(
        episodeCount: null == episodeCount
            ? _value.episodeCount
            : episodeCount // ignore: cast_nullable_to_non_nullable
                  as int,
        id: null == id
            ? _value.id
            : id // ignore: cast_nullable_to_non_nullable
                  as int,
        name: null == name
            ? _value.name
            : name // ignore: cast_nullable_to_non_nullable
                  as String,
        seasonNumber: null == seasonNumber
            ? _value.seasonNumber
            : seasonNumber // ignore: cast_nullable_to_non_nullable
                  as int,
        airDate: freezed == airDate
            ? _value.airDate
            : airDate // ignore: cast_nullable_to_non_nullable
                  as String?,
        posterPath: freezed == posterPath
            ? _value.posterPath
            : posterPath // ignore: cast_nullable_to_non_nullable
                  as String?,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SeasonInfoImpl implements _SeasonInfo {
  const _$SeasonInfoImpl({
    @JsonKey(name: 'episode_count') required this.episodeCount,
    required this.id,
    required this.name,
    @JsonKey(name: 'season_number') required this.seasonNumber,
    @JsonKey(name: 'air_date') this.airDate,
    @JsonKey(name: 'poster_path') this.posterPath,
  });

  factory _$SeasonInfoImpl.fromJson(Map<String, dynamic> json) =>
      _$$SeasonInfoImplFromJson(json);

  @override
  @JsonKey(name: 'episode_count')
  final int episodeCount;
  @override
  final int id;
  @override
  final String name;
  @override
  @JsonKey(name: 'season_number')
  final int seasonNumber;
  @override
  @JsonKey(name: 'air_date')
  final String? airDate;
  @override
  @JsonKey(name: 'poster_path')
  final String? posterPath;

  @override
  String toString() {
    return 'SeasonInfo(episodeCount: $episodeCount, id: $id, name: $name, seasonNumber: $seasonNumber, airDate: $airDate, posterPath: $posterPath)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SeasonInfoImpl &&
            (identical(other.episodeCount, episodeCount) ||
                other.episodeCount == episodeCount) &&
            (identical(other.id, id) || other.id == id) &&
            (identical(other.name, name) || other.name == name) &&
            (identical(other.seasonNumber, seasonNumber) ||
                other.seasonNumber == seasonNumber) &&
            (identical(other.airDate, airDate) || other.airDate == airDate) &&
            (identical(other.posterPath, posterPath) ||
                other.posterPath == posterPath));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    episodeCount,
    id,
    name,
    seasonNumber,
    airDate,
    posterPath,
  );

  /// Create a copy of SeasonInfo
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SeasonInfoImplCopyWith<_$SeasonInfoImpl> get copyWith =>
      __$$SeasonInfoImplCopyWithImpl<_$SeasonInfoImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SeasonInfoImplToJson(this);
  }
}

abstract class _SeasonInfo implements SeasonInfo {
  const factory _SeasonInfo({
    @JsonKey(name: 'episode_count') required final int episodeCount,
    required final int id,
    required final String name,
    @JsonKey(name: 'season_number') required final int seasonNumber,
    @JsonKey(name: 'air_date') final String? airDate,
    @JsonKey(name: 'poster_path') final String? posterPath,
  }) = _$SeasonInfoImpl;

  factory _SeasonInfo.fromJson(Map<String, dynamic> json) =
      _$SeasonInfoImpl.fromJson;

  @override
  @JsonKey(name: 'episode_count')
  int get episodeCount;
  @override
  int get id;
  @override
  String get name;
  @override
  @JsonKey(name: 'season_number')
  int get seasonNumber;
  @override
  @JsonKey(name: 'air_date')
  String? get airDate;
  @override
  @JsonKey(name: 'poster_path')
  String? get posterPath;

  /// Create a copy of SeasonInfo
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SeasonInfoImplCopyWith<_$SeasonInfoImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

SeriesInfo _$SeriesInfoFromJson(Map<String, dynamic> json) {
  return _SeriesInfo.fromJson(json);
}

/// @nodoc
mixin _$SeriesInfo {
  @JsonKey(name: 'number_of_seasons')
  int get numberOfSeasons => throw _privateConstructorUsedError;
  List<SeasonInfo> get seasons => throw _privateConstructorUsedError;

  /// Serializes this SeriesInfo to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of SeriesInfo
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $SeriesInfoCopyWith<SeriesInfo> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $SeriesInfoCopyWith<$Res> {
  factory $SeriesInfoCopyWith(
    SeriesInfo value,
    $Res Function(SeriesInfo) then,
  ) = _$SeriesInfoCopyWithImpl<$Res, SeriesInfo>;
  @useResult
  $Res call({
    @JsonKey(name: 'number_of_seasons') int numberOfSeasons,
    List<SeasonInfo> seasons,
  });
}

/// @nodoc
class _$SeriesInfoCopyWithImpl<$Res, $Val extends SeriesInfo>
    implements $SeriesInfoCopyWith<$Res> {
  _$SeriesInfoCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of SeriesInfo
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? numberOfSeasons = null, Object? seasons = null}) {
    return _then(
      _value.copyWith(
            numberOfSeasons: null == numberOfSeasons
                ? _value.numberOfSeasons
                : numberOfSeasons // ignore: cast_nullable_to_non_nullable
                      as int,
            seasons: null == seasons
                ? _value.seasons
                : seasons // ignore: cast_nullable_to_non_nullable
                      as List<SeasonInfo>,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$SeriesInfoImplCopyWith<$Res>
    implements $SeriesInfoCopyWith<$Res> {
  factory _$$SeriesInfoImplCopyWith(
    _$SeriesInfoImpl value,
    $Res Function(_$SeriesInfoImpl) then,
  ) = __$$SeriesInfoImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    @JsonKey(name: 'number_of_seasons') int numberOfSeasons,
    List<SeasonInfo> seasons,
  });
}

/// @nodoc
class __$$SeriesInfoImplCopyWithImpl<$Res>
    extends _$SeriesInfoCopyWithImpl<$Res, _$SeriesInfoImpl>
    implements _$$SeriesInfoImplCopyWith<$Res> {
  __$$SeriesInfoImplCopyWithImpl(
    _$SeriesInfoImpl _value,
    $Res Function(_$SeriesInfoImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of SeriesInfo
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({Object? numberOfSeasons = null, Object? seasons = null}) {
    return _then(
      _$SeriesInfoImpl(
        numberOfSeasons: null == numberOfSeasons
            ? _value.numberOfSeasons
            : numberOfSeasons // ignore: cast_nullable_to_non_nullable
                  as int,
        seasons: null == seasons
            ? _value._seasons
            : seasons // ignore: cast_nullable_to_non_nullable
                  as List<SeasonInfo>,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$SeriesInfoImpl implements _SeriesInfo {
  const _$SeriesInfoImpl({
    @JsonKey(name: 'number_of_seasons') required this.numberOfSeasons,
    required final List<SeasonInfo> seasons,
  }) : _seasons = seasons;

  factory _$SeriesInfoImpl.fromJson(Map<String, dynamic> json) =>
      _$$SeriesInfoImplFromJson(json);

  @override
  @JsonKey(name: 'number_of_seasons')
  final int numberOfSeasons;
  final List<SeasonInfo> _seasons;
  @override
  List<SeasonInfo> get seasons {
    if (_seasons is EqualUnmodifiableListView) return _seasons;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableListView(_seasons);
  }

  @override
  String toString() {
    return 'SeriesInfo(numberOfSeasons: $numberOfSeasons, seasons: $seasons)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$SeriesInfoImpl &&
            (identical(other.numberOfSeasons, numberOfSeasons) ||
                other.numberOfSeasons == numberOfSeasons) &&
            const DeepCollectionEquality().equals(other._seasons, _seasons));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    numberOfSeasons,
    const DeepCollectionEquality().hash(_seasons),
  );

  /// Create a copy of SeriesInfo
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$SeriesInfoImplCopyWith<_$SeriesInfoImpl> get copyWith =>
      __$$SeriesInfoImplCopyWithImpl<_$SeriesInfoImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$SeriesInfoImplToJson(this);
  }
}

abstract class _SeriesInfo implements SeriesInfo {
  const factory _SeriesInfo({
    @JsonKey(name: 'number_of_seasons') required final int numberOfSeasons,
    required final List<SeasonInfo> seasons,
  }) = _$SeriesInfoImpl;

  factory _SeriesInfo.fromJson(Map<String, dynamic> json) =
      _$SeriesInfoImpl.fromJson;

  @override
  @JsonKey(name: 'number_of_seasons')
  int get numberOfSeasons;
  @override
  List<SeasonInfo> get seasons;

  /// Create a copy of SeriesInfo
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$SeriesInfoImplCopyWith<_$SeriesInfoImpl> get copyWith =>
      throw _privateConstructorUsedError;
}
</file>

<file path="lib/models/season_info.g.dart">
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'season_info.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_$EpisodeDataImpl _$$EpisodeDataImplFromJson(Map<String, dynamic> json) =>
    _$EpisodeDataImpl(
      episodeNumber: (json['episode_number'] as num).toInt(),
      episodeName: json['name'] as String?,
      overview: json['overview'] as String?,
      stillPath: json['still_path'] as String?,
      voteAverage: (json['vote_average'] as num?)?.toDouble(),
      runtime: (json['runtime'] as num?)?.toInt(),
      airDate: json['air_date'] as String?,
    );

Map<String, dynamic> _$$EpisodeDataImplToJson(_$EpisodeDataImpl instance) =>
    <String, dynamic>{
      'episode_number': instance.episodeNumber,
      'name': instance.episodeName,
      'overview': instance.overview,
      'still_path': instance.stillPath,
      'vote_average': instance.voteAverage,
      'runtime': instance.runtime,
      'air_date': instance.airDate,
    };

_$SeasonDataImpl _$$SeasonDataImplFromJson(Map<String, dynamic> json) =>
    _$SeasonDataImpl(
      episodes: (json['episodes'] as List<dynamic>)
          .map((e) => EpisodeData.fromJson(e as Map<String, dynamic>))
          .toList(),
    );

Map<String, dynamic> _$$SeasonDataImplToJson(_$SeasonDataImpl instance) =>
    <String, dynamic>{'episodes': instance.episodes};

_$SeasonInfoImpl _$$SeasonInfoImplFromJson(Map<String, dynamic> json) =>
    _$SeasonInfoImpl(
      episodeCount: (json['episode_count'] as num).toInt(),
      id: (json['id'] as num).toInt(),
      name: json['name'] as String,
      seasonNumber: (json['season_number'] as num).toInt(),
      airDate: json['air_date'] as String?,
      posterPath: json['poster_path'] as String?,
    );

Map<String, dynamic> _$$SeasonInfoImplToJson(_$SeasonInfoImpl instance) =>
    <String, dynamic>{
      'episode_count': instance.episodeCount,
      'id': instance.id,
      'name': instance.name,
      'season_number': instance.seasonNumber,
      'air_date': instance.airDate,
      'poster_path': instance.posterPath,
    };

_$SeriesInfoImpl _$$SeriesInfoImplFromJson(Map<String, dynamic> json) =>
    _$SeriesInfoImpl(
      numberOfSeasons: (json['number_of_seasons'] as num).toInt(),
      seasons: (json['seasons'] as List<dynamic>)
          .map((e) => SeasonInfo.fromJson(e as Map<String, dynamic>))
          .toList(),
    );

Map<String, dynamic> _$$SeriesInfoImplToJson(_$SeriesInfoImpl instance) =>
    <String, dynamic>{
      'number_of_seasons': instance.numberOfSeasons,
      'seasons': instance.seasons,
    };
</file>

<file path="lib/models/stream_result.dart">
class StreamResult {
  final String url;
  final String quality;
  final String provider;
  final List<dynamic> subtitles;
  final List<String> availableQualities;

  StreamResult({
    required this.url,
    required this.quality,
    required this.provider,
    required this.subtitles,
    required this.availableQualities,
  });
}
</file>

<file path="lib/models/watch_history.dart">
import 'package:freezed_annotation/freezed_annotation.dart';

part 'watch_history.freezed.dart';
part 'watch_history.g.dart';

@freezed
class WatchHistory with _$WatchHistory {
  const factory WatchHistory({
    required String id,
    required int tmdbId,
    required String mediaType,
    required String title,
    String? posterPath,
    required int currentSeason,
    required int currentEpisode,
    required int totalSeasons,
    int? totalEpisodes,
    required int lastPositionSeconds,
    required int totalDurationSeconds,
    required double progressPercent,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson) required DateTime lastWatchedAt,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson) required DateTime createdAt,
    required bool isCompleted,
    @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson) @Default({}) Map<String, EpisodeProgress> episodes,
  }) = _WatchHistory;

  factory WatchHistory.fromJson(Map<String, dynamic> json) =>
      _$WatchHistoryFromJson(json);
}

@freezed
class EpisodeProgress with _$EpisodeProgress {
  const factory EpisodeProgress({
    required int season,
    required int episode,
    required int lastPositionSeconds,
    required int totalDurationSeconds,
    required bool isCompleted,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson) required DateTime watchedAt,
  }) = _EpisodeProgress;

  factory EpisodeProgress.fromJson(Map<String, dynamic> json) =>
      _$EpisodeProgressFromJson(json);
}

// Firestore timestamp helpers
DateTime _dateTimeFromJson(dynamic timestamp) {
  if (timestamp is int) {
    return DateTime.fromMillisecondsSinceEpoch(timestamp);
  } else if (timestamp is Map) {
    // Firestore Timestamp format
    return DateTime.fromMillisecondsSinceEpoch(
      (timestamp['_seconds'] as int) * 1000 +
          (timestamp['_nanoseconds'] as int) ~/ 1000000,
    );
  }
  return DateTime.parse(timestamp.toString());
}

int _dateTimeToJson(DateTime dateTime) {
  return dateTime.millisecondsSinceEpoch;
}

// Episodes map converters
Map<String, EpisodeProgress> _episodesFromJson(dynamic json) {
  if (json == null || json is! Map) return {};
  
  final result = <String, EpisodeProgress>{};
  (json as Map).forEach((key, value) {
    if (value is Map<String, dynamic>) {
      result[key.toString()] = EpisodeProgress.fromJson(value);
    }
  });
  return result;
}

Map<String, dynamic> _episodesToJson(Map<String, EpisodeProgress> episodes) {
  final result = <String, dynamic>{};
  episodes.forEach((key, value) {
    result[key] = value.toJson();
  });
  return result;
}
</file>

<file path="lib/models/watch_history.freezed.dart">
// coverage:ignore-file
// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: type=lint
// ignore_for_file: unused_element, deprecated_member_use, deprecated_member_use_from_same_package, use_function_type_syntax_for_parameters, unnecessary_const, avoid_init_to_null, invalid_override_different_default_values_named, prefer_expression_function_bodies, annotate_overrides, invalid_annotation_target, unnecessary_question_mark

part of 'watch_history.dart';

// **************************************************************************
// FreezedGenerator
// **************************************************************************

T _$identity<T>(T value) => value;

final _privateConstructorUsedError = UnsupportedError(
  'It seems like you constructed your class using `MyClass._()`. This constructor is only meant to be used by freezed and you are not supposed to need it nor use it.\nPlease check the documentation here for more information: https://github.com/rrousselGit/freezed#adding-getters-and-methods-to-our-models',
);

WatchHistory _$WatchHistoryFromJson(Map<String, dynamic> json) {
  return _WatchHistory.fromJson(json);
}

/// @nodoc
mixin _$WatchHistory {
  String get id => throw _privateConstructorUsedError;
  int get tmdbId => throw _privateConstructorUsedError;
  String get mediaType => throw _privateConstructorUsedError;
  String get title => throw _privateConstructorUsedError;
  String? get posterPath => throw _privateConstructorUsedError;
  int get currentSeason => throw _privateConstructorUsedError;
  int get currentEpisode => throw _privateConstructorUsedError;
  int get totalSeasons => throw _privateConstructorUsedError;
  int? get totalEpisodes => throw _privateConstructorUsedError;
  int get lastPositionSeconds => throw _privateConstructorUsedError;
  int get totalDurationSeconds => throw _privateConstructorUsedError;
  double get progressPercent => throw _privateConstructorUsedError;
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get lastWatchedAt => throw _privateConstructorUsedError;
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get createdAt => throw _privateConstructorUsedError;
  bool get isCompleted => throw _privateConstructorUsedError;
  @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
  Map<String, EpisodeProgress> get episodes =>
      throw _privateConstructorUsedError;

  /// Serializes this WatchHistory to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of WatchHistory
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $WatchHistoryCopyWith<WatchHistory> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $WatchHistoryCopyWith<$Res> {
  factory $WatchHistoryCopyWith(
    WatchHistory value,
    $Res Function(WatchHistory) then,
  ) = _$WatchHistoryCopyWithImpl<$Res, WatchHistory>;
  @useResult
  $Res call({
    String id,
    int tmdbId,
    String mediaType,
    String title,
    String? posterPath,
    int currentSeason,
    int currentEpisode,
    int totalSeasons,
    int? totalEpisodes,
    int lastPositionSeconds,
    int totalDurationSeconds,
    double progressPercent,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime lastWatchedAt,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime createdAt,
    bool isCompleted,
    @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
    Map<String, EpisodeProgress> episodes,
  });
}

/// @nodoc
class _$WatchHistoryCopyWithImpl<$Res, $Val extends WatchHistory>
    implements $WatchHistoryCopyWith<$Res> {
  _$WatchHistoryCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of WatchHistory
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? id = null,
    Object? tmdbId = null,
    Object? mediaType = null,
    Object? title = null,
    Object? posterPath = freezed,
    Object? currentSeason = null,
    Object? currentEpisode = null,
    Object? totalSeasons = null,
    Object? totalEpisodes = freezed,
    Object? lastPositionSeconds = null,
    Object? totalDurationSeconds = null,
    Object? progressPercent = null,
    Object? lastWatchedAt = null,
    Object? createdAt = null,
    Object? isCompleted = null,
    Object? episodes = null,
  }) {
    return _then(
      _value.copyWith(
            id: null == id
                ? _value.id
                : id // ignore: cast_nullable_to_non_nullable
                      as String,
            tmdbId: null == tmdbId
                ? _value.tmdbId
                : tmdbId // ignore: cast_nullable_to_non_nullable
                      as int,
            mediaType: null == mediaType
                ? _value.mediaType
                : mediaType // ignore: cast_nullable_to_non_nullable
                      as String,
            title: null == title
                ? _value.title
                : title // ignore: cast_nullable_to_non_nullable
                      as String,
            posterPath: freezed == posterPath
                ? _value.posterPath
                : posterPath // ignore: cast_nullable_to_non_nullable
                      as String?,
            currentSeason: null == currentSeason
                ? _value.currentSeason
                : currentSeason // ignore: cast_nullable_to_non_nullable
                      as int,
            currentEpisode: null == currentEpisode
                ? _value.currentEpisode
                : currentEpisode // ignore: cast_nullable_to_non_nullable
                      as int,
            totalSeasons: null == totalSeasons
                ? _value.totalSeasons
                : totalSeasons // ignore: cast_nullable_to_non_nullable
                      as int,
            totalEpisodes: freezed == totalEpisodes
                ? _value.totalEpisodes
                : totalEpisodes // ignore: cast_nullable_to_non_nullable
                      as int?,
            lastPositionSeconds: null == lastPositionSeconds
                ? _value.lastPositionSeconds
                : lastPositionSeconds // ignore: cast_nullable_to_non_nullable
                      as int,
            totalDurationSeconds: null == totalDurationSeconds
                ? _value.totalDurationSeconds
                : totalDurationSeconds // ignore: cast_nullable_to_non_nullable
                      as int,
            progressPercent: null == progressPercent
                ? _value.progressPercent
                : progressPercent // ignore: cast_nullable_to_non_nullable
                      as double,
            lastWatchedAt: null == lastWatchedAt
                ? _value.lastWatchedAt
                : lastWatchedAt // ignore: cast_nullable_to_non_nullable
                      as DateTime,
            createdAt: null == createdAt
                ? _value.createdAt
                : createdAt // ignore: cast_nullable_to_non_nullable
                      as DateTime,
            isCompleted: null == isCompleted
                ? _value.isCompleted
                : isCompleted // ignore: cast_nullable_to_non_nullable
                      as bool,
            episodes: null == episodes
                ? _value.episodes
                : episodes // ignore: cast_nullable_to_non_nullable
                      as Map<String, EpisodeProgress>,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$WatchHistoryImplCopyWith<$Res>
    implements $WatchHistoryCopyWith<$Res> {
  factory _$$WatchHistoryImplCopyWith(
    _$WatchHistoryImpl value,
    $Res Function(_$WatchHistoryImpl) then,
  ) = __$$WatchHistoryImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    String id,
    int tmdbId,
    String mediaType,
    String title,
    String? posterPath,
    int currentSeason,
    int currentEpisode,
    int totalSeasons,
    int? totalEpisodes,
    int lastPositionSeconds,
    int totalDurationSeconds,
    double progressPercent,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime lastWatchedAt,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime createdAt,
    bool isCompleted,
    @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
    Map<String, EpisodeProgress> episodes,
  });
}

/// @nodoc
class __$$WatchHistoryImplCopyWithImpl<$Res>
    extends _$WatchHistoryCopyWithImpl<$Res, _$WatchHistoryImpl>
    implements _$$WatchHistoryImplCopyWith<$Res> {
  __$$WatchHistoryImplCopyWithImpl(
    _$WatchHistoryImpl _value,
    $Res Function(_$WatchHistoryImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of WatchHistory
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? id = null,
    Object? tmdbId = null,
    Object? mediaType = null,
    Object? title = null,
    Object? posterPath = freezed,
    Object? currentSeason = null,
    Object? currentEpisode = null,
    Object? totalSeasons = null,
    Object? totalEpisodes = freezed,
    Object? lastPositionSeconds = null,
    Object? totalDurationSeconds = null,
    Object? progressPercent = null,
    Object? lastWatchedAt = null,
    Object? createdAt = null,
    Object? isCompleted = null,
    Object? episodes = null,
  }) {
    return _then(
      _$WatchHistoryImpl(
        id: null == id
            ? _value.id
            : id // ignore: cast_nullable_to_non_nullable
                  as String,
        tmdbId: null == tmdbId
            ? _value.tmdbId
            : tmdbId // ignore: cast_nullable_to_non_nullable
                  as int,
        mediaType: null == mediaType
            ? _value.mediaType
            : mediaType // ignore: cast_nullable_to_non_nullable
                  as String,
        title: null == title
            ? _value.title
            : title // ignore: cast_nullable_to_non_nullable
                  as String,
        posterPath: freezed == posterPath
            ? _value.posterPath
            : posterPath // ignore: cast_nullable_to_non_nullable
                  as String?,
        currentSeason: null == currentSeason
            ? _value.currentSeason
            : currentSeason // ignore: cast_nullable_to_non_nullable
                  as int,
        currentEpisode: null == currentEpisode
            ? _value.currentEpisode
            : currentEpisode // ignore: cast_nullable_to_non_nullable
                  as int,
        totalSeasons: null == totalSeasons
            ? _value.totalSeasons
            : totalSeasons // ignore: cast_nullable_to_non_nullable
                  as int,
        totalEpisodes: freezed == totalEpisodes
            ? _value.totalEpisodes
            : totalEpisodes // ignore: cast_nullable_to_non_nullable
                  as int?,
        lastPositionSeconds: null == lastPositionSeconds
            ? _value.lastPositionSeconds
            : lastPositionSeconds // ignore: cast_nullable_to_non_nullable
                  as int,
        totalDurationSeconds: null == totalDurationSeconds
            ? _value.totalDurationSeconds
            : totalDurationSeconds // ignore: cast_nullable_to_non_nullable
                  as int,
        progressPercent: null == progressPercent
            ? _value.progressPercent
            : progressPercent // ignore: cast_nullable_to_non_nullable
                  as double,
        lastWatchedAt: null == lastWatchedAt
            ? _value.lastWatchedAt
            : lastWatchedAt // ignore: cast_nullable_to_non_nullable
                  as DateTime,
        createdAt: null == createdAt
            ? _value.createdAt
            : createdAt // ignore: cast_nullable_to_non_nullable
                  as DateTime,
        isCompleted: null == isCompleted
            ? _value.isCompleted
            : isCompleted // ignore: cast_nullable_to_non_nullable
                  as bool,
        episodes: null == episodes
            ? _value._episodes
            : episodes // ignore: cast_nullable_to_non_nullable
                  as Map<String, EpisodeProgress>,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$WatchHistoryImpl implements _WatchHistory {
  const _$WatchHistoryImpl({
    required this.id,
    required this.tmdbId,
    required this.mediaType,
    required this.title,
    this.posterPath,
    required this.currentSeason,
    required this.currentEpisode,
    required this.totalSeasons,
    this.totalEpisodes,
    required this.lastPositionSeconds,
    required this.totalDurationSeconds,
    required this.progressPercent,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required this.lastWatchedAt,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required this.createdAt,
    required this.isCompleted,
    @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
    final Map<String, EpisodeProgress> episodes = const {},
  }) : _episodes = episodes;

  factory _$WatchHistoryImpl.fromJson(Map<String, dynamic> json) =>
      _$$WatchHistoryImplFromJson(json);

  @override
  final String id;
  @override
  final int tmdbId;
  @override
  final String mediaType;
  @override
  final String title;
  @override
  final String? posterPath;
  @override
  final int currentSeason;
  @override
  final int currentEpisode;
  @override
  final int totalSeasons;
  @override
  final int? totalEpisodes;
  @override
  final int lastPositionSeconds;
  @override
  final int totalDurationSeconds;
  @override
  final double progressPercent;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  final DateTime lastWatchedAt;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  final DateTime createdAt;
  @override
  final bool isCompleted;
  final Map<String, EpisodeProgress> _episodes;
  @override
  @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
  Map<String, EpisodeProgress> get episodes {
    if (_episodes is EqualUnmodifiableMapView) return _episodes;
    // ignore: implicit_dynamic_type
    return EqualUnmodifiableMapView(_episodes);
  }

  @override
  String toString() {
    return 'WatchHistory(id: $id, tmdbId: $tmdbId, mediaType: $mediaType, title: $title, posterPath: $posterPath, currentSeason: $currentSeason, currentEpisode: $currentEpisode, totalSeasons: $totalSeasons, totalEpisodes: $totalEpisodes, lastPositionSeconds: $lastPositionSeconds, totalDurationSeconds: $totalDurationSeconds, progressPercent: $progressPercent, lastWatchedAt: $lastWatchedAt, createdAt: $createdAt, isCompleted: $isCompleted, episodes: $episodes)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$WatchHistoryImpl &&
            (identical(other.id, id) || other.id == id) &&
            (identical(other.tmdbId, tmdbId) || other.tmdbId == tmdbId) &&
            (identical(other.mediaType, mediaType) ||
                other.mediaType == mediaType) &&
            (identical(other.title, title) || other.title == title) &&
            (identical(other.posterPath, posterPath) ||
                other.posterPath == posterPath) &&
            (identical(other.currentSeason, currentSeason) ||
                other.currentSeason == currentSeason) &&
            (identical(other.currentEpisode, currentEpisode) ||
                other.currentEpisode == currentEpisode) &&
            (identical(other.totalSeasons, totalSeasons) ||
                other.totalSeasons == totalSeasons) &&
            (identical(other.totalEpisodes, totalEpisodes) ||
                other.totalEpisodes == totalEpisodes) &&
            (identical(other.lastPositionSeconds, lastPositionSeconds) ||
                other.lastPositionSeconds == lastPositionSeconds) &&
            (identical(other.totalDurationSeconds, totalDurationSeconds) ||
                other.totalDurationSeconds == totalDurationSeconds) &&
            (identical(other.progressPercent, progressPercent) ||
                other.progressPercent == progressPercent) &&
            (identical(other.lastWatchedAt, lastWatchedAt) ||
                other.lastWatchedAt == lastWatchedAt) &&
            (identical(other.createdAt, createdAt) ||
                other.createdAt == createdAt) &&
            (identical(other.isCompleted, isCompleted) ||
                other.isCompleted == isCompleted) &&
            const DeepCollectionEquality().equals(other._episodes, _episodes));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    id,
    tmdbId,
    mediaType,
    title,
    posterPath,
    currentSeason,
    currentEpisode,
    totalSeasons,
    totalEpisodes,
    lastPositionSeconds,
    totalDurationSeconds,
    progressPercent,
    lastWatchedAt,
    createdAt,
    isCompleted,
    const DeepCollectionEquality().hash(_episodes),
  );

  /// Create a copy of WatchHistory
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$WatchHistoryImplCopyWith<_$WatchHistoryImpl> get copyWith =>
      __$$WatchHistoryImplCopyWithImpl<_$WatchHistoryImpl>(this, _$identity);

  @override
  Map<String, dynamic> toJson() {
    return _$$WatchHistoryImplToJson(this);
  }
}

abstract class _WatchHistory implements WatchHistory {
  const factory _WatchHistory({
    required final String id,
    required final int tmdbId,
    required final String mediaType,
    required final String title,
    final String? posterPath,
    required final int currentSeason,
    required final int currentEpisode,
    required final int totalSeasons,
    final int? totalEpisodes,
    required final int lastPositionSeconds,
    required final int totalDurationSeconds,
    required final double progressPercent,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required final DateTime lastWatchedAt,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required final DateTime createdAt,
    required final bool isCompleted,
    @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
    final Map<String, EpisodeProgress> episodes,
  }) = _$WatchHistoryImpl;

  factory _WatchHistory.fromJson(Map<String, dynamic> json) =
      _$WatchHistoryImpl.fromJson;

  @override
  String get id;
  @override
  int get tmdbId;
  @override
  String get mediaType;
  @override
  String get title;
  @override
  String? get posterPath;
  @override
  int get currentSeason;
  @override
  int get currentEpisode;
  @override
  int get totalSeasons;
  @override
  int? get totalEpisodes;
  @override
  int get lastPositionSeconds;
  @override
  int get totalDurationSeconds;
  @override
  double get progressPercent;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get lastWatchedAt;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get createdAt;
  @override
  bool get isCompleted;
  @override
  @JsonKey(fromJson: _episodesFromJson, toJson: _episodesToJson)
  Map<String, EpisodeProgress> get episodes;

  /// Create a copy of WatchHistory
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$WatchHistoryImplCopyWith<_$WatchHistoryImpl> get copyWith =>
      throw _privateConstructorUsedError;
}

EpisodeProgress _$EpisodeProgressFromJson(Map<String, dynamic> json) {
  return _EpisodeProgress.fromJson(json);
}

/// @nodoc
mixin _$EpisodeProgress {
  int get season => throw _privateConstructorUsedError;
  int get episode => throw _privateConstructorUsedError;
  int get lastPositionSeconds => throw _privateConstructorUsedError;
  int get totalDurationSeconds => throw _privateConstructorUsedError;
  bool get isCompleted => throw _privateConstructorUsedError;
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get watchedAt => throw _privateConstructorUsedError;

  /// Serializes this EpisodeProgress to a JSON map.
  Map<String, dynamic> toJson() => throw _privateConstructorUsedError;

  /// Create a copy of EpisodeProgress
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  $EpisodeProgressCopyWith<EpisodeProgress> get copyWith =>
      throw _privateConstructorUsedError;
}

/// @nodoc
abstract class $EpisodeProgressCopyWith<$Res> {
  factory $EpisodeProgressCopyWith(
    EpisodeProgress value,
    $Res Function(EpisodeProgress) then,
  ) = _$EpisodeProgressCopyWithImpl<$Res, EpisodeProgress>;
  @useResult
  $Res call({
    int season,
    int episode,
    int lastPositionSeconds,
    int totalDurationSeconds,
    bool isCompleted,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime watchedAt,
  });
}

/// @nodoc
class _$EpisodeProgressCopyWithImpl<$Res, $Val extends EpisodeProgress>
    implements $EpisodeProgressCopyWith<$Res> {
  _$EpisodeProgressCopyWithImpl(this._value, this._then);

  // ignore: unused_field
  final $Val _value;
  // ignore: unused_field
  final $Res Function($Val) _then;

  /// Create a copy of EpisodeProgress
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? season = null,
    Object? episode = null,
    Object? lastPositionSeconds = null,
    Object? totalDurationSeconds = null,
    Object? isCompleted = null,
    Object? watchedAt = null,
  }) {
    return _then(
      _value.copyWith(
            season: null == season
                ? _value.season
                : season // ignore: cast_nullable_to_non_nullable
                      as int,
            episode: null == episode
                ? _value.episode
                : episode // ignore: cast_nullable_to_non_nullable
                      as int,
            lastPositionSeconds: null == lastPositionSeconds
                ? _value.lastPositionSeconds
                : lastPositionSeconds // ignore: cast_nullable_to_non_nullable
                      as int,
            totalDurationSeconds: null == totalDurationSeconds
                ? _value.totalDurationSeconds
                : totalDurationSeconds // ignore: cast_nullable_to_non_nullable
                      as int,
            isCompleted: null == isCompleted
                ? _value.isCompleted
                : isCompleted // ignore: cast_nullable_to_non_nullable
                      as bool,
            watchedAt: null == watchedAt
                ? _value.watchedAt
                : watchedAt // ignore: cast_nullable_to_non_nullable
                      as DateTime,
          )
          as $Val,
    );
  }
}

/// @nodoc
abstract class _$$EpisodeProgressImplCopyWith<$Res>
    implements $EpisodeProgressCopyWith<$Res> {
  factory _$$EpisodeProgressImplCopyWith(
    _$EpisodeProgressImpl value,
    $Res Function(_$EpisodeProgressImpl) then,
  ) = __$$EpisodeProgressImplCopyWithImpl<$Res>;
  @override
  @useResult
  $Res call({
    int season,
    int episode,
    int lastPositionSeconds,
    int totalDurationSeconds,
    bool isCompleted,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    DateTime watchedAt,
  });
}

/// @nodoc
class __$$EpisodeProgressImplCopyWithImpl<$Res>
    extends _$EpisodeProgressCopyWithImpl<$Res, _$EpisodeProgressImpl>
    implements _$$EpisodeProgressImplCopyWith<$Res> {
  __$$EpisodeProgressImplCopyWithImpl(
    _$EpisodeProgressImpl _value,
    $Res Function(_$EpisodeProgressImpl) _then,
  ) : super(_value, _then);

  /// Create a copy of EpisodeProgress
  /// with the given fields replaced by the non-null parameter values.
  @pragma('vm:prefer-inline')
  @override
  $Res call({
    Object? season = null,
    Object? episode = null,
    Object? lastPositionSeconds = null,
    Object? totalDurationSeconds = null,
    Object? isCompleted = null,
    Object? watchedAt = null,
  }) {
    return _then(
      _$EpisodeProgressImpl(
        season: null == season
            ? _value.season
            : season // ignore: cast_nullable_to_non_nullable
                  as int,
        episode: null == episode
            ? _value.episode
            : episode // ignore: cast_nullable_to_non_nullable
                  as int,
        lastPositionSeconds: null == lastPositionSeconds
            ? _value.lastPositionSeconds
            : lastPositionSeconds // ignore: cast_nullable_to_non_nullable
                  as int,
        totalDurationSeconds: null == totalDurationSeconds
            ? _value.totalDurationSeconds
            : totalDurationSeconds // ignore: cast_nullable_to_non_nullable
                  as int,
        isCompleted: null == isCompleted
            ? _value.isCompleted
            : isCompleted // ignore: cast_nullable_to_non_nullable
                  as bool,
        watchedAt: null == watchedAt
            ? _value.watchedAt
            : watchedAt // ignore: cast_nullable_to_non_nullable
                  as DateTime,
      ),
    );
  }
}

/// @nodoc
@JsonSerializable()
class _$EpisodeProgressImpl implements _EpisodeProgress {
  const _$EpisodeProgressImpl({
    required this.season,
    required this.episode,
    required this.lastPositionSeconds,
    required this.totalDurationSeconds,
    required this.isCompleted,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required this.watchedAt,
  });

  factory _$EpisodeProgressImpl.fromJson(Map<String, dynamic> json) =>
      _$$EpisodeProgressImplFromJson(json);

  @override
  final int season;
  @override
  final int episode;
  @override
  final int lastPositionSeconds;
  @override
  final int totalDurationSeconds;
  @override
  final bool isCompleted;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  final DateTime watchedAt;

  @override
  String toString() {
    return 'EpisodeProgress(season: $season, episode: $episode, lastPositionSeconds: $lastPositionSeconds, totalDurationSeconds: $totalDurationSeconds, isCompleted: $isCompleted, watchedAt: $watchedAt)';
  }

  @override
  bool operator ==(Object other) {
    return identical(this, other) ||
        (other.runtimeType == runtimeType &&
            other is _$EpisodeProgressImpl &&
            (identical(other.season, season) || other.season == season) &&
            (identical(other.episode, episode) || other.episode == episode) &&
            (identical(other.lastPositionSeconds, lastPositionSeconds) ||
                other.lastPositionSeconds == lastPositionSeconds) &&
            (identical(other.totalDurationSeconds, totalDurationSeconds) ||
                other.totalDurationSeconds == totalDurationSeconds) &&
            (identical(other.isCompleted, isCompleted) ||
                other.isCompleted == isCompleted) &&
            (identical(other.watchedAt, watchedAt) ||
                other.watchedAt == watchedAt));
  }

  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  int get hashCode => Object.hash(
    runtimeType,
    season,
    episode,
    lastPositionSeconds,
    totalDurationSeconds,
    isCompleted,
    watchedAt,
  );

  /// Create a copy of EpisodeProgress
  /// with the given fields replaced by the non-null parameter values.
  @JsonKey(includeFromJson: false, includeToJson: false)
  @override
  @pragma('vm:prefer-inline')
  _$$EpisodeProgressImplCopyWith<_$EpisodeProgressImpl> get copyWith =>
      __$$EpisodeProgressImplCopyWithImpl<_$EpisodeProgressImpl>(
        this,
        _$identity,
      );

  @override
  Map<String, dynamic> toJson() {
    return _$$EpisodeProgressImplToJson(this);
  }
}

abstract class _EpisodeProgress implements EpisodeProgress {
  const factory _EpisodeProgress({
    required final int season,
    required final int episode,
    required final int lastPositionSeconds,
    required final int totalDurationSeconds,
    required final bool isCompleted,
    @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
    required final DateTime watchedAt,
  }) = _$EpisodeProgressImpl;

  factory _EpisodeProgress.fromJson(Map<String, dynamic> json) =
      _$EpisodeProgressImpl.fromJson;

  @override
  int get season;
  @override
  int get episode;
  @override
  int get lastPositionSeconds;
  @override
  int get totalDurationSeconds;
  @override
  bool get isCompleted;
  @override
  @JsonKey(fromJson: _dateTimeFromJson, toJson: _dateTimeToJson)
  DateTime get watchedAt;

  /// Create a copy of EpisodeProgress
  /// with the given fields replaced by the non-null parameter values.
  @override
  @JsonKey(includeFromJson: false, includeToJson: false)
  _$$EpisodeProgressImplCopyWith<_$EpisodeProgressImpl> get copyWith =>
      throw _privateConstructorUsedError;
}
</file>

<file path="lib/models/watch_history.g.dart">
// GENERATED CODE - DO NOT MODIFY BY HAND

part of 'watch_history.dart';

// **************************************************************************
// JsonSerializableGenerator
// **************************************************************************

_$WatchHistoryImpl _$$WatchHistoryImplFromJson(Map<String, dynamic> json) =>
    _$WatchHistoryImpl(
      id: json['id'] as String,
      tmdbId: (json['tmdbId'] as num).toInt(),
      mediaType: json['mediaType'] as String,
      title: json['title'] as String,
      posterPath: json['posterPath'] as String?,
      currentSeason: (json['currentSeason'] as num).toInt(),
      currentEpisode: (json['currentEpisode'] as num).toInt(),
      totalSeasons: (json['totalSeasons'] as num).toInt(),
      totalEpisodes: (json['totalEpisodes'] as num?)?.toInt(),
      lastPositionSeconds: (json['lastPositionSeconds'] as num).toInt(),
      totalDurationSeconds: (json['totalDurationSeconds'] as num).toInt(),
      progressPercent: (json['progressPercent'] as num).toDouble(),
      lastWatchedAt: _dateTimeFromJson(json['lastWatchedAt']),
      createdAt: _dateTimeFromJson(json['createdAt']),
      isCompleted: json['isCompleted'] as bool,
      episodes: json['episodes'] == null
          ? const {}
          : _episodesFromJson(json['episodes']),
    );

Map<String, dynamic> _$$WatchHistoryImplToJson(_$WatchHistoryImpl instance) =>
    <String, dynamic>{
      'id': instance.id,
      'tmdbId': instance.tmdbId,
      'mediaType': instance.mediaType,
      'title': instance.title,
      'posterPath': instance.posterPath,
      'currentSeason': instance.currentSeason,
      'currentEpisode': instance.currentEpisode,
      'totalSeasons': instance.totalSeasons,
      'totalEpisodes': instance.totalEpisodes,
      'lastPositionSeconds': instance.lastPositionSeconds,
      'totalDurationSeconds': instance.totalDurationSeconds,
      'progressPercent': instance.progressPercent,
      'lastWatchedAt': _dateTimeToJson(instance.lastWatchedAt),
      'createdAt': _dateTimeToJson(instance.createdAt),
      'isCompleted': instance.isCompleted,
      'episodes': _episodesToJson(instance.episodes),
    };

_$EpisodeProgressImpl _$$EpisodeProgressImplFromJson(
  Map<String, dynamic> json,
) => _$EpisodeProgressImpl(
  season: (json['season'] as num).toInt(),
  episode: (json['episode'] as num).toInt(),
  lastPositionSeconds: (json['lastPositionSeconds'] as num).toInt(),
  totalDurationSeconds: (json['totalDurationSeconds'] as num).toInt(),
  isCompleted: json['isCompleted'] as bool,
  watchedAt: _dateTimeFromJson(json['watchedAt']),
);

Map<String, dynamic> _$$EpisodeProgressImplToJson(
  _$EpisodeProgressImpl instance,
) => <String, dynamic>{
  'season': instance.season,
  'episode': instance.episode,
  'lastPositionSeconds': instance.lastPositionSeconds,
  'totalDurationSeconds': instance.totalDurationSeconds,
  'isCompleted': instance.isCompleted,
  'watchedAt': _dateTimeToJson(instance.watchedAt),
};
</file>

<file path="lib/providers/home_providers.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/providers/service_providers.dart';

// Featured Content Provider (mixed regional + general trending for hero slider)
final featuredContentProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  
  // Fetch all content types in parallel
  final results = await Future.wait([
    tmdbService.getTrending('all', 'day'),           // General trending
    tmdbService.getTrendingAnime(),                   // Trending anime
    tmdbService.getTrendingByLanguage('movie', 'ta'), // Trending Tamil
    tmdbService.getTrendingByLanguage('movie', 'te'), // Trending Telugu
    tmdbService.getTrendingByLanguage('movie', 'hi'), // Trending Hindi
    tmdbService.getTrendingByLanguage('tv', 'ko'),    // Trending Korean
  ]);
  
  // Combine all results and shuffle for variety
  final allContent = <dynamic>[];
  for (final list in results) {
    allContent.addAll(list.take(3)); // Take top 3 from each category
  }
  
  // Shuffle to mix regional and general content
  allContent.shuffle();
  
  return allContent.take(10).toList(); // Return top 10 for slider
});

// Trending Movies Provider
final trendingMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrending('movie', 'day');
});

// Trending TV Shows Provider
final trendingTVShowsProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrending('tv', 'day');
});

// Popular Movies Provider
final popularMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getPopular('movie');
});

// Popular TV Shows Provider
final popularTVShowsProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getPopular('tv');
});

// Top Rated Movies Provider
final topRatedMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTopRated('movie');
});

// Anime Provider (Popular Japanese Animation)
final animeProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getAnime();
});

// Trending Anime Provider
final trendingAnimeProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrendingAnime();
});

// Latest Tamil OTT Releases Provider
final tamilMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getLatestTamilOTT();
});

// Trending Tamil Movies Provider
final trendingTamilMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrendingByLanguage('movie', 'ta');
});

// Popular Telugu Movies Provider
final teluguMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getByLanguage('movie', 'te');
});

// Trending Telugu Movies Provider
final trendingTeluguMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrendingByLanguage('movie', 'te');
});

// Popular Hindi Movies Provider
final hindiMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getByLanguage('movie', 'hi');
});

// Trending Hindi Movies Provider
final trendingHindiMoviesProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrendingByLanguage('movie', 'hi');
});

// Popular Korean Dramas Provider
final koreanDramasProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getByLanguage('tv', 'ko');
});

// Trending Korean Dramas Provider
final trendingKoreanDramasProvider = FutureProvider<List<dynamic>>((ref) async {
  final tmdbService = ref.watch(tmdbServiceProvider);
  return await tmdbService.getTrendingByLanguage('tv', 'ko');
});
</file>

<file path="lib/providers/language_preferences_provider.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:shared_preferences/shared_preferences.dart';

// Language preference model
class LanguagePreferences {
  final bool showAnime;
  final bool showTamil;
  final bool showTelugu;
  final bool showHindi;
  final bool showKorean;

  const LanguagePreferences({
    this.showAnime = true,
    this.showTamil = true,
    this.showTelugu = true,
    this.showHindi = true,
    this.showKorean = true,
  });

  LanguagePreferences copyWith({
    bool? showAnime,
    bool? showTamil,
    bool? showTelugu,
    bool? showHindi,
    bool? showKorean,
  }) {
    return LanguagePreferences(
      showAnime: showAnime ?? this.showAnime,
      showTamil: showTamil ?? this.showTamil,
      showTelugu: showTelugu ?? this.showTelugu,
      showHindi: showHindi ?? this.showHindi,
      showKorean: showKorean ?? this.showKorean,
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'showAnime': showAnime,
      'showTamil': showTamil,
      'showTelugu': showTelugu,
      'showHindi': showHindi,
      'showKorean': showKorean,
    };
  }

  factory LanguagePreferences.fromJson(Map<String, dynamic> json) {
    return LanguagePreferences(
      showAnime: json['showAnime'] ?? true,
      showTamil: json['showTamil'] ?? true,
      showTelugu: json['showTelugu'] ?? true,
      showHindi: json['showHindi'] ?? true,
      showKorean: json['showKorean'] ?? true,
    );
  }
}

// Language preferences notifier
class LanguagePreferencesNotifier extends StateNotifier<LanguagePreferences> {
  LanguagePreferencesNotifier() : super(const LanguagePreferences()) {
    _loadPreferences();
  }

  Future<void> _loadPreferences() async {
    final prefs = await SharedPreferences.getInstance();
    final showAnime = prefs.getBool('showAnime') ?? true;
    final showTamil = prefs.getBool('showTamil') ?? true;
    final showTelugu = prefs.getBool('showTelugu') ?? true;
    final showHindi = prefs.getBool('showHindi') ?? true;
    final showKorean = prefs.getBool('showKorean') ?? true;

    state = LanguagePreferences(
      showAnime: showAnime,
      showTamil: showTamil,
      showTelugu: showTelugu,
      showHindi: showHindi,
      showKorean: showKorean,
    );
  }

  Future<void> toggleAnime(bool value) async {
    state = state.copyWith(showAnime: value);
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('showAnime', value);
  }

  Future<void> toggleTamil(bool value) async {
    state = state.copyWith(showTamil: value);
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('showTamil', value);
  }

  Future<void> toggleTelugu(bool value) async {
    state = state.copyWith(showTelugu: value);
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('showTelugu', value);
  }

  Future<void> toggleHindi(bool value) async {
    state = state.copyWith(showHindi: value);
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('showHindi', value);
  }

  Future<void> toggleKorean(bool value) async {
    state = state.copyWith(showKorean: value);
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('showKorean', value);
  }
}

// Language preferences provider
final languagePreferencesProvider = StateNotifierProvider<LanguagePreferencesNotifier, LanguagePreferences>((ref) {
  return LanguagePreferencesNotifier();
});
</file>

<file path="lib/providers/media_provider.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/models/season_info.dart';
import 'package:nivio/providers/service_providers.dart';

// Selected media state
final selectedMediaProvider = StateProvider<SearchResult?>((ref) => null);

// Selected season state
final selectedSeasonProvider = StateProvider<int>((ref) => 1);

// Selected episode state
final selectedEpisodeProvider = StateProvider<int>((ref) => 1);

// Selected quality state
final selectedQualityProvider = StateProvider<String?>((ref) => null);

// Series info provider (for TV shows)
final seriesInfoProvider = FutureProvider.family<SeriesInfo, int>((ref, showId) async {
  final tmdb = ref.watch(tmdbServiceProvider);
  return await tmdb.getSeriesInfo(showId);
});

// Season data provider (episodes for a specific season)
final seasonDataProvider = FutureProvider.family<SeasonData, ({int showId, int seasonNumber})>((ref, params) async {
  final tmdb = ref.watch(tmdbServiceProvider);
  return await tmdb.getSeasonInfo(params.showId, params.seasonNumber);
});
</file>

<file path="lib/providers/search_provider.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/providers/service_providers.dart';

// Search query state
final searchQueryProvider = StateProvider<String>((ref) => '');

// Current page for pagination
final searchPageProvider = StateProvider<int>((ref) => 1);

// Language filter (null = all languages)
final searchLanguageFilterProvider = StateProvider<String?>((ref) => null);

// Sort option (null = default, 'popularity', 'title', 'year')
final searchSortProvider = StateProvider<String?>((ref) => null);

// All accumulated search results (for pagination)
final accumulatedSearchResultsProvider = StateProvider<List<SearchResult>>((ref) => []);

// Total pages and results info
final searchMetadataProvider = StateProvider<({int totalPages, int totalResults})>((ref) {
  return (totalPages: 0, totalResults: 0);
});

// Search results provider with pagination
final searchResultsProvider = FutureProvider<SearchResults>((ref) async {
  final query = ref.watch(searchQueryProvider);
  if (query.isEmpty) {
    ref.read(accumulatedSearchResultsProvider.notifier).state = [];
    ref.read(searchMetadataProvider.notifier).state = (totalPages: 0, totalResults: 0);
    return const SearchResults(
      page: 0,
      results: [],
      totalPages: 0,
      totalResults: 0,
    );
  }

  final page = ref.watch(searchPageProvider);
  final language = ref.watch(searchLanguageFilterProvider);
  final sortBy = ref.watch(searchSortProvider);
  
  final tmdb = ref.watch(tmdbServiceProvider);
  final results = await tmdb.search(query, page: page, language: language, sortBy: sortBy);
  
  // Update metadata
  ref.read(searchMetadataProvider.notifier).state = (
    totalPages: results.totalPages,
    totalResults: results.totalResults,
  );
  
  // Accumulate results for infinite scroll
  if (page == 1) {
    ref.read(accumulatedSearchResultsProvider.notifier).state = results.results;
  } else {
    final accumulated = ref.read(accumulatedSearchResultsProvider);
    ref.read(accumulatedSearchResultsProvider.notifier).state = [...accumulated, ...results.results];
  }
  
  final accumulated = ref.read(accumulatedSearchResultsProvider);
  return SearchResults(
    page: page,
    results: accumulated,
    totalPages: results.totalPages,
    totalResults: results.totalResults,
  );
});
</file>

<file path="lib/providers/settings_providers.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:shared_preferences/shared_preferences.dart';

// Playback Speed Provider
final playbackSpeedProvider = StateNotifierProvider<PlaybackSpeedNotifier, double>((ref) {
  return PlaybackSpeedNotifier();
});

class PlaybackSpeedNotifier extends StateNotifier<double> {
  PlaybackSpeedNotifier() : super(1.0) {
    _loadSpeed();
  }

  Future<void> _loadSpeed() async {
    final prefs = await SharedPreferences.getInstance();
    state = prefs.getDouble('playback_speed') ?? 1.0;
  }

  Future<void> setSpeed(double speed) async {
    state = speed;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setDouble('playback_speed', speed);
  }
}

// Video Quality Provider
final videoQualityProvider = StateNotifierProvider<VideoQualityNotifier, String>((ref) {
  return VideoQualityNotifier();
});

class VideoQualityNotifier extends StateNotifier<String> {
  VideoQualityNotifier() : super('auto') {
    _loadQuality();
  }

  Future<void> _loadQuality() async {
    final prefs = await SharedPreferences.getInstance();
    state = prefs.getString('video_quality') ?? 'auto';
  }

  Future<void> setQuality(String quality) async {
    state = quality;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString('video_quality', quality);
  }

  String get displayName {
    switch (state) {
      case 'auto':
        return 'Auto (Best Available)';
      case '2160p':
        return '4K (2160p)';
      case '1080p':
        return 'Full HD (1080p)';
      case '720p':
        return 'HD (720p)';
      case '480p':
        return 'SD (480p)';
      default:
        return 'Auto';
    }
  }
}

// Subtitle Enabled Provider
final subtitlesEnabledProvider = StateNotifierProvider<SubtitlesEnabledNotifier, bool>((ref) {
  return SubtitlesEnabledNotifier();
});

class SubtitlesEnabledNotifier extends StateNotifier<bool> {
  SubtitlesEnabledNotifier() : super(false) {
    _loadSetting();
  }

  Future<void> _loadSetting() async {
    final prefs = await SharedPreferences.getInstance();
    state = prefs.getBool('subtitles_enabled') ?? false;
  }

  Future<void> toggle() async {
    state = !state;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('subtitles_enabled', state);
  }
}

// Animations Enabled Provider
final animationsEnabledProvider = StateNotifierProvider<AnimationsEnabledNotifier, bool>((ref) {
  return AnimationsEnabledNotifier();
});

class AnimationsEnabledNotifier extends StateNotifier<bool> {
  AnimationsEnabledNotifier() : super(true) {
    _loadSetting();
  }

  Future<void> _loadSetting() async {
    final prefs = await SharedPreferences.getInstance();
    state = prefs.getBool('animations_enabled') ?? true;
  }

  Future<void> toggle() async {
    state = !state;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('animations_enabled', state);
  }
}
</file>

<file path="lib/providers/watch_history_provider.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/models/watch_history.dart';
import 'package:nivio/providers/service_providers.dart';

// Watch history list provider (with auto-refresh)
final watchHistoryProvider = StreamProvider<List<WatchHistory>>((ref) async* {
  final service = ref.watch(watchHistoryServiceProvider);
  await service.init();
  
  // Initial load
  yield await service.getAllHistory();
  
  // Refresh every 2 seconds to pick up new additions
  while (true) {
    await Future.delayed(const Duration(seconds: 2));
    yield await service.getAllHistory();
  }
});

// Continue watching provider (with auto-refresh)
final continueWatchingProvider = StreamProvider<List<WatchHistory>>((ref) async* {
  final service = ref.watch(watchHistoryServiceProvider);
  await service.init();
  
  // Initial load
  yield await service.getContinueWatching();
  
  // Refresh every 2 seconds to pick up new additions
  while (true) {
    await Future.delayed(const Duration(seconds: 2));
    yield await service.getContinueWatching();
  }
});

// Get history for specific media
final mediaHistoryProvider = FutureProvider.family<WatchHistory?, int>((ref, tmdbId) async {
  final service = ref.watch(watchHistoryServiceProvider);
  await service.init();
  return await service.getHistory(tmdbId);
});
</file>

<file path="lib/screens/auth_screen.dart">
import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:nivio/core/theme.dart';

class AuthScreen extends StatefulWidget {
  const AuthScreen({super.key});

  @override
  State<AuthScreen> createState() => _AuthScreenState();
}

class _AuthScreenState extends State<AuthScreen> {
  bool _isLoading = false;

  @override
  void initState() {
    super.initState();
    _checkAuthState();
  }

  Future<void> _checkAuthState() async {
    // Check if user is already signed in
    final user = FirebaseAuth.instance.currentUser;
    if (user != null && mounted) {
      context.go('/');
    }
  }

  Future<void> _signInAnonymously() async {
    setState(() => _isLoading = true);
    
    try {
      await FirebaseAuth.instance.signInAnonymously();
      if (mounted) {
        context.go('/');
      }
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('Failed to sign in: $e')),
        );
      }
    } finally {
      if (mounted) {
        setState(() => _isLoading = false);
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Container(
        decoration: const BoxDecoration(
          gradient: LinearGradient(
            begin: Alignment.topCenter,
            end: Alignment.bottomCenter,
            colors: [
              NivioTheme.netflixBlack,
              Color(0xFF000000),
            ],
          ),
        ),
        child: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              // Logo
              Image.asset(
                'assets/images/nivio-dark.png',
                height: 180,
                fit: BoxFit.contain,
              ),
              const SizedBox(height: 16),
              Text(
                'Unlimited movies, TV shows, and more',
                style: Theme.of(context).textTheme.titleLarge,
                textAlign: TextAlign.center,
              ),
              const SizedBox(height: 64),
              
              // Sign In Button
              if (_isLoading)
                const CircularProgressIndicator(
                  color: NivioTheme.netflixRed,
                )
              else
                ElevatedButton(
                  onPressed: _signInAnonymously,
                  style: ElevatedButton.styleFrom(
                    padding: const EdgeInsets.symmetric(
                      horizontal: 48,
                      vertical: 16,
                    ),
                    backgroundColor: NivioTheme.netflixRed,
                  ),
                  child: const Text(
                    'GET STARTED',
                    style: TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.bold,
                      letterSpacing: 1.5,
                    ),
                  ),
                ),
            ],
          ),
        ),
      ),
    );
  }
}
</file>

<file path="lib/screens/home_screen.dart">
import 'dart:async';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:nivio/core/constants.dart';
import 'package:nivio/providers/home_providers.dart';
import 'package:nivio/providers/language_preferences_provider.dart';
import 'package:nivio/widgets/continue_watching_row.dart';
import 'package:nivio/widgets/content_row.dart';

class HomeScreen extends ConsumerStatefulWidget {
  const HomeScreen({super.key});

  @override
  ConsumerState<HomeScreen> createState() => _HomeScreenState();
}

class _HomeScreenState extends ConsumerState<HomeScreen> {
  final ScrollController _scrollController = ScrollController();
  final PageController _pageController = PageController();
  bool _showAppBarBackground = false;
  int _currentBannerIndex = 0;
  Timer? _bannerTimer;

  @override
  void initState() {
    super.initState();
    _scrollController.addListener(() {
      if (_scrollController.offset > 50 && !_showAppBarBackground) {
        setState(() => _showAppBarBackground = true);
      } else if (_scrollController.offset <= 50 && _showAppBarBackground) {
        setState(() => _showAppBarBackground = false);
      }
    });

    // Auto-slide banner every 6 seconds
    _bannerTimer = Timer.periodic(const Duration(seconds: 6), (timer) {
      if (_pageController.hasClients) {
        final featuredContent = ref.read(featuredContentProvider).value ?? [];
        if (featuredContent.isNotEmpty) {
          final nextPage = (_currentBannerIndex + 1) % featuredContent.length;
          _pageController.animateToPage(
            nextPage,
            duration: const Duration(milliseconds: 1200),
            curve: Curves.easeInOutCubic,
          );
        }
      }
    });
  }

  @override
  void dispose() {
    _scrollController.dispose();
    _pageController.dispose();
    _bannerTimer?.cancel();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final featuredContent = ref.watch(featuredContentProvider);
    final languagePreferences = ref.watch(languagePreferencesProvider);
    final trendingMovies = ref.watch(trendingMoviesProvider);
    final trendingTVShows = ref.watch(trendingTVShowsProvider);
    final popularMovies = ref.watch(popularMoviesProvider);
    final topRatedMovies = ref.watch(topRatedMoviesProvider);
    final popularTVShows = ref.watch(popularTVShowsProvider);
    
    // Anime
    final anime = ref.watch(animeProvider);
    final trendingAnime = ref.watch(trendingAnimeProvider);
    
    // Tamil
    final tamilMovies = ref.watch(tamilMoviesProvider);
    final trendingTamil = ref.watch(trendingTamilMoviesProvider);
    
    // Telugu
    final teluguMovies = ref.watch(teluguMoviesProvider);
    final trendingTelugu = ref.watch(trendingTeluguMoviesProvider);
    
    // Hindi
    final hindiMovies = ref.watch(hindiMoviesProvider);
    final trendingHindi = ref.watch(trendingHindiMoviesProvider);
    
    // Korean
    final koreanDramas = ref.watch(koreanDramasProvider);
    final trendingKorean = ref.watch(trendingKoreanDramasProvider);

    return Scaffold(
      extendBodyBehindAppBar: true,
      appBar: PreferredSize(
        preferredSize: const Size.fromHeight(70),
        child: AppBar(
          elevation: 0,
          backgroundColor: _showAppBarBackground 
              ? const Color(0xFF141414) 
              : Colors.transparent,
          flexibleSpace: Container(
            decoration: BoxDecoration(
              gradient: _showAppBarBackground 
                  ? null 
                  : LinearGradient(
                      begin: Alignment.topCenter,
                      end: Alignment.bottomCenter,
                      colors: [
                        Colors.black.withOpacity(0.7),
                        Colors.transparent,
                      ],
                    ),
            ),
          ),
          title: Padding(
            padding: const EdgeInsets.only(top: 8.0),
            child: Image.asset(
              'assets/images/nivio-dark.png',
              height: 100,
              fit: BoxFit.contain,
            ),
          ),
          actions: [
            Padding(
              padding: const EdgeInsets.only(top: 8.0),
              child: IconButton(
                icon: const Icon(Icons.search, color: Colors.white, size: 28),
                onPressed: () => context.push('/search'),
              ),
            ),
            Padding(
              padding: const EdgeInsets.only(top: 8.0),
              child: IconButton(
                icon: const Icon(Icons.settings_outlined, color: Colors.white, size: 28),
                onPressed: () => context.push('/settings'),
              ),
            ),
            const SizedBox(width: 8),
          ],
        ),
      ),
      body: CustomScrollView(
        controller: _scrollController,
        slivers: [
          // Hero Banner Carousel with Regional + General Content
          SliverToBoxAdapter(
            child: featuredContent.when(
              data: (content) => _buildHeroBannerCarousel(context, content),
              loading: () => _buildHeroBannerShimmer(),
              error: (_, __) => const SizedBox(height: 500),
            ),
          ),

          // Continue Watching Section
          SliverToBoxAdapter(
            child: Padding(
              padding: const EdgeInsets.only(top: 0, left: 16, right: 16),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    'Continue Watching',
                    style: const TextStyle(
                      color: Colors.white,
                      fontSize: 20,
                      fontWeight: FontWeight.bold,
                    ),
                  ),
                  const SizedBox(height: 12),
                  const ContinueWatchingRow(),
                  const SizedBox(height: 30),
                ],
              ),
            ),
          ),

          // Anime Section (if enabled)
          if (languagePreferences.showAnime) ...[
            SliverToBoxAdapter(
              child: anime.when(
                data: (shows) => ContentRow(
                  title: 'üéå Popular Anime',
                  items: shows,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),

            // Trending Anime
            SliverToBoxAdapter(
              child: trendingAnime.when(
                data: (shows) => ContentRow(
                  title: 'üî• Trending Anime',
                  items: shows,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),
          ],

          // Tamil Movies (if enabled)
          if (languagePreferences.showTamil) ...[
            SliverToBoxAdapter(
              child: tamilMovies.when(
                data: (movies) => ContentRow(
                  title: 'üé¨ Latest Tamil OTT Releases',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),

            // Trending Tamil
            SliverToBoxAdapter(
              child: trendingTamil.when(
                data: (movies) => ContentRow(
                  title: 'üî• Trending Tamil Movies',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),
          ],

          // Telugu Movies (if enabled)
          if (languagePreferences.showTelugu) ...[
            SliverToBoxAdapter(
              child: teluguMovies.when(
                data: (movies) => ContentRow(
                  title: 'üé• Popular Telugu Movies',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),

            // Trending Telugu
            SliverToBoxAdapter(
              child: trendingTelugu.when(
                data: (movies) => ContentRow(
                  title: 'üî• Trending Telugu Movies',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),
          ],

          // Hindi Movies (if enabled)
          if (languagePreferences.showHindi) ...[
            SliverToBoxAdapter(
              child: hindiMovies.when(
                data: (movies) => ContentRow(
                  title: 'üéûÔ∏è Popular Hindi Movies',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),

            // Trending Hindi
            SliverToBoxAdapter(
              child: trendingHindi.when(
                data: (movies) => ContentRow(
                  title: 'üî• Trending Hindi Movies',
                  items: movies,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),
          ],

          // Korean Dramas (if enabled)
          if (languagePreferences.showKorean) ...[
            SliverToBoxAdapter(
              child: koreanDramas.when(
                data: (shows) => ContentRow(
                  title: 'üá∞üá∑ Popular Korean Dramas',
                  items: shows,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),

            // Trending Korean
            SliverToBoxAdapter(
              child: trendingKorean.when(
                data: (shows) => ContentRow(
                  title: 'üî• Trending Korean Dramas',
                  items: shows,
                ),
                loading: () => const SizedBox(height: 220),
                error: (_, __) => const SizedBox.shrink(),
              ),
            ),
          ],

          // Trending Movies
          SliverToBoxAdapter(
            child: trendingMovies.when(
              data: (movies) => ContentRow(
                title: 'Trending Movies',
                items: movies,
              ),
              loading: () => const SizedBox(height: 220),
              error: (_, __) => const SizedBox.shrink(),
            ),
          ),

          // Trending TV Shows
          SliverToBoxAdapter(
            child: trendingTVShows.when(
              data: (shows) => ContentRow(
                title: 'Trending TV Shows',
                items: shows,
              ),
              loading: () => const SizedBox(height: 220),
              error: (_, __) => const SizedBox.shrink(),
            ),
          ),

          // Popular Movies
          SliverToBoxAdapter(
            child: popularMovies.when(
              data: (movies) => ContentRow(
                title: 'Popular Movies',
                items: movies,
              ),
              loading: () => const SizedBox(height: 220),
              error: (_, __) => const SizedBox.shrink(),
            ),
          ),

          // Popular TV Shows
          SliverToBoxAdapter(
            child: popularTVShows.when(
              data: (shows) => ContentRow(
                title: 'Popular TV Shows',
                items: shows,
              ),
              loading: () => const SizedBox(height: 220),
              error: (_, __) => const SizedBox.shrink(),
            ),
          ),

          // Top Rated Movies
          SliverToBoxAdapter(
            child: topRatedMovies.when(
              data: (movies) => ContentRow(
                title: 'Top Rated Movies',
                items: movies,
              ),
              loading: () => const SizedBox(height: 220),
              error: (_, __) => const SizedBox.shrink(),
            ),
          ),

          // Bottom padding
          const SliverToBoxAdapter(
            child: SizedBox(height: 50),
          ),
        ],
      ),
    );
  }

  Widget _buildHeroBannerCarousel(BuildContext context, List<dynamic> items) {
    if (items.isEmpty) return const SizedBox(height: 500);

    return SizedBox(
      height: 600,
      child: PageView.builder(
        controller: _pageController,
        onPageChanged: (index) {
          setState(() => _currentBannerIndex = index);
        },
        itemCount: items.length,
        itemBuilder: (context, index) {
          final content = items[index];
          final backdropPath = content['backdrop_path'] ?? content['poster_path'];
          final title = content['title'] ?? content['name'] ?? 'Featured';
          final overview = content['overview'] ?? '';
          final tmdbId = content['id'];
          final mediaType = content['media_type'] ?? (content['title'] != null ? 'movie' : 'tv');

          return Stack(
            children: [
              // Background Image with Animation
              AnimatedOpacity(
                opacity: 1.0,
                duration: const Duration(milliseconds: 500),
                child: Container(
                  decoration: BoxDecoration(
                    image: backdropPath != null
                        ? DecorationImage(
                            image: CachedNetworkImageProvider(
                              '$tmdbImageBaseUrl/$backdropSize$backdropPath',
                            ),
                            fit: BoxFit.cover,
                          )
                        : null,
                    color: backdropPath == null ? const Color(0xFF2F2F2F) : null,
                  ),
                ),
              ),
              // Gradient Overlay
              Container(
                decoration: BoxDecoration(
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: [
                      Colors.transparent,
                      Colors.black.withOpacity(0.5),
                      const Color(0xFF141414),
                    ],
                    stops: const [0.0, 0.7, 1.0],
                  ),
                ),
              ),
              // Content
              Positioned(
                bottom: 80,
                left: 30,
                right: 30,
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    AnimatedOpacity(
                      opacity: 1.0,
                      duration: const Duration(milliseconds: 500),
                      child: Text(
                        title,
                        style: const TextStyle(
                          color: Colors.white,
                          fontSize: 42,
                          fontWeight: FontWeight.bold,
                          shadows: [
                            Shadow(
                              blurRadius: 10.0,
                              color: Colors.black,
                              offset: Offset(2, 2),
                            ),
                          ],
                        ),
                        maxLines: 2,
                        overflow: TextOverflow.ellipsis,
                      ),
                    ),
                    if (overview.isNotEmpty) ...[
                      const SizedBox(height: 12),
                      AnimatedOpacity(
                        opacity: 1.0,
                        duration: const Duration(milliseconds: 500),
                        child: Text(
                          overview,
                          style: const TextStyle(
                            color: Colors.white,
                            fontSize: 16,
                            height: 1.4,
                            shadows: [
                              Shadow(
                                blurRadius: 8.0,
                                color: Colors.black,
                                offset: Offset(1, 1),
                              ),
                            ],
                          ),
                          maxLines: 3,
                          overflow: TextOverflow.ellipsis,
                        ),
                      ),
                    ],
                    const SizedBox(height: 24),
                    Row(
                      children: [
                        ElevatedButton.icon(
                          onPressed: () => context.push('/media/$tmdbId', extra: mediaType),
                          icon: const Icon(Icons.play_arrow, size: 32, color: Colors.black),
                          label: const Text(
                            'Play',
                            style: TextStyle(
                              fontSize: 18,
                              fontWeight: FontWeight.bold,
                              color: Colors.black,
                            ),
                          ),
                          style: ElevatedButton.styleFrom(
                            backgroundColor: Colors.white,
                            padding: const EdgeInsets.symmetric(
                              horizontal: 24,
                              vertical: 12,
                            ),
                            shape: RoundedRectangleBorder(
                              borderRadius: BorderRadius.circular(6),
                            ),
                          ),
                        ),
                        const SizedBox(width: 12),
                        OutlinedButton.icon(
                          onPressed: () => context.push('/media/$tmdbId', extra: mediaType),
                          icon: const Icon(Icons.info_outline, size: 28, color: Colors.white),
                          label: const Text(
                            'More Info',
                            style: TextStyle(
                              fontSize: 18,
                              fontWeight: FontWeight.bold,
                              color: Colors.white,
                            ),
                          ),
                          style: OutlinedButton.styleFrom(
                            padding: const EdgeInsets.symmetric(
                              horizontal: 20,
                              vertical: 12,
                            ),
                            side: const BorderSide(color: Colors.white70, width: 2),
                            shape: RoundedRectangleBorder(
                              borderRadius: BorderRadius.circular(6),
                            ),
                          ),
                        ),
                      ],
                    ),
                  ],
                ),
              ),
              // Page Indicators
              Positioned(
                bottom: 30,
                left: 0,
                right: 0,
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: List.generate(
                    items.length,
                    (dotIndex) => AnimatedContainer(
                      duration: const Duration(milliseconds: 300),
                      margin: const EdgeInsets.symmetric(horizontal: 4),
                      width: _currentBannerIndex == dotIndex ? 24 : 8,
                      height: 3,
                      decoration: BoxDecoration(
                        color: _currentBannerIndex == dotIndex
                            ? const Color(0xFFE50914)
                            : Colors.white38,
                        borderRadius: BorderRadius.circular(2),
                      ),
                    ),
                  ),
                ),
              ),
            ],
          );
        },
      ),
    );
  }

  Widget _buildHeroBannerShimmer() {
    return Container(
      height: 600,
      color: const Color(0xFF2F2F2F),
      child: const Center(
        child: CircularProgressIndicator(color: Color(0xFFE50914)),
      ),
    );
  }
}
</file>

<file path="lib/screens/search_screen.dart">
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/providers/search_provider.dart';
import 'package:nivio/providers/service_providers.dart';
import 'package:nivio/widgets/search_result_card.dart';

class SearchScreen extends ConsumerStatefulWidget {
  const SearchScreen({super.key});

  @override
  ConsumerState<SearchScreen> createState() => _SearchScreenState();
}

class _SearchScreenState extends ConsumerState<SearchScreen> {
  final _controller = TextEditingController();
  final _scrollController = ScrollController();
  bool _isLoadingMore = false;
  bool _isInitialLoading = false;
  List<SearchResult> _allResults = [];
  int _currentPage = 1;
  int _totalPages = 1;

  @override
  void initState() {
    super.initState();
    _scrollController.addListener(_onScroll);
  }

  @override
  void dispose() {
    _controller.dispose();
    _scrollController.removeListener(_onScroll);
    _scrollController.dispose();
    super.dispose();
  }

  void _onScroll() {
    final scrollPosition = _scrollController.position.pixels;
    final maxExtent = _scrollController.position.maxScrollExtent;
    
    // Trigger when 500px from bottom
    if (scrollPosition >= maxExtent - 500) {
      _loadMoreResults();
    }
  }

  Future<void> _loadMoreResults() async {
    // Prevent multiple simultaneous loads
    if (_isLoadingMore) return;
    
    // Check if we have more pages to load
    if (_currentPage >= _totalPages) return;
    
    print('üìÑ Loading page ${_currentPage + 1} of $_totalPages');
    
    setState(() => _isLoadingMore = true);
    
    try {
      final query = ref.read(searchQueryProvider);
      final language = ref.read(searchLanguageFilterProvider);
      final sortBy = ref.read(searchSortProvider);
      final tmdb = ref.read(tmdbServiceProvider);
      
      // Fetch next page in background
      final nextPage = _currentPage + 1;
      final results = await tmdb.search(query, page: nextPage, language: language, sortBy: sortBy);
      
      print('‚úÖ Loaded ${results.results.length} more results for page $nextPage');
      
      if (mounted) {
        setState(() {
          _allResults.addAll(results.results);
          _currentPage = nextPage;
          _isLoadingMore = false;
        });
        
        // If we got very few results (likely filtered out people), try loading next page automatically
        if (results.results.length < 10 && _currentPage < _totalPages) {
          print('‚ö†Ô∏è Only got ${results.results.length} results, auto-loading next page...');
          Future.delayed(const Duration(milliseconds: 100), _loadMoreResults);
        }
      }
    } catch (e) {
      print('‚ùå Failed to load more results: $e');
      if (mounted) {
        setState(() => _isLoadingMore = false);
      }
    }
  }

  void _onSearch(String value) {
    if (value.trim().isNotEmpty) {
      ref.read(searchQueryProvider.notifier).state = value.trim();
      setState(() {
        _allResults = [];
        _currentPage = 1;
        _isInitialLoading = true;
      });
      _performInitialSearch();
    }
  }

  Future<void> _performInitialSearch() async {
    try {
      final query = ref.read(searchQueryProvider);
      final language = ref.read(searchLanguageFilterProvider);
      final sortBy = ref.read(searchSortProvider);
      final tmdb = ref.read(tmdbServiceProvider);
      
      print('üîç Initial search for "$query"');
      
      final results = await tmdb.search(query, page: 1, language: language, sortBy: sortBy);
      
      print('‚úÖ Found ${results.results.length} results (Page 1/${results.totalPages})');
      
      if (mounted) {
        setState(() {
          _allResults = List.from(results.results); // Create modifiable copy
          _currentPage = 1;
          _totalPages = results.totalPages;
          _isInitialLoading = false;
        });
        
        // If first page has very few results (likely filtered out people), auto-load more
        if (results.results.length < 10 && _totalPages > 1) {
          print('‚ö†Ô∏è Only got ${results.results.length} results on page 1, auto-loading page 2...');
          Future.delayed(const Duration(milliseconds: 100), _loadMoreResults);
        }
      }
    } catch (e) {
      print('‚ùå Search failed: $e');
      if (mounted) {
        setState(() => _isInitialLoading = false);
      }
    }
  }

  void _showFilterDialog() {
    showDialog(
      context: context,
      builder: (dialogContext) {
        String? selectedLanguage = ref.read(searchLanguageFilterProvider);
        String? selectedSort = ref.read(searchSortProvider);
        
        return StatefulBuilder(
          builder: (context, setDialogState) {
            return AlertDialog(
              backgroundColor: NivioTheme.netflixDarkGrey,
              title: const Text('Filter & Sort', style: TextStyle(color: Colors.white)),
              content: SingleChildScrollView(
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    // Language Filter
                    const Text('Language', style: TextStyle(color: Colors.white70, fontSize: 16)),
                    const SizedBox(height: 8),
                    Wrap(
                      spacing: 8,
                      runSpacing: 8,
                      children: [
                        _buildFilterChip('All', selectedLanguage == null, () {
                          setDialogState(() => selectedLanguage = null);
                        }),
                        _buildFilterChip('English', selectedLanguage == 'en', () {
                          setDialogState(() => selectedLanguage = 'en');
                        }),
                        _buildFilterChip('Tamil', selectedLanguage == 'ta', () {
                          setDialogState(() => selectedLanguage = 'ta');
                        }),
                        _buildFilterChip('Telugu', selectedLanguage == 'te', () {
                          setDialogState(() => selectedLanguage = 'te');
                        }),
                        _buildFilterChip('Hindi', selectedLanguage == 'hi', () {
                          setDialogState(() => selectedLanguage = 'hi');
                        }),
                        _buildFilterChip('Korean', selectedLanguage == 'ko', () {
                          setDialogState(() => selectedLanguage = 'ko');
                        }),
                        _buildFilterChip('Japanese', selectedLanguage == 'ja', () {
                          setDialogState(() => selectedLanguage = 'ja');
                        }),
                      ],
                    ),
                    const SizedBox(height: 16),
                    // Sort Options
                    const Text('Sort By', style: TextStyle(color: Colors.white70, fontSize: 16)),
                    const SizedBox(height: 8),
                    Wrap(
                      spacing: 8,
                      runSpacing: 8,
                      children: [
                        _buildFilterChip('Default', selectedSort == null, () {
                          setDialogState(() => selectedSort = null);
                        }),
                        _buildFilterChip('Rating', selectedSort == 'popularity', () {
                          setDialogState(() => selectedSort = 'popularity');
                        }),
                        _buildFilterChip('Title', selectedSort == 'title', () {
                          setDialogState(() => selectedSort = 'title');
                        }),
                        _buildFilterChip('Year', selectedSort == 'year', () {
                          setDialogState(() => selectedSort = 'year');
                        }),
                      ],
                    ),
                  ],
                ),
              ),
              actions: [
                TextButton(
                  onPressed: () => Navigator.pop(dialogContext),
                  child: const Text('Cancel', style: TextStyle(color: Colors.white70)),
                ),
                TextButton(
                  onPressed: () {
                    ref.read(searchLanguageFilterProvider.notifier).state = selectedLanguage;
                    ref.read(searchSortProvider.notifier).state = selectedSort;
                    Navigator.pop(dialogContext);
                    // Re-search with new filters
                    _performInitialSearch();
                  },
                  child: const Text('Apply', style: TextStyle(color: NivioTheme.netflixRed)),
                ),
              ],
            );
          },
        );
      },
    );
  }

  Widget _buildFilterChip(String label, bool isSelected, VoidCallback onTap) {
    return GestureDetector(
      onTap: onTap,
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
        decoration: BoxDecoration(
          color: isSelected ? NivioTheme.netflixRed : Colors.white.withOpacity(0.1),
          borderRadius: BorderRadius.circular(16),
          border: Border.all(
            color: isSelected ? NivioTheme.netflixRed : Colors.white.withOpacity(0.3),
          ),
        ),
        child: Text(
          label,
          style: TextStyle(
            color: isSelected ? Colors.white : Colors.white70,
            fontWeight: isSelected ? FontWeight.bold : FontWeight.normal,
          ),
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    final query = ref.watch(searchQueryProvider);
    final languageFilter = ref.watch(searchLanguageFilterProvider);
    final sortBy = ref.watch(searchSortProvider);

    return Scaffold(
      appBar: AppBar(
        backgroundColor: NivioTheme.netflixBlack,
        title: TextField(
          controller: _controller,
          autofocus: true,
          style: const TextStyle(color: Colors.white),
          decoration: InputDecoration(
            hintText: 'Search for movies or TV shows...',
            hintStyle: TextStyle(color: NivioTheme.netflixGrey),
            border: InputBorder.none,
            suffixIcon: _controller.text.isNotEmpty
                ? IconButton(
                    icon: const Icon(Icons.clear, color: Colors.white),
                    onPressed: () {
                      _controller.clear();
                      ref.read(searchQueryProvider.notifier).state = '';
                      setState(() {
                        _allResults = [];
                        _currentPage = 1;
                        _totalPages = 1;
                      });
                    },
                  )
                : null,
          ),
          onChanged: (value) {
            setState(() {});
          },
          onSubmitted: _onSearch,
        ),
        actions: [
          // Filter button with badge if filters are active
          Stack(
            children: [
              IconButton(
                icon: const Icon(Icons.filter_list, color: Colors.white),
                onPressed: _showFilterDialog,
              ),
              if (languageFilter != null || sortBy != null)
                Positioned(
                  right: 8,
                  top: 8,
                  child: Container(
                    width: 8,
                    height: 8,
                    decoration: const BoxDecoration(
                      color: NivioTheme.netflixRed,
                      shape: BoxShape.circle,
                    ),
                  ),
                ),
            ],
          ),
          IconButton(
            icon: const Icon(Icons.search, color: Colors.white),
            onPressed: () => _onSearch(_controller.text),
          ),
        ],
      ),
      body: query.isEmpty
          ? Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Icon(
                    Icons.search,
                    size: 80,
                    color: NivioTheme.netflixGrey,
                  ),
                  const SizedBox(height: 24),
                  Text(
                    'Search for movies and TV shows',
                    style: Theme.of(context).textTheme.headlineMedium,
                  ),
                  const SizedBox(height: 8),
                  Text(
                    'Type in the search box above to get started',
                    style: Theme.of(context).textTheme.bodyMedium,
                  ),
                ],
              ),
            )
          : _isInitialLoading
              ? const Center(
                  child: CircularProgressIndicator(
                    color: NivioTheme.netflixRed,
                  ),
                )
              : _allResults.isEmpty
                  ? Center(
                      child: Column(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          Icon(
                            Icons.movie_outlined,
                            size: 80,
                            color: NivioTheme.netflixGrey,
                          ),
                          const SizedBox(height: 24),
                          Text(
                            'No results found',
                            style: Theme.of(context).textTheme.headlineMedium,
                          ),
                          const SizedBox(height: 8),
                          Text(
                            'Try a different search term',
                            style: Theme.of(context).textTheme.bodyMedium,
                          ),
                        ],
                  ),
                )
              : Column(
                  children: [
                    // Results count and filters info
                    Container(
                      padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
                      color: Colors.white.withOpacity(0.05),
                      child: Row(
                        children: [
                          Text(
                            '${_allResults.length} results',
                            style: const TextStyle(color: Colors.white70, fontSize: 14),
                          ),
                          if (languageFilter != null || sortBy != null) ...[
                            const SizedBox(width: 8),
                            Container(
                              padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),
                              decoration: BoxDecoration(
                                color: NivioTheme.netflixRed.withOpacity(0.2),
                                borderRadius: BorderRadius.circular(12),
                              ),
                              child: Text(
                                'Filtered',
                                style: const TextStyle(
                                  color: NivioTheme.netflixRed,
                                  fontSize: 12,
                                  fontWeight: FontWeight.bold,
                                ),
                              ),
                            ),
                          ],
                          const Spacer(),
                          Text(
                            'Page $_currentPage/$_totalPages',
                            style: const TextStyle(color: Colors.white70, fontSize: 12),
                          ),
                        ],
                      ),
                    ),
                    // Results grid with key to preserve scroll position
                    Expanded(
                      child: GridView.builder(
                        key: PageStorageKey<String>('search_grid_$query'),
                        controller: _scrollController,
                        padding: const EdgeInsets.all(16),
                        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
                          crossAxisCount: 3,
                          childAspectRatio: 0.65,
                          crossAxisSpacing: 12,
                          mainAxisSpacing: 16,
                        ),
                        addAutomaticKeepAlives: true,
                        addRepaintBoundaries: true,
                        itemCount: _allResults.length + (_isLoadingMore ? 3 : 0),
                        itemBuilder: (context, index) {
                          if (index >= _allResults.length) {
                            // Loading indicator at the bottom (3 placeholders)
                            return Container(
                              decoration: BoxDecoration(
                                color: Colors.white.withOpacity(0.05),
                                borderRadius: BorderRadius.circular(4),
                              ),
                              child: const Center(
                                child: CircularProgressIndicator(
                                  color: NivioTheme.netflixRed,
                                  strokeWidth: 2,
                                ),
                              ),
                            );
                          }
                          final item = _allResults[index];
                          return SearchResultCard(
                            key: ValueKey('${item.mediaType}_${item.id}'),
                            media: item,
                          );
                        },
                      ),
                    ),
                  ],
                ),
    );
  }
}
</file>

<file path="lib/screens/settings_screen.dart">
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/providers/settings_providers.dart';
import 'package:nivio/providers/service_providers.dart';
import 'package:nivio/providers/watch_history_provider.dart';
import 'package:nivio/providers/language_preferences_provider.dart';
import 'package:url_launcher/url_launcher.dart';

/// Settings Screen - All settings are functional and persist via SharedPreferences
/// 
/// ‚úÖ INTEGRATED SETTINGS:
/// - Playback Speed: Applied to VideoPlayerController in player_screen.dart
/// - Video Quality: Used when fetching stream URLs from configured providers
/// - Clear Watch History: Deletes Hive watch_history box
/// - Sign Out: Calls Firebase Auth sign out
/// 
/// ‚è≥ SAVED BUT NOT YET INTEGRATED:
/// - Subtitles: Saved to SharedPreferences, needs subtitle parser integration
/// - Animations: Saved to SharedPreferences, needs conditional checks in widgets
/// 
/// See SETTINGS_INTEGRATION.md for complete integration details

class SettingsScreen extends ConsumerWidget {
  const SettingsScreen({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final user = FirebaseAuth.instance.currentUser;
    final playbackSpeed = ref.watch(playbackSpeedProvider);
    final videoQualityNotifier = ref.read(videoQualityProvider.notifier);
    final subtitlesEnabled = ref.watch(subtitlesEnabledProvider);
    final animationsEnabled = ref.watch(animationsEnabledProvider);
    final languagePreferences = ref.watch(languagePreferencesProvider);

    return Scaffold(
      appBar: AppBar(
        elevation: 0,
        backgroundColor: NivioTheme.netflixBlack,
        title: const Text(
          'Settings',
          style: TextStyle(
            color: Colors.white,
            fontSize: 24,
            fontWeight: FontWeight.bold,
          ),
        ),
        leading: IconButton(
          icon: const Icon(Icons.arrow_back, color: Colors.white),
          onPressed: () => context.pop(),
        ),
      ),
      body: ListView(
        children: [
          // Account Section
          _buildSectionHeader('Account'),
          _buildSettingsTile(
            icon: Icons.person_outline,
            title: 'User ID',
            subtitle: user?.uid ?? 'Not signed in',
            trailing: null,
          ),
          _buildSettingsTile(
            icon: Icons.login,
            title: 'Sign In Method',
            subtitle: 'Anonymous',
            trailing: null,
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // Content Preferences
          _buildSectionHeader('Content Preferences'),
          Padding(
            padding: const EdgeInsets.symmetric(horizontal: 16.0, vertical: 8.0),
            child: Text(
              'Choose which regional content appears on your home screen',
              style: TextStyle(
                color: Colors.white.withOpacity(0.6),
                fontSize: 13,
              ),
            ),
          ),
          _buildLanguageToggle(
            context: context,
            ref: ref,
            title: 'üéå Anime',
            subtitle: 'Japanese Animation',
            value: languagePreferences.showAnime,
            onChanged: (value) {
              ref.read(languagePreferencesProvider.notifier).toggleAnime(value);
            },
          ),
          _buildLanguageToggle(
            context: context,
            ref: ref,
            title: 'üé¨ Tamil',
            subtitle: 'Tamil Movies & Shows',
            value: languagePreferences.showTamil,
            onChanged: (value) {
              ref.read(languagePreferencesProvider.notifier).toggleTamil(value);
            },
          ),
          _buildLanguageToggle(
            context: context,
            ref: ref,
            title: 'üé• Telugu',
            subtitle: 'Telugu Movies & Shows',
            value: languagePreferences.showTelugu,
            onChanged: (value) {
              ref.read(languagePreferencesProvider.notifier).toggleTelugu(value);
            },
          ),
          _buildLanguageToggle(
            context: context,
            ref: ref,
            title: 'üéûÔ∏è Hindi',
            subtitle: 'Hindi Movies & Shows',
            value: languagePreferences.showHindi,
            onChanged: (value) {
              ref.read(languagePreferencesProvider.notifier).toggleHindi(value);
            },
          ),
          _buildLanguageToggle(
            context: context,
            ref: ref,
            title: 'üá∞üá∑ Korean',
            subtitle: 'Korean Dramas',
            value: languagePreferences.showKorean,
            onChanged: (value) {
              ref.read(languagePreferencesProvider.notifier).toggleKorean(value);
            },
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // Playback Settings
          _buildSectionHeader('Playback'),
          _buildSettingsTile(
            icon: Icons.speed,
            title: 'Default Playback Speed',
            subtitle: '${playbackSpeed}x',
            trailing: const Icon(Icons.chevron_right, color: Colors.white70),
            onTap: () {
              _showPlaybackSpeedDialog(context, ref);
            },
          ),
          _buildSettingsTile(
            icon: Icons.high_quality,
            title: 'Preferred Video Quality',
            subtitle: videoQualityNotifier.displayName,
            trailing: const Icon(Icons.chevron_right, color: Colors.white70),
            onTap: () {
              _showVideoQualityDialog(context, ref);
            },
          ),
          _buildSettingsTile(
            icon: Icons.subtitles_outlined,
            title: 'Enable Subtitles',
            subtitle: subtitlesEnabled ? 'Enabled' : 'Disabled',
            trailing: Switch(
              value: subtitlesEnabled,
              onChanged: (_) {
                ref.read(subtitlesEnabledProvider.notifier).toggle();
              },
              activeColor: NivioTheme.netflixRed,
            ),
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // Data & Storage
          _buildSectionHeader('Data & Storage'),
          _buildSettingsTile(
            icon: Icons.storage_outlined,
            title: 'Clear Watch History',
            subtitle: 'Remove all watch history data',
            trailing: const Icon(Icons.chevron_right, color: Colors.white70),
            onTap: () {
              _showClearHistoryDialog(context, ref);
            },
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // Appearance
          _buildSectionHeader('Appearance'),
          _buildSettingsTile(
            icon: Icons.dark_mode_outlined,
            title: 'Theme',
            subtitle: 'Dark (Netflix Style)',
            trailing: null,
          ),
          _buildSettingsTile(
            icon: Icons.auto_awesome_outlined,
            title: 'Animations',
            subtitle: animationsEnabled ? 'Enabled' : 'Disabled',
            trailing: Switch(
              value: animationsEnabled,
              onChanged: (_) {
                ref.read(animationsEnabledProvider.notifier).toggle();
              },
              activeColor: NivioTheme.netflixRed,
            ),
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // About
          _buildSectionHeader('About'),
          _buildSettingsTile(
            icon: Icons.info_outline,
            title: 'App Version',
            subtitle: '1.0.0',
            trailing: null,
          ),
          _buildSettingsTile(
            icon: Icons.policy_outlined,
            title: 'Privacy Policy',
            subtitle: 'View privacy policy',
            trailing: const Icon(Icons.open_in_new, color: Colors.white70),
            onTap: () async {
              final uri = Uri.parse('https://nivio-app.com/privacy');
              if (await canLaunchUrl(uri)) {
                await launchUrl(uri);
              }
            },
          ),
          _buildSettingsTile(
            icon: Icons.description_outlined,
            title: 'Terms of Service',
            subtitle: 'View terms of service',
            trailing: const Icon(Icons.open_in_new, color: Colors.white70),
            onTap: () async {
              final uri = Uri.parse('https://nivio-app.com/terms');
              if (await canLaunchUrl(uri)) {
                await launchUrl(uri);
              }
            },
          ),
          const Divider(color: NivioTheme.netflixDarkGrey, height: 1),

          // Sign Out
          _buildSectionHeader('Account Actions'),
          _buildSettingsTile(
            icon: Icons.logout,
            title: 'Sign Out',
            subtitle: 'Sign out of your account',
            trailing: const Icon(Icons.chevron_right, color: Colors.white70),
            onTap: () {
              _showSignOutDialog(context);
            },
            textColor: NivioTheme.netflixRed,
          ),

          const SizedBox(height: 40),
        ],
      ),
    );
  }

  Widget _buildSectionHeader(String title) {
    return Padding(
      padding: const EdgeInsets.fromLTRB(16, 24, 16, 8),
      child: Text(
        title,
        style: const TextStyle(
          color: Colors.white70,
          fontSize: 14,
          fontWeight: FontWeight.w600,
          letterSpacing: 1.2,
        ),
      ),
    );
  }

  Widget _buildSettingsTile({
    required IconData icon,
    required String title,
    required String subtitle,
    Widget? trailing,
    VoidCallback? onTap,
    Color? textColor,
  }) {
    return ListTile(
      leading: Icon(
        icon,
        color: textColor ?? Colors.white,
        size: 28,
      ),
      title: Text(
        title,
        style: TextStyle(
          color: textColor ?? Colors.white,
          fontSize: 16,
          fontWeight: FontWeight.w500,
        ),
      ),
      subtitle: Text(
        subtitle,
        style: const TextStyle(
          color: Colors.white60,
          fontSize: 13,
        ),
      ),
      trailing: trailing,
      onTap: onTap,
      contentPadding: const EdgeInsets.symmetric(horizontal: 16, vertical: 4),
    );
  }

  void _showClearHistoryDialog(BuildContext context, WidgetRef ref) async {
    showDialog(
      context: context,
      builder: (dialogContext) => AlertDialog(
        backgroundColor: NivioTheme.netflixDarkGrey,
        title: const Text(
          'Clear Watch History?',
          style: TextStyle(color: Colors.white),
        ),
        content: const Text(
          'This will remove all your watch history data. This action cannot be undone.',
          style: TextStyle(color: Colors.white70),
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(dialogContext),
            child: const Text(
              'Cancel',
              style: TextStyle(color: Colors.white70),
            ),
          ),
          TextButton(
            onPressed: () async {
              // Use the service to clear history (local + cloud)
              final historyService = ref.read(watchHistoryServiceProvider);
              await historyService.clearAllHistory();
              
              // Invalidate the provider to refresh UI
              ref.invalidate(continueWatchingProvider);
              
              if (dialogContext.mounted) {
                Navigator.pop(dialogContext);
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(
                    content: Text('Watch history cleared successfully'),
                    backgroundColor: NivioTheme.netflixRed,
                  ),
                );
              }
            },
            child: const Text(
              'Clear',
              style: TextStyle(color: NivioTheme.netflixRed),
            ),
          ),
        ],
      ),
    );
  }

  void _showPlaybackSpeedDialog(BuildContext context, WidgetRef ref) {
    final speeds = [0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0];
    
    showDialog(
      context: context,
      builder: (dialogContext) => AlertDialog(
        backgroundColor: NivioTheme.netflixDarkGrey,
        title: const Text(
          'Playback Speed',
          style: TextStyle(color: Colors.white),
        ),
        content: Column(
          mainAxisSize: MainAxisSize.min,
          children: speeds.map((speed) {
            final currentSpeed = ref.read(playbackSpeedProvider);
            return RadioListTile<double>(
              value: speed,
              groupValue: currentSpeed,
              activeColor: NivioTheme.netflixRed,
              title: Text(
                '${speed}x',
                style: const TextStyle(color: Colors.white),
              ),
              onChanged: (value) {
                if (value != null) {
                  ref.read(playbackSpeedProvider.notifier).setSpeed(value);
                  Navigator.pop(dialogContext);
                }
              },
            );
          }).toList(),
        ),
      ),
    );
  }

  void _showVideoQualityDialog(BuildContext context, WidgetRef ref) {
    final qualities = [
      {'value': 'auto', 'label': 'Auto (Best Available)'},
      {'value': '2160p', 'label': '4K (2160p)'},
      {'value': '1080p', 'label': 'Full HD (1080p)'},
      {'value': '720p', 'label': 'HD (720p)'},
      {'value': '480p', 'label': 'SD (480p)'},
    ];
    
    showDialog(
      context: context,
      builder: (dialogContext) => AlertDialog(
        backgroundColor: NivioTheme.netflixDarkGrey,
        title: const Text(
          'Video Quality',
          style: TextStyle(color: Colors.white),
        ),
        content: Column(
          mainAxisSize: MainAxisSize.min,
          children: qualities.map((quality) {
            final currentQuality = ref.read(videoQualityProvider);
            return RadioListTile<String>(
              value: quality['value']!,
              groupValue: currentQuality,
              activeColor: NivioTheme.netflixRed,
              title: Text(
                quality['label']!,
                style: const TextStyle(color: Colors.white),
              ),
              onChanged: (value) {
                if (value != null) {
                  ref.read(videoQualityProvider.notifier).setQuality(value);
                  Navigator.pop(dialogContext);
                }
              },
            );
          }).toList(),
        ),
      ),
    );
  }

  void _showSignOutDialog(BuildContext context) {
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        backgroundColor: NivioTheme.netflixDarkGrey,
        title: const Text(
          'Sign Out?',
          style: TextStyle(color: Colors.white),
        ),
        content: const Text(
          'Are you sure you want to sign out?',
          style: TextStyle(color: Colors.white70),
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context),
            child: const Text(
              'Cancel',
              style: TextStyle(color: Colors.white70),
            ),
          ),
          TextButton(
            onPressed: () async {
              await FirebaseAuth.instance.signOut();
              if (context.mounted) {
                Navigator.pop(context);
                context.go('/');
              }
            },
            child: const Text(
              'Sign Out',
              style: TextStyle(color: NivioTheme.netflixRed),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildLanguageToggle({
    required BuildContext context,
    required WidgetRef ref,
    required String title,
    required String subtitle,
    required bool value,
    required ValueChanged<bool> onChanged,
  }) {
    return Container(
      margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 4),
      decoration: BoxDecoration(
        color: Colors.white.withOpacity(0.05),
        borderRadius: BorderRadius.circular(12),
      ),
      child: SwitchListTile(
        title: Text(
          title,
          style: TextStyle(
            color: Colors.white.withOpacity(0.9),
            fontSize: 16,
            fontWeight: FontWeight.w500,
          ),
        ),
        subtitle: Text(
          subtitle,
          style: TextStyle(
            color: Colors.white.withOpacity(0.6),
            fontSize: 13,
          ),
        ),
        value: value,
        onChanged: onChanged,
        activeColor: const Color(0xFFE50914),
        activeTrackColor: const Color(0xFFE50914).withOpacity(0.5),
      ),
    );
  }
}
</file>

<file path="lib/services/streaming_service.dart">
import 'package:nivio/models/search_result.dart';
import 'package:nivio/models/stream_result.dart';

/// Service for fetching streaming URLs from various providers
/// Supports: vidsrc.cc, vidsrc.to, vidlink.pro
class StreamingService {
  StreamingService();

  /// Base URLs for streaming services (in priority order)
  static const List<Map<String, String>> _providers = [
    {'name': 'vidsrc.cc', 'url': 'https://vidsrc.cc/v2/embed'},
    {'name': 'vidsrc.to', 'url': 'https://vidsrc.to/embed'},
    {'name': 'vidlink', 'url': 'https://vidlink.pro'},
  ];

  /// Constructs streaming URLs from available providers
  /// 
  /// Tries providers in order: vidsrc.cc ‚Üí vidsrc.to ‚Üí vidlink.pro
  Future<StreamResult?> fetchStreamUrl({
    required SearchResult media,
    int season = 1,
    int episode = 1,
    String? preferredQuality,
    int providerIndex = 0,
  }) async {
    try {
      if (providerIndex >= _providers.length) {
        print('‚ùå All providers exhausted');
        return null;
      }

      final provider = _providers[providerIndex];
      final String streamUrl;
      
      // Construct URL based on media type and provider
      if (media.mediaType == 'movie') {
        // Movie URL formats:
        // vidsrc.cc: https://vidsrc.cc/v2/embed/movie/{tmdbId}
        // vidsrc.to: https://vidsrc.to/embed/movie/{tmdbId}
        // vidlink: https://vidlink.pro/movie/{tmdbId}?nextbutton=true
        if (provider['name'] == 'vidlink') {
          streamUrl = '${provider['url']}/movie/${media.id}?nextbutton=true';
        } else {
          streamUrl = '${provider['url']}/movie/${media.id}';
        }
        print('üé¨ Provider: ${provider['name']} | Movie URL: $streamUrl');
      } else {
        // TV show URL formats:
        // vidsrc.cc: https://vidsrc.cc/v2/embed/tv/{tmdbId}/{season}/{episode}
        // vidsrc.to: https://vidsrc.to/embed/tv/{tmdbId}/{season}/{episode}
        // vidlink: https://vidlink.pro/tv/{tmdbId}/{season}/{episode}?nextbutton=true
        if (provider['name'] == 'vidlink') {
          streamUrl = '${provider['url']}/tv/${media.id}/$season/$episode?nextbutton=true';
        } else {
          streamUrl = '${provider['url']}/tv/${media.id}/$season/$episode';
        }
        print('üì∫ Provider: ${provider['name']} | TV URL: $streamUrl (S${season}E${episode})');
      }

      return StreamResult(
        url: streamUrl,
        quality: preferredQuality ?? 'auto',
        provider: provider['name']!,
        subtitles: [],
        availableQualities: ['auto'],
      );
    } catch (e) {
      print('‚ùå Error constructing stream URL: $e');
      return null;
    }
  }
}

// StreamResult model moved to `lib/models/stream_result.dart`
</file>

<file path="lib/services/tmdb_service.dart">
import 'package:dio/dio.dart';
import 'package:nivio/core/constants.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/models/season_info.dart';

class TmdbService {
  final Dio _dio;

  TmdbService()
      : _dio = Dio(
          BaseOptions(
            baseUrl: tmdbBaseUrl,
            headers: {
              'User-Agent': 'Nivio/1.0 (compatible; +https://example.com)'
            },
            queryParameters: {
              'api_key': tmdbApiKey,
            },
          ),
        );

  /// Search for movies and TV shows (all languages) with pagination
  Future<SearchResults> search(String query, {int page = 1, String? language, String? sortBy}) async {
    try {
      final queryParams = {
        'query': query,
        'page': page,
        'include_adult': false,
        // NO default language parameter - searches all languages
        // NO region parameter - searches all regions
      };
      
      // Add optional language filter
      if (language != null && language.isNotEmpty) {
        queryParams['language'] = language;
      }
      
      final response = await _dio.get(
        '/3/search/multi',
        queryParameters: queryParams,
      );
      
      final results = SearchResults.fromJson(response.data);
      
      // Filter out 'person' type results, only keep movies and TV shows
      var filteredResults = results.results
          .where((item) => item.mediaType == 'movie' || item.mediaType == 'tv')
          .toList();
      
      // Apply sorting if specified
      if (sortBy != null) {
        switch (sortBy) {
          case 'popularity':
            filteredResults.sort((a, b) => (b.voteAverage ?? 0).compareTo(a.voteAverage ?? 0));
            break;
          case 'title':
            filteredResults.sort((a, b) {
              final titleA = (a.title ?? a.name ?? '').toLowerCase();
              final titleB = (b.title ?? b.name ?? '').toLowerCase();
              return titleA.compareTo(titleB);
            });
            break;
          case 'year':
            filteredResults.sort((a, b) {
              final yearA = a.releaseDate ?? a.firstAirDate ?? '';
              final yearB = b.releaseDate ?? b.firstAirDate ?? '';
              return yearB.compareTo(yearA); // Newest first
            });
            break;
        }
      }
      
      // Note: We can't accurately adjust totalPages after filtering because we don't know
      // how many people will be in future pages. The page count may be higher than actual content.
      return results.copyWith(results: filteredResults);
    } catch (e) {
      throw Exception('Failed to search: $e');
    }
  }

  /// Get series information (seasons, etc.)
  Future<SeriesInfo> getSeriesInfo(int showId) async {
    try {
      final response = await _dio.get('/3/tv/$showId');
      return SeriesInfo.fromJson(response.data);
    } catch (e) {
      throw Exception('Failed to get series info: $e');
    }
  }

  /// Get season information (episodes)
  Future<SeasonData> getSeasonInfo(int showId, int seasonNumber) async {
    try {
      final response = await _dio.get('/3/tv/$showId/season/$seasonNumber');
      return SeasonData.fromJson(response.data);
    } catch (e) {
      throw Exception('Failed to get season info: $e');
    }
  }

  /// Get poster URL
  String getPosterUrl(String? posterPath, {String size = posterSize}) {
    if (posterPath == null || posterPath.isEmpty) {
      return '';
    }
    return '$tmdbImageBaseUrl/$size$posterPath';
  }

  /// Get backdrop URL
  String getBackdropUrl(String? backdropPath, {String size = backdropSize}) {
    if (backdropPath == null || backdropPath.isEmpty) {
      return '';
    }
    return '$tmdbImageBaseUrl/$size$backdropPath';
  }

  /// Get trending content
  Future<List<dynamic>> getTrending(String mediaType, String timeWindow) async {
    try {
      final response = await _dio.get(
        '/3/trending/$mediaType/$timeWindow',
        queryParameters: {
          'language': 'en',
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get trending: $e');
    }
  }

  /// Get popular content
  Future<List<dynamic>> getPopular(String mediaType) async {
    try {
      final response = await _dio.get(
        '/3/$mediaType/popular',
        queryParameters: {
          'language': 'en',
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get popular: $e');
    }
  }

  /// Get top rated content
  Future<List<dynamic>> getTopRated(String mediaType) async {
    try {
      final response = await _dio.get(
        '/3/$mediaType/top_rated',
        queryParameters: {
          'language': 'en',
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get top rated: $e');
    }
  }

  /// Get latest Tamil OTT releases (movies released on streaming platforms in last 6 months)
  Future<List<dynamic>> getLatestTamilOTT() async {
    try {
      final sixMonthsAgo = DateTime.now().subtract(const Duration(days: 180));
      final response = await _dio.get(
        '/3/discover/movie',
        queryParameters: {
          'with_original_language': 'ta', // Tamil
          'sort_by': 'release_date.desc', // Latest first
          'release_date.gte': sixMonthsAgo.toIso8601String().split('T')[0],
          'with_release_type': '4|5|6', // 4=Digital, 5=Physical, 6=TV (includes OTT)
          'vote_count.gte': 5, // At least 5 votes to filter out unreleased
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get latest Tamil OTT releases: $e');
    }
  }

  /// Get content by language (e.g., 'te' for Telugu, 'hi' for Hindi, 'ko' for Korean)
  Future<List<dynamic>> getByLanguage(String mediaType, String language) async {
    try {
      final response = await _dio.get(
        '/3/discover/$mediaType',
        queryParameters: {
          'with_original_language': language,
          'sort_by': 'popularity.desc',
          'vote_count.gte': 10, // At least 10 votes
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get content by language: $e');
    }
  }

  /// Get trending content by language
  Future<List<dynamic>> getTrendingByLanguage(String mediaType, String language) async {
    try {
      final response = await _dio.get(
        '/3/discover/$mediaType',
        queryParameters: {
          'with_original_language': language,
          'sort_by': 'popularity.desc',
          'primary_release_date.gte': DateTime.now().subtract(const Duration(days: 730)).toIso8601String().split('T')[0], // Last 2 years instead of 1
          'vote_count.gte': 10, // Reduced from 50 to 10
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get trending by language: $e');
    }
  }

  /// Get anime (Japanese animation TV shows)
  Future<List<dynamic>> getAnime() async {
    try {
      final response = await _dio.get(
        '/3/discover/tv',
        queryParameters: {
          'with_genres': '16', // 16 = Animation genre
          'with_original_language': 'ja', // Japanese
          'sort_by': 'popularity.desc',
          'vote_count.gte': 20, // Reduced from 100 to 20
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get anime: $e');
    }
  }

  /// Get trending anime
  Future<List<dynamic>> getTrendingAnime() async {
    try {
      final response = await _dio.get(
        '/3/discover/tv',
        queryParameters: {
          'with_genres': '16',
          'with_original_language': 'ja',
          'sort_by': 'popularity.desc', // Changed from vote_count.desc to popularity.desc
          'vote_average.gte': 6.0, // Reduced from 7.5 to 6.0
          'vote_count.gte': 50, // Reduced from 500 to 50
          'first_air_date.gte': DateTime.now().subtract(const Duration(days: 1825)).toIso8601String().split('T')[0], // Last 5 years instead of 2
          'page': 1,
        },
      );
      return (response.data['results'] as List<dynamic>?) ?? [];
    } catch (e) {
      throw Exception('Failed to get trending anime: $e');
    }
  }


  /// Get movie details by ID
  Future<SearchResult> getMovieDetails(int movieId) async {
    try {
      final response = await _dio.get(
        '/3/movie/$movieId',
        queryParameters: {
          'language': 'en',
          'append_to_response': 'credits,videos',
        },
      );
      
      // Add media_type to response data since it's not in the API response
      final data = Map<String, dynamic>.from(response.data);
      data['media_type'] = 'movie';
      
      return SearchResult.fromJson(data);
    } catch (e) {
      throw Exception('Failed to get movie details: $e');
    }
  }

  /// Get movie details with videos (for trailer)
  Future<Map<String, dynamic>> getMovieDetailsWithVideos(int movieId) async {
    try {
      final response = await _dio.get(
        '/3/movie/$movieId',
        queryParameters: {
          'language': 'en',
          'append_to_response': 'videos',
        },
      );
      return response.data;
    } catch (e) {
      throw Exception('Failed to get movie details: $e');
    }
  }

  /// Get TV show details by ID
  Future<SearchResult> getTVShowDetails(int tvId) async {
    try {
      final response = await _dio.get(
        '/3/tv/$tvId',
        queryParameters: {
          'language': 'en',
          'append_to_response': 'credits,videos',
        },
      );
      
      // Add media_type to response data since it's not in the API response
      final data = Map<String, dynamic>.from(response.data);
      data['media_type'] = 'tv';
      
      return SearchResult.fromJson(data);
    } catch (e) {
      throw Exception('Failed to get TV show details: $e');
    }
  }

  /// Get TV show details with videos (for trailer)
  Future<Map<String, dynamic>> getTVShowDetailsWithVideos(int tvId) async {
    try {
      final response = await _dio.get(
        '/3/tv/$tvId',
        queryParameters: {
          'language': 'en',
          'append_to_response': 'videos',
        },
      );
      return response.data;
    } catch (e) {
      throw Exception('Failed to get TV show details: $e');
    }
  }
}
</file>

<file path="lib/services/watch_history_service.dart">
import 'dart:convert';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:hive_flutter/hive_flutter.dart';
import 'package:nivio/models/watch_history.dart';

class WatchHistoryService {
  final FirebaseFirestore _firestore = FirebaseFirestore.instance;
  final FirebaseAuth _auth = FirebaseAuth.instance;
  late Box<String> _historyBox;

  bool _initialized = false;

  /// Initialize Hive box
  Future<void> init() async {
    if (_initialized) return;

    await Hive.initFlutter();
    _historyBox = await Hive.openBox<String>('watch_history');
    _initialized = true;

    // Start background sync
    _startBackgroundSync();
  }

  /// Get current user ID
  String? get _userId => _auth.currentUser?.uid;

  /// Save watch progress (local-first, then sync to cloud)
  Future<void> updateProgress({
    required int tmdbId,
    required String mediaType,
    required String title,
    String? posterPath,
    required int currentSeason,
    required int currentEpisode,
    required int totalSeasons,
    int? totalEpisodes,
    required Duration lastPosition,
    required Duration totalDuration,
  }) async {
    if (!_initialized) await init();

    final id = '${_userId}_$tmdbId';
    final progressPercent = lastPosition.inSeconds / totalDuration.inSeconds;

    // Get existing history or create new
    WatchHistory history;
    final existingJson = _historyBox.get(id);
    if (existingJson != null) {
      final existingData = WatchHistory.fromJson(
        Map<String, dynamic>.from(
          // Simple JSON decode (Hive stores as String)
          _parseJson(existingJson),
        ),
      );
      history = existingData.copyWith(
        currentSeason: currentSeason,
        currentEpisode: currentEpisode,
        totalSeasons: totalSeasons,
        totalEpisodes: totalEpisodes,
        lastPositionSeconds: lastPosition.inSeconds,
        totalDurationSeconds: totalDuration.inSeconds,
        progressPercent: progressPercent,
        lastWatchedAt: DateTime.now(),
        isCompleted: progressPercent >= 0.95,
      );
    } else {
      history = WatchHistory(
        id: id,
        tmdbId: tmdbId,
        mediaType: mediaType,
        title: title,
        posterPath: posterPath,
        currentSeason: currentSeason,
        currentEpisode: currentEpisode,
        totalSeasons: totalSeasons,
        totalEpisodes: totalEpisodes,
        lastPositionSeconds: lastPosition.inSeconds,
        totalDurationSeconds: totalDuration.inSeconds,
        progressPercent: progressPercent,
        lastWatchedAt: DateTime.now(),
        createdAt: DateTime.now(),
        isCompleted: false,
        episodes: {},
      );
    }

    // Update episode progress for TV shows
    if (mediaType == 'tv') {
      final episodeKey = 's${currentSeason}e$currentEpisode';
      final episodeProgress = EpisodeProgress(
        season: currentSeason,
        episode: currentEpisode,
        lastPositionSeconds: lastPosition.inSeconds,
        totalDurationSeconds: totalDuration.inSeconds,
        isCompleted: progressPercent >= 0.95,
        watchedAt: DateTime.now(),
      );

      final updatedEpisodes = Map<String, EpisodeProgress>.from(history.episodes);
      updatedEpisodes[episodeKey] = episodeProgress;
      history = history.copyWith(episodes: updatedEpisodes);
    }

    // Save locally first (instant UI update)
    await _historyBox.put(id, _toJsonString(history.toJson()));

    // Queue cloud sync
    _syncToCloud(history);
  }

  /// Get all watch history
  Future<List<WatchHistory>> getAllHistory() async {
    if (!_initialized) await init();

    final histories = <WatchHistory>[];
    for (final key in _historyBox.keys) {
      final json = _historyBox.get(key);
      if (json != null) {
        histories.add(WatchHistory.fromJson(
          Map<String, dynamic>.from(_parseJson(json)),
        ));
      }
    }

    // Sort by last watched (newest first)
    histories.sort((a, b) => b.lastWatchedAt.compareTo(a.lastWatchedAt));
    return histories;
  }

  /// Get continue watching (incomplete items, including newly added with 0% progress)
  Future<List<WatchHistory>> getContinueWatching() async {
    final all = await getAllHistory();
    return all
        .where((h) => !h.isCompleted) // Show all incomplete items (including 0% progress)
        .take(10)
        .toList();
  }

  /// Get history for specific media
  Future<WatchHistory?> getHistory(int tmdbId) async {
    if (!_initialized) await init();

    final id = '${_userId}_$tmdbId';
    final json = _historyBox.get(id);
    if (json != null) {
      return WatchHistory.fromJson(
        Map<String, dynamic>.from(_parseJson(json)),
      );
    }
    return null;
  }

  /// Delete watch history
  Future<void> deleteHistory(int tmdbId) async {
    if (!_initialized) await init();

    final id = '${_userId}_$tmdbId';
    await _historyBox.delete(id);

    // Delete from cloud
    if (_userId != null) {
      await _firestore
          .collection('users')
          .doc(_userId)
          .collection('watchHistory')
          .doc(tmdbId.toString())
          .delete();
    }
  }

  /// Clear all watch history (local and cloud)
  Future<void> clearAllHistory() async {
    if (!_initialized) await init();

    // Clear local Hive box
    await _historyBox.clear();
    print('‚úÖ Cleared local watch history');

    // Clear from Firestore cloud if user is logged in
    if (_userId != null) {
      try {
        final snapshot = await _firestore
            .collection('users')
            .doc(_userId)
            .collection('watchHistory')
            .get();

        // Delete all documents in batch
        final batch = _firestore.batch();
        for (final doc in snapshot.docs) {
          batch.delete(doc.reference);
        }
        await batch.commit();
        print('‚úÖ Cleared cloud watch history');
      } catch (e) {
        print('‚ùå Failed to clear cloud history: $e');
      }
    }
  }

  /// Sync to Firestore (background)
  Future<void> _syncToCloud(WatchHistory history) async {
    if (_userId == null) return;

    try {
      await _firestore
          .collection('users')
          .doc(_userId)
          .collection('watchHistory')
          .doc(history.tmdbId.toString())
          .set(history.toJson(), SetOptions(merge: true));
    } catch (e) {
      print('‚ùå Failed to sync to cloud: $e');
      // Will retry on next sync cycle
    }
  }

  /// Background sync from Firestore (pull latest)
  Future<void> _pullFromCloud() async {
    if (_userId == null) return;

    try {
      final snapshot = await _firestore
          .collection('users')
          .doc(_userId)
          .collection('watchHistory')
          .get();

      for (final doc in snapshot.docs) {
        final cloudHistory = WatchHistory.fromJson(doc.data());
        final id = '${_userId}_${cloudHistory.tmdbId}';
        final localJson = _historyBox.get(id);

        // Merge: keep newer version
        if (localJson == null) {
          // No local version, use cloud
          await _historyBox.put(id, _toJsonString(cloudHistory.toJson()));
        } else {
          final localHistory = WatchHistory.fromJson(
            Map<String, dynamic>.from(_parseJson(localJson)),
          );

          // Compare timestamps, keep newer
          if (cloudHistory.lastWatchedAt.isAfter(localHistory.lastWatchedAt)) {
            await _historyBox.put(id, _toJsonString(cloudHistory.toJson()));
          }
        }
      }
    } catch (e) {
      print('‚ùå Failed to pull from cloud: $e');
    }
  }

  /// Start background sync (every 30 seconds)
  void _startBackgroundSync() {
    Future.delayed(const Duration(seconds: 30), () async {
      await _pullFromCloud();
      _startBackgroundSync(); // Recursive call
    });
  }

  /// Helper: Parse JSON string
  Map<String, dynamic> _parseJson(String jsonString) {
    return Map<String, dynamic>.from(jsonDecode(jsonString));
  }

  /// Helper: Convert to JSON string
  String _toJsonString(Map<String, dynamic> json) {
    return jsonEncode(json);
  }
}
</file>

<file path="lib/widgets/content_row.dart">
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:nivio/core/constants.dart';

class ContentRow extends StatelessWidget {
  final String title;
  final List<dynamic> items;

  const ContentRow({
    super.key,
    required this.title,
    required this.items,
  });

  @override
  Widget build(BuildContext context) {
    if (items.isEmpty) return const SizedBox.shrink();

    return Padding(
      padding: const EdgeInsets.only(bottom: 30),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Padding(
            padding: const EdgeInsets.symmetric(horizontal: 16),
            child: Text(
              title,
              style: const TextStyle(
                color: Colors.white,
                fontSize: 20,
                fontWeight: FontWeight.bold,
              ),
            ),
          ),
          const SizedBox(height: 12),
          SizedBox(
            height: 180,
            child: ListView.builder(
              scrollDirection: Axis.horizontal,
              padding: const EdgeInsets.symmetric(horizontal: 12),
              itemCount: items.length,
              itemBuilder: (context, index) {
                final item = items[index];
                final posterPath = item['poster_path'];
                final tmdbId = item['id'];
                final mediaType = item['media_type'] ?? 
                    (item['title'] != null ? 'movie' : 'tv');

                return Padding(
                  padding: const EdgeInsets.symmetric(horizontal: 4),
                  child: _AnimatedPosterCard(
                    posterPath: posterPath,
                    tmdbId: tmdbId,
                    mediaType: mediaType,
                  ),
                );
              },
            ),
          ),
        ],
      ),
    );
  }
}

class _AnimatedPosterCard extends StatefulWidget {
  final String? posterPath;
  final int tmdbId;
  final String mediaType;

  const _AnimatedPosterCard({
    required this.posterPath,
    required this.tmdbId,
    required this.mediaType,
  });

  @override
  State<_AnimatedPosterCard> createState() => _AnimatedPosterCardState();
}

class _AnimatedPosterCardState extends State<_AnimatedPosterCard> with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _scaleAnimation;
  late Animation<double> _elevationAnimation;

  @override
  void initState() {
    super.initState();
    _animationController = AnimationController(
      duration: const Duration(milliseconds: 250),
      vsync: this,
    );
    
    _scaleAnimation = Tween<double>(begin: 1.0, end: 1.05).animate(
      CurvedAnimation(parent: _animationController, curve: Curves.easeOutCubic),
    );
    
    _elevationAnimation = Tween<double>(begin: 0.0, end: 1.0).animate(
      CurvedAnimation(parent: _animationController, curve: Curves.easeOutCubic),
    );
  }

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return MouseRegion(
      onEnter: (_) {
        _animationController.forward();
      },
      onExit: (_) {
        _animationController.reverse();
      },
      child: GestureDetector(
        onTap: () => context.push('/media/${widget.tmdbId}?type=${widget.mediaType}'),
        child: AnimatedBuilder(
          animation: _animationController,
          builder: (context, child) {
            return Transform.scale(
              scale: _scaleAnimation.value,
              child: Container(
                width: 120,
                height: 170,
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(4),
                  color: const Color(0xFF2F2F2F),
                  boxShadow: [
                    BoxShadow(
                      color: Colors.black.withOpacity(0.5 * _elevationAnimation.value),
                      blurRadius: 15 * _elevationAnimation.value,
                      spreadRadius: 1 * _elevationAnimation.value,
                      offset: Offset(0, 6 * _elevationAnimation.value),
                    ),
                  ],
                ),
                child: ClipRRect(
                  borderRadius: BorderRadius.circular(4),
                  child: Stack(
                    children: [
                      // Poster Image
                      widget.posterPath != null
                          ? CachedNetworkImage(
                              imageUrl: '$tmdbImageBaseUrl/$posterSize${widget.posterPath}',
                              fit: BoxFit.cover,
                              width: double.infinity,
                              height: double.infinity,
                              placeholder: (context, url) => Container(
                                color: const Color(0xFF2F2F2F),
                                child: const Center(
                                  child: CircularProgressIndicator(
                                    color: Color(0xFFE50914),
                                    strokeWidth: 2,
                                  ),
                                ),
                              ),
                              errorWidget: (context, url, error) => Container(
                                color: const Color(0xFF2F2F2F),
                                child: const Icon(
                                  Icons.movie,
                                  color: Colors.white30,
                                  size: 40,
                                ),
                              ),
                            )
                          : const Icon(
                              Icons.movie,
                              color: Colors.white30,
                              size: 40,
                            ),
                      // Hover Overlay with Play Icon
                      AnimatedOpacity(
                        opacity: _elevationAnimation.value,
                        duration: const Duration(milliseconds: 200),
                        child: Container(
                          decoration: BoxDecoration(
                            gradient: LinearGradient(
                              begin: Alignment.topCenter,
                              end: Alignment.bottomCenter,
                              colors: [
                                Colors.transparent,
                                Colors.black.withOpacity(0.7),
                              ],
                            ),
                          ),
                          child: const Center(
                            child: Icon(
                              Icons.play_circle_fill,
                              color: Colors.white,
                              size: 48,
                            ),
                          ),
                        ),
                      ),
                    ],
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
</file>

<file path="lib/widgets/continue_watching_row.dart">
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/providers/watch_history_provider.dart';
import 'package:nivio/widgets/media_card.dart';
import 'package:nivio/core/theme.dart';

class ContinueWatchingRow extends ConsumerWidget {
  const ContinueWatchingRow({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final continueWatching = ref.watch(continueWatchingProvider);

    return continueWatching.when(
      data: (items) {
        if (items.isEmpty) {
          return SizedBox(
            height: 200,
            child: Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  Icon(
                    Icons.movie_outlined,
                    size: 64,
                    color: NivioTheme.netflixGrey,
                  ),
                  const SizedBox(height: 16),
                  Text(
                    'No continue watching items',
                    style: Theme.of(context).textTheme.bodyMedium,
                  ),
                  const SizedBox(height: 8),
                  Text(
                    'Search for shows and movies to start watching',
                    style: Theme.of(context).textTheme.bodySmall,
                  ),
                ],
              ),
            ),
          );
        }
        return SizedBox(
          height: 240,
          child: ListView.builder(
            scrollDirection: Axis.horizontal,
            itemCount: items.length,
            itemBuilder: (context, index) {
              return MediaCard(history: items[index]);
            },
          ),
        );
      },
      loading: () => const SizedBox(
        height: 200,
        child: Center(
          child: CircularProgressIndicator(
            color: NivioTheme.netflixRed,
          ),
        ),
      ),
      error: (err, stack) => SizedBox(
        height: 200,
        child: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Icon(
                Icons.error_outline,
                size: 48,
                color: NivioTheme.netflixRed,
              ),
              const SizedBox(height: 16),
              Text(
                'Error loading continue watching',
                style: Theme.of(context).textTheme.bodyMedium,
              ),
              const SizedBox(height: 8),
              Text(
                err.toString(),
                style: Theme.of(context).textTheme.bodySmall,
                textAlign: TextAlign.center,
              ),
            ],
          ),
        ),
      ),
    );
  }
}
</file>

<file path="lib/widgets/media_carousel.dart">
import 'package:flutter/material.dart';

class MediaCarousel extends StatelessWidget {
  const MediaCarousel({super.key});

  @override
  Widget build(BuildContext context) {
    // Placeholder for future implementation
    return const SizedBox.shrink();
  }
}
</file>

<file path="lib/widgets/search_result_card.dart">
import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/services/tmdb_service.dart';

class SearchResultCard extends StatelessWidget {
  final SearchResult media;

  const SearchResultCard({super.key, required this.media});

  @override
  Widget build(BuildContext context) {
    final tmdbService = TmdbService();
    final posterUrl = tmdbService.getPosterUrl(media.posterPath);

    return GestureDetector(
      onTap: () {
        context.push('/media/${media.id}?type=${media.mediaType}');
      },
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // Poster
          Expanded(
            child: ClipRRect(
              borderRadius: BorderRadius.circular(4),
              child: posterUrl.isNotEmpty
                  ? CachedNetworkImage(
                      imageUrl: posterUrl,
                      fit: BoxFit.cover,
                      width: double.infinity,
                      placeholder: (context, url) => Container(
                        color: NivioTheme.netflixDarkGrey,
                        child: const Center(
                          child: CircularProgressIndicator(
                            color: NivioTheme.netflixRed,
                          ),
                        ),
                      ),
                      errorWidget: (context, url, error) => Container(
                        color: NivioTheme.netflixDarkGrey,
                        child: const Icon(
                          Icons.movie,
                          color: NivioTheme.netflixGrey,
                          size: 48,
                        ),
                      ),
                    )
                  : Container(
                      color: NivioTheme.netflixDarkGrey,
                      child: const Icon(
                        Icons.movie,
                        color: NivioTheme.netflixGrey,
                        size: 48,
                      ),
                    ),
            ),
          ),
          const SizedBox(height: 4),
          // Title
          Text(
            media.title ?? media.name ?? 'Unknown',
            maxLines: 2,
            overflow: TextOverflow.ellipsis,
            style: Theme.of(context).textTheme.bodySmall,
          ),
          // Media type and year
          Row(
            children: [
              Container(
                padding: const EdgeInsets.symmetric(horizontal: 4, vertical: 2),
                decoration: BoxDecoration(
                  color: NivioTheme.netflixRed,
                  borderRadius: BorderRadius.circular(2),
                ),
                child: Text(
                  media.mediaType.toUpperCase(),
                  style: Theme.of(context).textTheme.bodySmall?.copyWith(
                        fontSize: 10,
                        fontWeight: FontWeight.bold,
                      ),
                ),
              ),
              const SizedBox(width: 4),
              Text(
                _getYear(),
                style: Theme.of(context).textTheme.bodySmall?.copyWith(
                      color: NivioTheme.netflixGrey,
                      fontSize: 10,
                    ),
              ),
            ],
          ),
        ],
      ),
    );
  }

  String _getYear() {
    final date = media.releaseDate ?? media.firstAirDate;
    if (date != null && date.isNotEmpty && date.length >= 4) {
      return date.substring(0, 4);
    }
    return 'N/A';
  }
}
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2025 Nirmal

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="linux/.gitignore">
flutter/ephemeral
</file>

<file path="linux/CMakeLists.txt">
# Project-level configuration.
cmake_minimum_required(VERSION 3.13)
project(runner LANGUAGES CXX)

# The name of the executable created for the application. Change this to change
# the on-disk name of your application.
set(BINARY_NAME "nivio")
# The unique GTK application identifier for this application. See:
# https://wiki.gnome.org/HowDoI/ChooseApplicationID
set(APPLICATION_ID "com.example.nivio")

# Explicitly opt in to modern CMake behaviors to avoid warnings with recent
# versions of CMake.
cmake_policy(SET CMP0063 NEW)

# Load bundled libraries from the lib/ directory relative to the binary.
set(CMAKE_INSTALL_RPATH "$ORIGIN/lib")

# Root filesystem for cross-building.
if(FLUTTER_TARGET_PLATFORM_SYSROOT)
  set(CMAKE_SYSROOT ${FLUTTER_TARGET_PLATFORM_SYSROOT})
  set(CMAKE_FIND_ROOT_PATH ${CMAKE_SYSROOT})
  set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
  set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)
  set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
  set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
endif()

# Define build configuration options.
if(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)
  set(CMAKE_BUILD_TYPE "Debug" CACHE
    STRING "Flutter build mode" FORCE)
  set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS
    "Debug" "Profile" "Release")
endif()

# Compilation settings that should be applied to most targets.
#
# Be cautious about adding new options here, as plugins use this function by
# default. In most cases, you should add new options to specific targets instead
# of modifying this function.
function(APPLY_STANDARD_SETTINGS TARGET)
  target_compile_features(${TARGET} PUBLIC cxx_std_14)
  target_compile_options(${TARGET} PRIVATE -Wall -Werror)
  target_compile_options(${TARGET} PRIVATE "$<$<NOT:$<CONFIG:Debug>>:-O3>")
  target_compile_definitions(${TARGET} PRIVATE "$<$<NOT:$<CONFIG:Debug>>:NDEBUG>")
endfunction()

# Flutter library and tool build rules.
set(FLUTTER_MANAGED_DIR "${CMAKE_CURRENT_SOURCE_DIR}/flutter")
add_subdirectory(${FLUTTER_MANAGED_DIR})

# System-level dependencies.
find_package(PkgConfig REQUIRED)
pkg_check_modules(GTK REQUIRED IMPORTED_TARGET gtk+-3.0)

# Application build; see runner/CMakeLists.txt.
add_subdirectory("runner")

# Run the Flutter tool portions of the build. This must not be removed.
add_dependencies(${BINARY_NAME} flutter_assemble)

# Only the install-generated bundle's copy of the executable will launch
# correctly, since the resources must in the right relative locations. To avoid
# people trying to run the unbundled copy, put it in a subdirectory instead of
# the default top-level location.
set_target_properties(${BINARY_NAME}
  PROPERTIES
  RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/intermediates_do_not_run"
)


# Generated plugin build rules, which manage building the plugins and adding
# them to the application.
include(flutter/generated_plugins.cmake)


# === Installation ===
# By default, "installing" just makes a relocatable bundle in the build
# directory.
set(BUILD_BUNDLE_DIR "${PROJECT_BINARY_DIR}/bundle")
if(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
  set(CMAKE_INSTALL_PREFIX "${BUILD_BUNDLE_DIR}" CACHE PATH "..." FORCE)
endif()

# Start with a clean build bundle directory every time.
install(CODE "
  file(REMOVE_RECURSE \"${BUILD_BUNDLE_DIR}/\")
  " COMPONENT Runtime)

set(INSTALL_BUNDLE_DATA_DIR "${CMAKE_INSTALL_PREFIX}/data")
set(INSTALL_BUNDLE_LIB_DIR "${CMAKE_INSTALL_PREFIX}/lib")

install(TARGETS ${BINARY_NAME} RUNTIME DESTINATION "${CMAKE_INSTALL_PREFIX}"
  COMPONENT Runtime)

install(FILES "${FLUTTER_ICU_DATA_FILE}" DESTINATION "${INSTALL_BUNDLE_DATA_DIR}"
  COMPONENT Runtime)

install(FILES "${FLUTTER_LIBRARY}" DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
  COMPONENT Runtime)

foreach(bundled_library ${PLUGIN_BUNDLED_LIBRARIES})
  install(FILES "${bundled_library}"
    DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
    COMPONENT Runtime)
endforeach(bundled_library)

# Copy the native assets provided by the build.dart from all packages.
set(NATIVE_ASSETS_DIR "${PROJECT_BUILD_DIR}native_assets/linux/")
install(DIRECTORY "${NATIVE_ASSETS_DIR}"
   DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
   COMPONENT Runtime)

# Fully re-copy the assets directory on each build to avoid having stale files
# from a previous install.
set(FLUTTER_ASSET_DIR_NAME "flutter_assets")
install(CODE "
  file(REMOVE_RECURSE \"${INSTALL_BUNDLE_DATA_DIR}/${FLUTTER_ASSET_DIR_NAME}\")
  " COMPONENT Runtime)
install(DIRECTORY "${PROJECT_BUILD_DIR}/${FLUTTER_ASSET_DIR_NAME}"
  DESTINATION "${INSTALL_BUNDLE_DATA_DIR}" COMPONENT Runtime)

# Install the AOT library on non-Debug builds only.
if(NOT CMAKE_BUILD_TYPE MATCHES "Debug")
  install(FILES "${AOT_LIBRARY}" DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
    COMPONENT Runtime)
endif()
</file>

<file path="linux/flutter/CMakeLists.txt">
# This file controls Flutter-level build steps. It should not be edited.
cmake_minimum_required(VERSION 3.10)

set(EPHEMERAL_DIR "${CMAKE_CURRENT_SOURCE_DIR}/ephemeral")

# Configuration provided via flutter tool.
include(${EPHEMERAL_DIR}/generated_config.cmake)

# TODO: Move the rest of this into files in ephemeral. See
# https://github.com/flutter/flutter/issues/57146.

# Serves the same purpose as list(TRANSFORM ... PREPEND ...),
# which isn't available in 3.10.
function(list_prepend LIST_NAME PREFIX)
    set(NEW_LIST "")
    foreach(element ${${LIST_NAME}})
        list(APPEND NEW_LIST "${PREFIX}${element}")
    endforeach(element)
    set(${LIST_NAME} "${NEW_LIST}" PARENT_SCOPE)
endfunction()

# === Flutter Library ===
# System-level dependencies.
find_package(PkgConfig REQUIRED)
pkg_check_modules(GTK REQUIRED IMPORTED_TARGET gtk+-3.0)
pkg_check_modules(GLIB REQUIRED IMPORTED_TARGET glib-2.0)
pkg_check_modules(GIO REQUIRED IMPORTED_TARGET gio-2.0)

set(FLUTTER_LIBRARY "${EPHEMERAL_DIR}/libflutter_linux_gtk.so")

# Published to parent scope for install step.
set(FLUTTER_LIBRARY ${FLUTTER_LIBRARY} PARENT_SCOPE)
set(FLUTTER_ICU_DATA_FILE "${EPHEMERAL_DIR}/icudtl.dat" PARENT_SCOPE)
set(PROJECT_BUILD_DIR "${PROJECT_DIR}/build/" PARENT_SCOPE)
set(AOT_LIBRARY "${PROJECT_DIR}/build/lib/libapp.so" PARENT_SCOPE)

list(APPEND FLUTTER_LIBRARY_HEADERS
  "fl_basic_message_channel.h"
  "fl_binary_codec.h"
  "fl_binary_messenger.h"
  "fl_dart_project.h"
  "fl_engine.h"
  "fl_json_message_codec.h"
  "fl_json_method_codec.h"
  "fl_message_codec.h"
  "fl_method_call.h"
  "fl_method_channel.h"
  "fl_method_codec.h"
  "fl_method_response.h"
  "fl_plugin_registrar.h"
  "fl_plugin_registry.h"
  "fl_standard_message_codec.h"
  "fl_standard_method_codec.h"
  "fl_string_codec.h"
  "fl_value.h"
  "fl_view.h"
  "flutter_linux.h"
)
list_prepend(FLUTTER_LIBRARY_HEADERS "${EPHEMERAL_DIR}/flutter_linux/")
add_library(flutter INTERFACE)
target_include_directories(flutter INTERFACE
  "${EPHEMERAL_DIR}"
)
target_link_libraries(flutter INTERFACE "${FLUTTER_LIBRARY}")
target_link_libraries(flutter INTERFACE
  PkgConfig::GTK
  PkgConfig::GLIB
  PkgConfig::GIO
)
add_dependencies(flutter flutter_assemble)

# === Flutter tool backend ===
# _phony_ is a non-existent file to force this command to run every time,
# since currently there's no way to get a full input/output list from the
# flutter tool.
add_custom_command(
  OUTPUT ${FLUTTER_LIBRARY} ${FLUTTER_LIBRARY_HEADERS}
    ${CMAKE_CURRENT_BINARY_DIR}/_phony_
  COMMAND ${CMAKE_COMMAND} -E env
    ${FLUTTER_TOOL_ENVIRONMENT}
    "${FLUTTER_ROOT}/packages/flutter_tools/bin/tool_backend.sh"
      ${FLUTTER_TARGET_PLATFORM} ${CMAKE_BUILD_TYPE}
  VERBATIM
)
add_custom_target(flutter_assemble DEPENDS
  "${FLUTTER_LIBRARY}"
  ${FLUTTER_LIBRARY_HEADERS}
)
</file>

<file path="linux/flutter/generated_plugin_registrant.cc">
//
//  Generated file. Do not edit.
//

// clang-format off

#include "generated_plugin_registrant.h"

#include <url_launcher_linux/url_launcher_plugin.h>

void fl_register_plugins(FlPluginRegistry* registry) {
  g_autoptr(FlPluginRegistrar) url_launcher_linux_registrar =
      fl_plugin_registry_get_registrar_for_plugin(registry, "UrlLauncherPlugin");
  url_launcher_plugin_register_with_registrar(url_launcher_linux_registrar);
}
</file>

<file path="linux/flutter/generated_plugin_registrant.h">
//
//  Generated file. Do not edit.
//

// clang-format off

#ifndef GENERATED_PLUGIN_REGISTRANT_
#define GENERATED_PLUGIN_REGISTRANT_

#include <flutter_linux/flutter_linux.h>

// Registers Flutter plugins.
void fl_register_plugins(FlPluginRegistry* registry);

#endif  // GENERATED_PLUGIN_REGISTRANT_
</file>

<file path="linux/flutter/generated_plugins.cmake">
#
# Generated file, do not edit.
#

list(APPEND FLUTTER_PLUGIN_LIST
  url_launcher_linux
)

list(APPEND FLUTTER_FFI_PLUGIN_LIST
)

set(PLUGIN_BUNDLED_LIBRARIES)

foreach(plugin ${FLUTTER_PLUGIN_LIST})
  add_subdirectory(flutter/ephemeral/.plugin_symlinks/${plugin}/linux plugins/${plugin})
  target_link_libraries(${BINARY_NAME} PRIVATE ${plugin}_plugin)
  list(APPEND PLUGIN_BUNDLED_LIBRARIES $<TARGET_FILE:${plugin}_plugin>)
  list(APPEND PLUGIN_BUNDLED_LIBRARIES ${${plugin}_bundled_libraries})
endforeach(plugin)

foreach(ffi_plugin ${FLUTTER_FFI_PLUGIN_LIST})
  add_subdirectory(flutter/ephemeral/.plugin_symlinks/${ffi_plugin}/linux plugins/${ffi_plugin})
  list(APPEND PLUGIN_BUNDLED_LIBRARIES ${${ffi_plugin}_bundled_libraries})
endforeach(ffi_plugin)
</file>

<file path="linux/runner/CMakeLists.txt">
cmake_minimum_required(VERSION 3.13)
project(runner LANGUAGES CXX)

# Define the application target. To change its name, change BINARY_NAME in the
# top-level CMakeLists.txt, not the value here, or `flutter run` will no longer
# work.
#
# Any new source files that you add to the application should be added here.
add_executable(${BINARY_NAME}
  "main.cc"
  "my_application.cc"
  "${FLUTTER_MANAGED_DIR}/generated_plugin_registrant.cc"
)

# Apply the standard set of build settings. This can be removed for applications
# that need different build settings.
apply_standard_settings(${BINARY_NAME})

# Add preprocessor definitions for the application ID.
add_definitions(-DAPPLICATION_ID="${APPLICATION_ID}")

# Add dependency libraries. Add any application-specific dependencies here.
target_link_libraries(${BINARY_NAME} PRIVATE flutter)
target_link_libraries(${BINARY_NAME} PRIVATE PkgConfig::GTK)

target_include_directories(${BINARY_NAME} PRIVATE "${CMAKE_SOURCE_DIR}")
</file>

<file path="linux/runner/main.cc">
#include "my_application.h"

int main(int argc, char** argv) {
  g_autoptr(MyApplication) app = my_application_new();
  return g_application_run(G_APPLICATION(app), argc, argv);
}
</file>

<file path="linux/runner/my_application.cc">
#include "my_application.h"

#include <flutter_linux/flutter_linux.h>
#ifdef GDK_WINDOWING_X11
#include <gdk/gdkx.h>
#endif

#include "flutter/generated_plugin_registrant.h"

struct _MyApplication {
  GtkApplication parent_instance;
  char** dart_entrypoint_arguments;
};

G_DEFINE_TYPE(MyApplication, my_application, GTK_TYPE_APPLICATION)

// Called when first Flutter frame received.
static void first_frame_cb(MyApplication* self, FlView* view) {
  gtk_widget_show(gtk_widget_get_toplevel(GTK_WIDGET(view)));
}

// Implements GApplication::activate.
static void my_application_activate(GApplication* application) {
  MyApplication* self = MY_APPLICATION(application);
  GtkWindow* window =
      GTK_WINDOW(gtk_application_window_new(GTK_APPLICATION(application)));

  // Use a header bar when running in GNOME as this is the common style used
  // by applications and is the setup most users will be using (e.g. Ubuntu
  // desktop).
  // If running on X and not using GNOME then just use a traditional title bar
  // in case the window manager does more exotic layout, e.g. tiling.
  // If running on Wayland assume the header bar will work (may need changing
  // if future cases occur).
  gboolean use_header_bar = TRUE;
#ifdef GDK_WINDOWING_X11
  GdkScreen* screen = gtk_window_get_screen(window);
  if (GDK_IS_X11_SCREEN(screen)) {
    const gchar* wm_name = gdk_x11_screen_get_window_manager_name(screen);
    if (g_strcmp0(wm_name, "GNOME Shell") != 0) {
      use_header_bar = FALSE;
    }
  }
#endif
  if (use_header_bar) {
    GtkHeaderBar* header_bar = GTK_HEADER_BAR(gtk_header_bar_new());
    gtk_widget_show(GTK_WIDGET(header_bar));
    gtk_header_bar_set_title(header_bar, "nivio");
    gtk_header_bar_set_show_close_button(header_bar, TRUE);
    gtk_window_set_titlebar(window, GTK_WIDGET(header_bar));
  } else {
    gtk_window_set_title(window, "nivio");
  }

  gtk_window_set_default_size(window, 1280, 720);

  g_autoptr(FlDartProject) project = fl_dart_project_new();
  fl_dart_project_set_dart_entrypoint_arguments(
      project, self->dart_entrypoint_arguments);

  FlView* view = fl_view_new(project);
  GdkRGBA background_color;
  // Background defaults to black, override it here if necessary, e.g. #00000000
  // for transparent.
  gdk_rgba_parse(&background_color, "#000000");
  fl_view_set_background_color(view, &background_color);
  gtk_widget_show(GTK_WIDGET(view));
  gtk_container_add(GTK_CONTAINER(window), GTK_WIDGET(view));

  // Show the window when Flutter renders.
  // Requires the view to be realized so we can start rendering.
  g_signal_connect_swapped(view, "first-frame", G_CALLBACK(first_frame_cb),
                           self);
  gtk_widget_realize(GTK_WIDGET(view));

  fl_register_plugins(FL_PLUGIN_REGISTRY(view));

  gtk_widget_grab_focus(GTK_WIDGET(view));
}

// Implements GApplication::local_command_line.
static gboolean my_application_local_command_line(GApplication* application,
                                                  gchar*** arguments,
                                                  int* exit_status) {
  MyApplication* self = MY_APPLICATION(application);
  // Strip out the first argument as it is the binary name.
  self->dart_entrypoint_arguments = g_strdupv(*arguments + 1);

  g_autoptr(GError) error = nullptr;
  if (!g_application_register(application, nullptr, &error)) {
    g_warning("Failed to register: %s", error->message);
    *exit_status = 1;
    return TRUE;
  }

  g_application_activate(application);
  *exit_status = 0;

  return TRUE;
}

// Implements GApplication::startup.
static void my_application_startup(GApplication* application) {
  // MyApplication* self = MY_APPLICATION(object);

  // Perform any actions required at application startup.

  G_APPLICATION_CLASS(my_application_parent_class)->startup(application);
}

// Implements GApplication::shutdown.
static void my_application_shutdown(GApplication* application) {
  // MyApplication* self = MY_APPLICATION(object);

  // Perform any actions required at application shutdown.

  G_APPLICATION_CLASS(my_application_parent_class)->shutdown(application);
}

// Implements GObject::dispose.
static void my_application_dispose(GObject* object) {
  MyApplication* self = MY_APPLICATION(object);
  g_clear_pointer(&self->dart_entrypoint_arguments, g_strfreev);
  G_OBJECT_CLASS(my_application_parent_class)->dispose(object);
}

static void my_application_class_init(MyApplicationClass* klass) {
  G_APPLICATION_CLASS(klass)->activate = my_application_activate;
  G_APPLICATION_CLASS(klass)->local_command_line =
      my_application_local_command_line;
  G_APPLICATION_CLASS(klass)->startup = my_application_startup;
  G_APPLICATION_CLASS(klass)->shutdown = my_application_shutdown;
  G_OBJECT_CLASS(klass)->dispose = my_application_dispose;
}

static void my_application_init(MyApplication* self) {}

MyApplication* my_application_new() {
  // Set the program name to the application ID, which helps various systems
  // like GTK and desktop environments map this running application to its
  // corresponding .desktop file. This ensures better integration by allowing
  // the application to be recognized beyond its binary name.
  g_set_prgname(APPLICATION_ID);

  return MY_APPLICATION(g_object_new(my_application_get_type(),
                                     "application-id", APPLICATION_ID, "flags",
                                     G_APPLICATION_NON_UNIQUE, nullptr));
}
</file>

<file path="linux/runner/my_application.h">
#ifndef FLUTTER_MY_APPLICATION_H_
#define FLUTTER_MY_APPLICATION_H_

#include <gtk/gtk.h>

G_DECLARE_FINAL_TYPE(MyApplication,
                     my_application,
                     MY,
                     APPLICATION,
                     GtkApplication)

/**
 * my_application_new:
 *
 * Creates a new Flutter-based application.
 *
 * Returns: a new #MyApplication.
 */
MyApplication* my_application_new();

#endif  // FLUTTER_MY_APPLICATION_H_
</file>

<file path="macos/.gitignore">
# Flutter-related
**/Flutter/ephemeral/
**/Pods/

# Xcode-related
**/dgph
**/xcuserdata/
</file>

<file path="macos/Flutter/Flutter-Debug.xcconfig">
#include "ephemeral/Flutter-Generated.xcconfig"
</file>

<file path="macos/Flutter/Flutter-Release.xcconfig">
#include "ephemeral/Flutter-Generated.xcconfig"
</file>

<file path="macos/Runner.xcodeproj/project.pbxproj">
// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 54;
	objects = {

/* Begin PBXAggregateTarget section */
		33CC111A2044C6BA0003C045 /* Flutter Assemble */ = {
			isa = PBXAggregateTarget;
			buildConfigurationList = 33CC111B2044C6BA0003C045 /* Build configuration list for PBXAggregateTarget "Flutter Assemble" */;
			buildPhases = (
				33CC111E2044C6BF0003C045 /* ShellScript */,
			);
			dependencies = (
			);
			name = "Flutter Assemble";
			productName = FLX;
		};
/* End PBXAggregateTarget section */

/* Begin PBXBuildFile section */
		331C80D8294CF71000263BE5 /* RunnerTests.swift in Sources */ = {isa = PBXBuildFile; fileRef = 331C80D7294CF71000263BE5 /* RunnerTests.swift */; };
		335BBD1B22A9A15E00E9071D /* GeneratedPluginRegistrant.swift in Sources */ = {isa = PBXBuildFile; fileRef = 335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */; };
		33CC10F12044A3C60003C045 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = 33CC10F02044A3C60003C045 /* AppDelegate.swift */; };
		33CC10F32044A3C60003C045 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = 33CC10F22044A3C60003C045 /* Assets.xcassets */; };
		33CC10F62044A3C60003C045 /* MainMenu.xib in Resources */ = {isa = PBXBuildFile; fileRef = 33CC10F42044A3C60003C045 /* MainMenu.xib */; };
		33CC11132044BFA00003C045 /* MainFlutterWindow.swift in Sources */ = {isa = PBXBuildFile; fileRef = 33CC11122044BFA00003C045 /* MainFlutterWindow.swift */; };
/* End PBXBuildFile section */

/* Begin PBXContainerItemProxy section */
		331C80D9294CF71000263BE5 /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = 33CC10E52044A3C60003C045 /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = 33CC10EC2044A3C60003C045;
			remoteInfo = Runner;
		};
		33CC111F2044C79F0003C045 /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = 33CC10E52044A3C60003C045 /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = 33CC111A2044C6BA0003C045;
			remoteInfo = FLX;
		};
/* End PBXContainerItemProxy section */

/* Begin PBXCopyFilesBuildPhase section */
		33CC110E2044A8840003C045 /* Bundle Framework */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = "";
			dstSubfolderSpec = 10;
			files = (
			);
			name = "Bundle Framework";
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXCopyFilesBuildPhase section */

/* Begin PBXFileReference section */
		331C80D5294CF71000263BE5 /* RunnerTests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = RunnerTests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
		331C80D7294CF71000263BE5 /* RunnerTests.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RunnerTests.swift; sourceTree = "<group>"; };
		333000ED22D3DE5D00554162 /* Warnings.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Warnings.xcconfig; sourceTree = "<group>"; };
		335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = GeneratedPluginRegistrant.swift; sourceTree = "<group>"; };
		33CC10ED2044A3C60003C045 /* nivio.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = "nivio.app"; sourceTree = BUILT_PRODUCTS_DIR; };
		33CC10F02044A3C60003C045 /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		33CC10F22044A3C60003C045 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; name = Assets.xcassets; path = Runner/Assets.xcassets; sourceTree = "<group>"; };
		33CC10F52044A3C60003C045 /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.xib; name = Base; path = Base.lproj/MainMenu.xib; sourceTree = "<group>"; };
		33CC10F72044A3C60003C045 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; name = Info.plist; path = Runner/Info.plist; sourceTree = "<group>"; };
		33CC11122044BFA00003C045 /* MainFlutterWindow.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainFlutterWindow.swift; sourceTree = "<group>"; };
		33CEB47222A05771004F2AC0 /* Flutter-Debug.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = "Flutter-Debug.xcconfig"; sourceTree = "<group>"; };
		33CEB47422A05771004F2AC0 /* Flutter-Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = "Flutter-Release.xcconfig"; sourceTree = "<group>"; };
		33CEB47722A0578A004F2AC0 /* Flutter-Generated.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; name = "Flutter-Generated.xcconfig"; path = "ephemeral/Flutter-Generated.xcconfig"; sourceTree = "<group>"; };
		33E51913231747F40026EE4D /* DebugProfile.entitlements */ = {isa = PBXFileReference; lastKnownFileType = text.plist.entitlements; path = DebugProfile.entitlements; sourceTree = "<group>"; };
		33E51914231749380026EE4D /* Release.entitlements */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.plist.entitlements; path = Release.entitlements; sourceTree = "<group>"; };
		33E5194F232828860026EE4D /* AppInfo.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = AppInfo.xcconfig; sourceTree = "<group>"; };
		7AFA3C8E1D35360C0083082E /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Release.xcconfig; sourceTree = "<group>"; };
		9740EEB21CF90195004384FC /* Debug.xcconfig */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text.xcconfig; path = Debug.xcconfig; sourceTree = "<group>"; };
/* End PBXFileReference section */

/* Begin PBXFrameworksBuildPhase section */
		331C80D2294CF70F00263BE5 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		33CC10EA2044A3C60003C045 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		331C80D6294CF71000263BE5 /* RunnerTests */ = {
			isa = PBXGroup;
			children = (
				331C80D7294CF71000263BE5 /* RunnerTests.swift */,
			);
			path = RunnerTests;
			sourceTree = "<group>";
		};
		33BA886A226E78AF003329D5 /* Configs */ = {
			isa = PBXGroup;
			children = (
				33E5194F232828860026EE4D /* AppInfo.xcconfig */,
				9740EEB21CF90195004384FC /* Debug.xcconfig */,
				7AFA3C8E1D35360C0083082E /* Release.xcconfig */,
				333000ED22D3DE5D00554162 /* Warnings.xcconfig */,
			);
			path = Configs;
			sourceTree = "<group>";
		};
		33CC10E42044A3C60003C045 = {
			isa = PBXGroup;
			children = (
				33FAB671232836740065AC1E /* Runner */,
				33CEB47122A05771004F2AC0 /* Flutter */,
				331C80D6294CF71000263BE5 /* RunnerTests */,
				33CC10EE2044A3C60003C045 /* Products */,
				D73912EC22F37F3D000D13A0 /* Frameworks */,
			);
			sourceTree = "<group>";
		};
		33CC10EE2044A3C60003C045 /* Products */ = {
			isa = PBXGroup;
			children = (
				33CC10ED2044A3C60003C045 /* nivio.app */,
				331C80D5294CF71000263BE5 /* RunnerTests.xctest */,
			);
			name = Products;
			sourceTree = "<group>";
		};
		33CC11242044D66E0003C045 /* Resources */ = {
			isa = PBXGroup;
			children = (
				33CC10F22044A3C60003C045 /* Assets.xcassets */,
				33CC10F42044A3C60003C045 /* MainMenu.xib */,
				33CC10F72044A3C60003C045 /* Info.plist */,
			);
			name = Resources;
			path = ..;
			sourceTree = "<group>";
		};
		33CEB47122A05771004F2AC0 /* Flutter */ = {
			isa = PBXGroup;
			children = (
				335BBD1A22A9A15E00E9071D /* GeneratedPluginRegistrant.swift */,
				33CEB47222A05771004F2AC0 /* Flutter-Debug.xcconfig */,
				33CEB47422A05771004F2AC0 /* Flutter-Release.xcconfig */,
				33CEB47722A0578A004F2AC0 /* Flutter-Generated.xcconfig */,
			);
			path = Flutter;
			sourceTree = "<group>";
		};
		33FAB671232836740065AC1E /* Runner */ = {
			isa = PBXGroup;
			children = (
				33CC10F02044A3C60003C045 /* AppDelegate.swift */,
				33CC11122044BFA00003C045 /* MainFlutterWindow.swift */,
				33E51913231747F40026EE4D /* DebugProfile.entitlements */,
				33E51914231749380026EE4D /* Release.entitlements */,
				33CC11242044D66E0003C045 /* Resources */,
				33BA886A226E78AF003329D5 /* Configs */,
			);
			path = Runner;
			sourceTree = "<group>";
		};
		D73912EC22F37F3D000D13A0 /* Frameworks */ = {
			isa = PBXGroup;
			children = (
			);
			name = Frameworks;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXNativeTarget section */
		331C80D4294CF70F00263BE5 /* RunnerTests */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 331C80DE294CF71000263BE5 /* Build configuration list for PBXNativeTarget "RunnerTests" */;
			buildPhases = (
				331C80D1294CF70F00263BE5 /* Sources */,
				331C80D2294CF70F00263BE5 /* Frameworks */,
				331C80D3294CF70F00263BE5 /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
				331C80DA294CF71000263BE5 /* PBXTargetDependency */,
			);
			name = RunnerTests;
			productName = RunnerTests;
			productReference = 331C80D5294CF71000263BE5 /* RunnerTests.xctest */;
			productType = "com.apple.product-type.bundle.unit-test";
		};
		33CC10EC2044A3C60003C045 /* Runner */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = 33CC10FB2044A3C60003C045 /* Build configuration list for PBXNativeTarget "Runner" */;
			buildPhases = (
				33CC10E92044A3C60003C045 /* Sources */,
				33CC10EA2044A3C60003C045 /* Frameworks */,
				33CC10EB2044A3C60003C045 /* Resources */,
				33CC110E2044A8840003C045 /* Bundle Framework */,
				3399D490228B24CF009A79C7 /* ShellScript */,
			);
			buildRules = (
			);
			dependencies = (
				33CC11202044C79F0003C045 /* PBXTargetDependency */,
			);
			name = Runner;
			productName = Runner;
			productReference = 33CC10ED2044A3C60003C045 /* nivio.app */;
			productType = "com.apple.product-type.application";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		33CC10E52044A3C60003C045 /* Project object */ = {
			isa = PBXProject;
			attributes = {
				BuildIndependentTargetsInParallel = YES;
				LastSwiftUpdateCheck = 0920;
				LastUpgradeCheck = 1510;
				ORGANIZATIONNAME = "";
				TargetAttributes = {
					331C80D4294CF70F00263BE5 = {
						CreatedOnToolsVersion = 14.0;
						TestTargetID = 33CC10EC2044A3C60003C045;
					};
					33CC10EC2044A3C60003C045 = {
						CreatedOnToolsVersion = 9.2;
						LastSwiftMigration = 1100;
						ProvisioningStyle = Automatic;
						SystemCapabilities = {
							com.apple.Sandbox = {
								enabled = 1;
							};
						};
					};
					33CC111A2044C6BA0003C045 = {
						CreatedOnToolsVersion = 9.2;
						ProvisioningStyle = Manual;
					};
				};
			};
			buildConfigurationList = 33CC10E82044A3C60003C045 /* Build configuration list for PBXProject "Runner" */;
			compatibilityVersion = "Xcode 9.3";
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = 33CC10E42044A3C60003C045;
			productRefGroup = 33CC10EE2044A3C60003C045 /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				33CC10EC2044A3C60003C045 /* Runner */,
				331C80D4294CF70F00263BE5 /* RunnerTests */,
				33CC111A2044C6BA0003C045 /* Flutter Assemble */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		331C80D3294CF70F00263BE5 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		33CC10EB2044A3C60003C045 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				33CC10F32044A3C60003C045 /* Assets.xcassets in Resources */,
				33CC10F62044A3C60003C045 /* MainMenu.xib in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXShellScriptBuildPhase section */
		3399D490228B24CF009A79C7 /* ShellScript */ = {
			isa = PBXShellScriptBuildPhase;
			alwaysOutOfDate = 1;
			buildActionMask = 2147483647;
			files = (
			);
			inputFileListPaths = (
			);
			inputPaths = (
			);
			outputFileListPaths = (
			);
			outputPaths = (
			);
			runOnlyForDeploymentPostprocessing = 0;
			shellPath = /bin/sh;
			shellScript = "echo \"$PRODUCT_NAME.app\" > \"$PROJECT_DIR\"/Flutter/ephemeral/.app_filename && \"$FLUTTER_ROOT\"/packages/flutter_tools/bin/macos_assemble.sh embed\n";
		};
		33CC111E2044C6BF0003C045 /* ShellScript */ = {
			isa = PBXShellScriptBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			inputFileListPaths = (
				Flutter/ephemeral/FlutterInputs.xcfilelist,
			);
			inputPaths = (
				Flutter/ephemeral/tripwire,
			);
			outputFileListPaths = (
				Flutter/ephemeral/FlutterOutputs.xcfilelist,
			);
			outputPaths = (
			);
			runOnlyForDeploymentPostprocessing = 0;
			shellPath = /bin/sh;
			shellScript = "\"$FLUTTER_ROOT\"/packages/flutter_tools/bin/macos_assemble.sh && touch Flutter/ephemeral/tripwire";
		};
/* End PBXShellScriptBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		331C80D1294CF70F00263BE5 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				331C80D8294CF71000263BE5 /* RunnerTests.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		33CC10E92044A3C60003C045 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				33CC11132044BFA00003C045 /* MainFlutterWindow.swift in Sources */,
				33CC10F12044A3C60003C045 /* AppDelegate.swift in Sources */,
				335BBD1B22A9A15E00E9071D /* GeneratedPluginRegistrant.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin PBXTargetDependency section */
		331C80DA294CF71000263BE5 /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = 33CC10EC2044A3C60003C045 /* Runner */;
			targetProxy = 331C80D9294CF71000263BE5 /* PBXContainerItemProxy */;
		};
		33CC11202044C79F0003C045 /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = 33CC111A2044C6BA0003C045 /* Flutter Assemble */;
			targetProxy = 33CC111F2044C79F0003C045 /* PBXContainerItemProxy */;
		};
/* End PBXTargetDependency section */

/* Begin PBXVariantGroup section */
		33CC10F42044A3C60003C045 /* MainMenu.xib */ = {
			isa = PBXVariantGroup;
			children = (
				33CC10F52044A3C60003C045 /* Base */,
			);
			name = MainMenu.xib;
			path = Runner;
			sourceTree = "<group>";
		};
/* End PBXVariantGroup section */

/* Begin XCBuildConfiguration section */
		331C80DB294CF71000263BE5 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/nivio.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/nivio";
			};
			name = Debug;
		};
		331C80DC294CF71000263BE5 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/nivio.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/nivio";
			};
			name = Release;
		};
		331C80DD294CF71000263BE5 /* Profile */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUNDLE_LOADER = "$(TEST_HOST)";
				CURRENT_PROJECT_VERSION = 1;
				GENERATE_INFOPLIST_FILE = YES;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio.RunnerTests;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SWIFT_VERSION = 5.0;
				TEST_HOST = "$(BUILT_PRODUCTS_DIR)/nivio.app/$(BUNDLE_EXECUTABLE_FOLDER_PATH)/nivio";
			};
			name = Profile;
		};
		338D0CE9231458BD00FA5F75 /* Profile */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++14";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CODE_SIGN_IDENTITY = "-";
				COPY_PHASE_STRIP = NO;
				DEAD_CODE_STRIPPING = YES;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu11;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				MACOSX_DEPLOYMENT_TARGET = 10.15;
				MTL_ENABLE_DEBUG_INFO = NO;
				SDKROOT = macosx;
				SWIFT_COMPILATION_MODE = wholemodule;
				SWIFT_OPTIMIZATION_LEVEL = "-O";
			};
			name = Profile;
		};
		338D0CEA231458BD00FA5F75 /* Profile */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CODE_SIGN_ENTITLEMENTS = Runner/DebugProfile.entitlements;
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
				);
				PROVISIONING_PROFILE_SPECIFIER = "";
				SWIFT_VERSION = 5.0;
			};
			name = Profile;
		};
		338D0CEB231458BD00FA5F75 /* Profile */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Manual;
				PRODUCT_NAME = "$(TARGET_NAME)";
			};
			name = Profile;
		};
		33CC10F92044A3C60003C045 /* Debug */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 9740EEB21CF90195004384FC /* Debug.xcconfig */;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++14";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CODE_SIGN_IDENTITY = "-";
				COPY_PHASE_STRIP = NO;
				DEAD_CODE_STRIPPING = YES;
				DEBUG_INFORMATION_FORMAT = dwarf;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu11;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				MACOSX_DEPLOYMENT_TARGET = 10.15;
				MTL_ENABLE_DEBUG_INFO = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = macosx;
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG;
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
			};
			name = Debug;
		};
		33CC10FA2044A3C60003C045 /* Release */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 7AFA3C8E1D35360C0083082E /* Release.xcconfig */;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++14";
				CLANG_CXX_LIBRARY = "libc++";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CODE_SIGN_IDENTITY = "-";
				COPY_PHASE_STRIP = NO;
				DEAD_CODE_STRIPPING = YES;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GCC_C_LANGUAGE_STANDARD = gnu11;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				MACOSX_DEPLOYMENT_TARGET = 10.15;
				MTL_ENABLE_DEBUG_INFO = NO;
				SDKROOT = macosx;
				SWIFT_COMPILATION_MODE = wholemodule;
				SWIFT_OPTIMIZATION_LEVEL = "-O";
			};
			name = Release;
		};
		33CC10FC2044A3C60003C045 /* Debug */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CODE_SIGN_ENTITLEMENTS = Runner/DebugProfile.entitlements;
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
				);
				PROVISIONING_PROFILE_SPECIFIER = "";
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				SWIFT_VERSION = 5.0;
			};
			name = Debug;
		};
		33CC10FD2044A3C60003C045 /* Release */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = 33E5194F232828860026EE4D /* AppInfo.xcconfig */;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				CLANG_ENABLE_MODULES = YES;
				CODE_SIGN_ENTITLEMENTS = Runner/Release.entitlements;
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				INFOPLIST_FILE = Runner/Info.plist;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
				);
				PROVISIONING_PROFILE_SPECIFIER = "";
				SWIFT_VERSION = 5.0;
			};
			name = Release;
		};
		33CC111C2044C6BA0003C045 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Manual;
				PRODUCT_NAME = "$(TARGET_NAME)";
			};
			name = Debug;
		};
		33CC111D2044C6BA0003C045 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				PRODUCT_NAME = "$(TARGET_NAME)";
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		331C80DE294CF71000263BE5 /* Build configuration list for PBXNativeTarget "RunnerTests" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				331C80DB294CF71000263BE5 /* Debug */,
				331C80DC294CF71000263BE5 /* Release */,
				331C80DD294CF71000263BE5 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		33CC10E82044A3C60003C045 /* Build configuration list for PBXProject "Runner" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				33CC10F92044A3C60003C045 /* Debug */,
				33CC10FA2044A3C60003C045 /* Release */,
				338D0CE9231458BD00FA5F75 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		33CC10FB2044A3C60003C045 /* Build configuration list for PBXNativeTarget "Runner" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				33CC10FC2044A3C60003C045 /* Debug */,
				33CC10FD2044A3C60003C045 /* Release */,
				338D0CEA231458BD00FA5F75 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		33CC111B2044C6BA0003C045 /* Build configuration list for PBXAggregateTarget "Flutter Assemble" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				33CC111C2044C6BA0003C045 /* Debug */,
				33CC111D2044C6BA0003C045 /* Release */,
				338D0CEB231458BD00FA5F75 /* Profile */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */
	};
	rootObject = 33CC10E52044A3C60003C045 /* Project object */;
}
</file>

<file path="macos/Runner.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDEDidComputeMac32BitWarning</key>
	<true/>
</dict>
</plist>
</file>

<file path="macos/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme">
<?xml version="1.0" encoding="UTF-8"?>
<Scheme
   LastUpgradeVersion = "1510"
   version = "1.3">
   <BuildAction
      parallelizeBuildables = "YES"
      buildImplicitDependencies = "YES">
      <BuildActionEntries>
         <BuildActionEntry
            buildForTesting = "YES"
            buildForRunning = "YES"
            buildForProfiling = "YES"
            buildForArchiving = "YES"
            buildForAnalyzing = "YES">
            <BuildableReference
               BuildableIdentifier = "primary"
               BlueprintIdentifier = "33CC10EC2044A3C60003C045"
               BuildableName = "nivio.app"
               BlueprintName = "Runner"
               ReferencedContainer = "container:Runner.xcodeproj">
            </BuildableReference>
         </BuildActionEntry>
      </BuildActionEntries>
   </BuildAction>
   <TestAction
      buildConfiguration = "Debug"
      selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.LLDB"
      selectedLauncherIdentifier = "Xcode.DebuggerFoundation.Launcher.LLDB"
      shouldUseLaunchSchemeArgsEnv = "YES">
      <MacroExpansion>
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "33CC10EC2044A3C60003C045"
            BuildableName = "nivio.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </MacroExpansion>
      <Testables>
         <TestableReference
            skipped = "NO"
            parallelizable = "YES">
            <BuildableReference
               BuildableIdentifier = "primary"
               BlueprintIdentifier = "331C80D4294CF70F00263BE5"
               BuildableName = "RunnerTests.xctest"
               BlueprintName = "RunnerTests"
               ReferencedContainer = "container:Runner.xcodeproj">
            </BuildableReference>
         </TestableReference>
      </Testables>
   </TestAction>
   <LaunchAction
      buildConfiguration = "Debug"
      selectedDebuggerIdentifier = "Xcode.DebuggerFoundation.Debugger.LLDB"
      selectedLauncherIdentifier = "Xcode.DebuggerFoundation.Launcher.LLDB"
      launchStyle = "0"
      useCustomWorkingDirectory = "NO"
      ignoresPersistentStateOnLaunch = "NO"
      debugDocumentVersioning = "YES"
      debugServiceExtension = "internal"
      enableGPUValidationMode = "1"
      allowLocationSimulation = "YES">
      <BuildableProductRunnable
         runnableDebuggingMode = "0">
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "33CC10EC2044A3C60003C045"
            BuildableName = "nivio.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </BuildableProductRunnable>
   </LaunchAction>
   <ProfileAction
      buildConfiguration = "Profile"
      shouldUseLaunchSchemeArgsEnv = "YES"
      savedToolIdentifier = ""
      useCustomWorkingDirectory = "NO"
      debugDocumentVersioning = "YES">
      <BuildableProductRunnable
         runnableDebuggingMode = "0">
         <BuildableReference
            BuildableIdentifier = "primary"
            BlueprintIdentifier = "33CC10EC2044A3C60003C045"
            BuildableName = "nivio.app"
            BlueprintName = "Runner"
            ReferencedContainer = "container:Runner.xcodeproj">
         </BuildableReference>
      </BuildableProductRunnable>
   </ProfileAction>
   <AnalyzeAction
      buildConfiguration = "Debug">
   </AnalyzeAction>
   <ArchiveAction
      buildConfiguration = "Release"
      revealArchiveInOrganizer = "YES">
   </ArchiveAction>
</Scheme>
</file>

<file path="macos/Runner.xcworkspace/contents.xcworkspacedata">
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "group:Runner.xcodeproj">
   </FileRef>
</Workspace>
</file>

<file path="macos/Runner.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDEDidComputeMac32BitWarning</key>
	<true/>
</dict>
</plist>
</file>

<file path="macos/Runner/AppDelegate.swift">
import Cocoa
import FlutterMacOS

@main
class AppDelegate: FlutterAppDelegate {
  override func applicationShouldTerminateAfterLastWindowClosed(_ sender: NSApplication) -> Bool {
    return true
  }

  override func applicationSupportsSecureRestorableState(_ app: NSApplication) -> Bool {
    return true
  }
}
</file>

<file path="macos/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json">
{
  "images" : [
    {
      "size" : "16x16",
      "idiom" : "mac",
      "filename" : "app_icon_16.png",
      "scale" : "1x"
    },
    {
      "size" : "16x16",
      "idiom" : "mac",
      "filename" : "app_icon_32.png",
      "scale" : "2x"
    },
    {
      "size" : "32x32",
      "idiom" : "mac",
      "filename" : "app_icon_32.png",
      "scale" : "1x"
    },
    {
      "size" : "32x32",
      "idiom" : "mac",
      "filename" : "app_icon_64.png",
      "scale" : "2x"
    },
    {
      "size" : "128x128",
      "idiom" : "mac",
      "filename" : "app_icon_128.png",
      "scale" : "1x"
    },
    {
      "size" : "128x128",
      "idiom" : "mac",
      "filename" : "app_icon_256.png",
      "scale" : "2x"
    },
    {
      "size" : "256x256",
      "idiom" : "mac",
      "filename" : "app_icon_256.png",
      "scale" : "1x"
    },
    {
      "size" : "256x256",
      "idiom" : "mac",
      "filename" : "app_icon_512.png",
      "scale" : "2x"
    },
    {
      "size" : "512x512",
      "idiom" : "mac",
      "filename" : "app_icon_512.png",
      "scale" : "1x"
    },
    {
      "size" : "512x512",
      "idiom" : "mac",
      "filename" : "app_icon_1024.png",
      "scale" : "2x"
    }
  ],
  "info" : {
    "version" : 1,
    "author" : "xcode"
  }
}
</file>

<file path="macos/Runner/Base.lproj/MainMenu.xib">
<?xml version="1.0" encoding="UTF-8"?>
<document type="com.apple.InterfaceBuilder3.Cocoa.XIB" version="3.0" toolsVersion="14490.70" targetRuntime="MacOSX.Cocoa" propertyAccessControl="none" useAutolayout="YES" customObjectInstantitationMethod="direct">
    <dependencies>
        <deployment identifier="macosx"/>
        <plugIn identifier="com.apple.InterfaceBuilder.CocoaPlugin" version="14490.70"/>
        <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
    </dependencies>
    <objects>
        <customObject id="-2" userLabel="File's Owner" customClass="NSApplication">
            <connections>
                <outlet property="delegate" destination="Voe-Tx-rLC" id="GzC-gU-4Uq"/>
            </connections>
        </customObject>
        <customObject id="-1" userLabel="First Responder" customClass="FirstResponder"/>
        <customObject id="-3" userLabel="Application" customClass="NSObject"/>
        <customObject id="Voe-Tx-rLC" customClass="AppDelegate" customModule="Runner" customModuleProvider="target">
            <connections>
                <outlet property="applicationMenu" destination="uQy-DD-JDr" id="XBo-yE-nKs"/>
                <outlet property="mainFlutterWindow" destination="QvC-M9-y7g" id="gIp-Ho-8D9"/>
            </connections>
        </customObject>
        <customObject id="YLy-65-1bz" customClass="NSFontManager"/>
        <menu title="Main Menu" systemMenu="main" id="AYu-sK-qS6">
            <items>
                <menuItem title="APP_NAME" id="1Xt-HY-uBw">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="APP_NAME" systemMenu="apple" id="uQy-DD-JDr">
                        <items>
                            <menuItem title="About APP_NAME" id="5kV-Vb-QxS">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="orderFrontStandardAboutPanel:" target="-1" id="Exp-CZ-Vem"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="VOq-y0-SEH"/>
                            <menuItem title="Preferences‚Ä¶" keyEquivalent="," id="BOF-NM-1cW"/>
                            <menuItem isSeparatorItem="YES" id="wFC-TO-SCJ"/>
                            <menuItem title="Services" id="NMo-om-nkz">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Services" systemMenu="services" id="hz9-B4-Xy5"/>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="4je-JR-u6R"/>
                            <menuItem title="Hide APP_NAME" keyEquivalent="h" id="Olw-nP-bQN">
                                <connections>
                                    <action selector="hide:" target="-1" id="PnN-Uc-m68"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Hide Others" keyEquivalent="h" id="Vdr-fp-XzO">
                                <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                <connections>
                                    <action selector="hideOtherApplications:" target="-1" id="VT4-aY-XCT"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Show All" id="Kd2-mp-pUS">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="unhideAllApplications:" target="-1" id="Dhg-Le-xox"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="kCx-OE-vgT"/>
                            <menuItem title="Quit APP_NAME" keyEquivalent="q" id="4sb-4s-VLi">
                                <connections>
                                    <action selector="terminate:" target="-1" id="Te7-pn-YzF"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Edit" id="5QF-Oa-p0T">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Edit" id="W48-6f-4Dl">
                        <items>
                            <menuItem title="Undo" keyEquivalent="z" id="dRJ-4n-Yzg">
                                <connections>
                                    <action selector="undo:" target="-1" id="M6e-cu-g7V"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Redo" keyEquivalent="Z" id="6dh-zS-Vam">
                                <connections>
                                    <action selector="redo:" target="-1" id="oIA-Rs-6OD"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="WRV-NI-Exz"/>
                            <menuItem title="Cut" keyEquivalent="x" id="uRl-iY-unG">
                                <connections>
                                    <action selector="cut:" target="-1" id="YJe-68-I9s"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Copy" keyEquivalent="c" id="x3v-GG-iWU">
                                <connections>
                                    <action selector="copy:" target="-1" id="G1f-GL-Joy"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Paste" keyEquivalent="v" id="gVA-U4-sdL">
                                <connections>
                                    <action selector="paste:" target="-1" id="UvS-8e-Qdg"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Paste and Match Style" keyEquivalent="V" id="WeT-3V-zwk">
                                <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                <connections>
                                    <action selector="pasteAsPlainText:" target="-1" id="cEh-KX-wJQ"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Delete" id="pa3-QI-u2k">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="delete:" target="-1" id="0Mk-Ml-PaM"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Select All" keyEquivalent="a" id="Ruw-6m-B2m">
                                <connections>
                                    <action selector="selectAll:" target="-1" id="VNm-Mi-diN"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="uyl-h8-XO2"/>
                            <menuItem title="Find" id="4EN-yA-p0u">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Find" id="1b7-l0-nxx">
                                    <items>
                                        <menuItem title="Find‚Ä¶" tag="1" keyEquivalent="f" id="Xz5-n4-O0W">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="cD7-Qs-BN4"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find and Replace‚Ä¶" tag="12" keyEquivalent="f" id="YEy-JH-Tfz">
                                            <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="WD3-Gg-5AJ"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find Next" tag="2" keyEquivalent="g" id="q09-fT-Sye">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="NDo-RZ-v9R"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find Previous" tag="3" keyEquivalent="G" id="OwM-mh-QMV">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="HOh-sY-3ay"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Use Selection for Find" tag="7" keyEquivalent="e" id="buJ-ug-pKt">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="U76-nv-p5D"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Jump to Selection" keyEquivalent="j" id="S0p-oC-mLd">
                                            <connections>
                                                <action selector="centerSelectionInVisibleArea:" target="-1" id="IOG-6D-g5B"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Spelling and Grammar" id="Dv1-io-Yv7">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Spelling" id="3IN-sU-3Bg">
                                    <items>
                                        <menuItem title="Show Spelling and Grammar" keyEquivalent=":" id="HFo-cy-zxI">
                                            <connections>
                                                <action selector="showGuessPanel:" target="-1" id="vFj-Ks-hy3"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Check Document Now" keyEquivalent=";" id="hz2-CU-CR7">
                                            <connections>
                                                <action selector="checkSpelling:" target="-1" id="fz7-VC-reM"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="bNw-od-mp5"/>
                                        <menuItem title="Check Spelling While Typing" id="rbD-Rh-wIN">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleContinuousSpellChecking:" target="-1" id="7w6-Qz-0kB"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Check Grammar With Spelling" id="mK6-2p-4JG">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleGrammarChecking:" target="-1" id="muD-Qn-j4w"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Correct Spelling Automatically" id="78Y-hA-62v">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticSpellingCorrection:" target="-1" id="2lM-Qi-WAP"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Substitutions" id="9ic-FL-obx">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Substitutions" id="FeM-D8-WVr">
                                    <items>
                                        <menuItem title="Show Substitutions" id="z6F-FW-3nz">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="orderFrontSubstitutionsPanel:" target="-1" id="oku-mr-iSq"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="gPx-C9-uUO"/>
                                        <menuItem title="Smart Copy/Paste" id="9yt-4B-nSM">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleSmartInsertDelete:" target="-1" id="3IJ-Se-DZD"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Quotes" id="hQb-2v-fYv">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticQuoteSubstitution:" target="-1" id="ptq-xd-QOA"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Dashes" id="rgM-f4-ycn">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticDashSubstitution:" target="-1" id="oCt-pO-9gS"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Links" id="cwL-P1-jid">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticLinkDetection:" target="-1" id="Gip-E3-Fov"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Data Detectors" id="tRr-pd-1PS">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticDataDetection:" target="-1" id="R1I-Nq-Kbl"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Text Replacement" id="HFQ-gK-NFA">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticTextReplacement:" target="-1" id="DvP-Fe-Py6"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Transformations" id="2oI-Rn-ZJC">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Transformations" id="c8a-y6-VQd">
                                    <items>
                                        <menuItem title="Make Upper Case" id="vmV-6d-7jI">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="uppercaseWord:" target="-1" id="sPh-Tk-edu"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Make Lower Case" id="d9M-CD-aMd">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="lowercaseWord:" target="-1" id="iUZ-b5-hil"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Capitalize" id="UEZ-Bs-lqG">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="capitalizeWord:" target="-1" id="26H-TL-nsh"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Speech" id="xrE-MZ-jX0">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Speech" id="3rS-ZA-NoH">
                                    <items>
                                        <menuItem title="Start Speaking" id="Ynk-f8-cLZ">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="startSpeaking:" target="-1" id="654-Ng-kyl"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Stop Speaking" id="Oyz-dy-DGm">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="stopSpeaking:" target="-1" id="dX8-6p-jy9"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="View" id="H8h-7b-M4v">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="View" id="HyV-fh-RgO">
                        <items>
                            <menuItem title="Enter Full Screen" keyEquivalent="f" id="4J7-dP-txa">
                                <modifierMask key="keyEquivalentModifierMask" control="YES" command="YES"/>
                                <connections>
                                    <action selector="toggleFullScreen:" target="-1" id="dU3-MA-1Rq"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Window" id="aUF-d1-5bR">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Window" systemMenu="window" id="Td7-aD-5lo">
                        <items>
                            <menuItem title="Minimize" keyEquivalent="m" id="OY7-WF-poV">
                                <connections>
                                    <action selector="performMiniaturize:" target="-1" id="VwT-WD-YPe"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Zoom" id="R4o-n2-Eq4">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="performZoom:" target="-1" id="DIl-cC-cCs"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="eu3-7i-yIM"/>
                            <menuItem title="Bring All to Front" id="LE2-aR-0XJ">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="arrangeInFront:" target="-1" id="DRN-fu-gQh"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Help" id="EPT-qC-fAb">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Help" systemMenu="help" id="rJ0-wn-3NY"/>
                </menuItem>
            </items>
            <point key="canvasLocation" x="142" y="-258"/>
        </menu>
        <window title="APP_NAME" allowsToolTipsWhenApplicationIsInactive="NO" autorecalculatesKeyViewLoop="NO" releasedWhenClosed="NO" animationBehavior="default" id="QvC-M9-y7g" customClass="MainFlutterWindow" customModule="Runner" customModuleProvider="target">
            <windowStyleMask key="styleMask" titled="YES" closable="YES" miniaturizable="YES" resizable="YES"/>
            <rect key="contentRect" x="335" y="390" width="800" height="600"/>
            <rect key="screenRect" x="0.0" y="0.0" width="2560" height="1577"/>
            <view key="contentView" wantsLayer="YES" id="EiT-Mj-1SZ">
                <rect key="frame" x="0.0" y="0.0" width="800" height="600"/>
                <autoresizingMask key="autoresizingMask"/>
            </view>
        </window>
    </objects>
</document>
</file>

<file path="macos/Runner/Configs/AppInfo.xcconfig">
// Application-level settings for the Runner target.
//
// This may be replaced with something auto-generated from metadata (e.g., pubspec.yaml) in the
// future. If not, the values below would default to using the project name when this becomes a
// 'flutter create' template.

// The application's name. By default this is also the title of the Flutter window.
PRODUCT_NAME = nivio

// The application's bundle identifier
PRODUCT_BUNDLE_IDENTIFIER = com.example.nivio

// The copyright displayed in application information
PRODUCT_COPYRIGHT = Copyright ¬© 2025 com.example. All rights reserved.
</file>

<file path="macos/Runner/Configs/Debug.xcconfig">
#include "../../Flutter/Flutter-Debug.xcconfig"
#include "Warnings.xcconfig"
</file>

<file path="macos/Runner/Configs/Release.xcconfig">
#include "../../Flutter/Flutter-Release.xcconfig"
#include "Warnings.xcconfig"
</file>

<file path="macos/Runner/Configs/Warnings.xcconfig">
WARNING_CFLAGS = -Wall -Wconditional-uninitialized -Wnullable-to-nonnull-conversion -Wmissing-method-return-type -Woverlength-strings
GCC_WARN_UNDECLARED_SELECTOR = YES
CLANG_UNDEFINED_BEHAVIOR_SANITIZER_NULLABILITY = YES
CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE
CLANG_WARN__DUPLICATE_METHOD_MATCH = YES
CLANG_WARN_PRAGMA_PACK = YES
CLANG_WARN_STRICT_PROTOTYPES = YES
CLANG_WARN_COMMA = YES
GCC_WARN_STRICT_SELECTOR_MATCH = YES
CLANG_WARN_OBJC_REPEATED_USE_OF_WEAK = YES
CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES
GCC_WARN_SHADOW = YES
CLANG_WARN_UNREACHABLE_CODE = YES
</file>

<file path="macos/Runner/DebugProfile.entitlements">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>com.apple.security.app-sandbox</key>
	<true/>
	<key>com.apple.security.cs.allow-jit</key>
	<true/>
	<key>com.apple.security.network.server</key>
	<true/>
</dict>
</plist>
</file>

<file path="macos/Runner/Info.plist">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>CFBundleDevelopmentRegion</key>
	<string>$(DEVELOPMENT_LANGUAGE)</string>
	<key>CFBundleExecutable</key>
	<string>$(EXECUTABLE_NAME)</string>
	<key>CFBundleIconFile</key>
	<string></string>
	<key>CFBundleIdentifier</key>
	<string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>
	<key>CFBundleInfoDictionaryVersion</key>
	<string>6.0</string>
	<key>CFBundleName</key>
	<string>$(PRODUCT_NAME)</string>
	<key>CFBundlePackageType</key>
	<string>APPL</string>
	<key>CFBundleShortVersionString</key>
	<string>$(FLUTTER_BUILD_NAME)</string>
	<key>CFBundleVersion</key>
	<string>$(FLUTTER_BUILD_NUMBER)</string>
	<key>LSMinimumSystemVersion</key>
	<string>$(MACOSX_DEPLOYMENT_TARGET)</string>
	<key>NSHumanReadableCopyright</key>
	<string>$(PRODUCT_COPYRIGHT)</string>
	<key>NSMainNibFile</key>
	<string>MainMenu</string>
	<key>NSPrincipalClass</key>
	<string>NSApplication</string>
</dict>
</plist>
</file>

<file path="macos/Runner/MainFlutterWindow.swift">
import Cocoa
import FlutterMacOS

class MainFlutterWindow: NSWindow {
  override func awakeFromNib() {
    let flutterViewController = FlutterViewController()
    let windowFrame = self.frame
    self.contentViewController = flutterViewController
    self.setFrame(windowFrame, display: true)

    RegisterGeneratedPlugins(registry: flutterViewController)

    super.awakeFromNib()
  }
}
</file>

<file path="macos/Runner/Release.entitlements">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>com.apple.security.app-sandbox</key>
	<true/>
</dict>
</plist>
</file>

<file path="macos/RunnerTests/RunnerTests.swift">
import Cocoa
import FlutterMacOS
import XCTest

class RunnerTests: XCTestCase {

  func testExample() {
    // If you add code to the Runner application, consider adding tests here.
    // See https://developer.apple.com/documentation/xctest for more information about using XCTest.
  }

}
</file>

<file path="web/index.html">
<!DOCTYPE html>
<html>
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="nivio">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>nivio</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
</file>

<file path="web/manifest.json">
{
    "name": "nivio",
    "short_name": "nivio",
    "start_url": ".",
    "display": "standalone",
    "background_color": "#0175C2",
    "theme_color": "#0175C2",
    "description": "A new Flutter project.",
    "orientation": "portrait-primary",
    "prefer_related_applications": false,
    "icons": [
        {
            "src": "icons/Icon-192.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "icons/Icon-512.png",
            "sizes": "512x512",
            "type": "image/png"
        },
        {
            "src": "icons/Icon-maskable-192.png",
            "sizes": "192x192",
            "type": "image/png",
            "purpose": "maskable"
        },
        {
            "src": "icons/Icon-maskable-512.png",
            "sizes": "512x512",
            "type": "image/png",
            "purpose": "maskable"
        }
    ]
}
</file>

<file path="windows/.gitignore">
flutter/ephemeral/

# Visual Studio user-specific files.
*.suo
*.user
*.userosscache
*.sln.docstates

# Visual Studio build-related files.
x64/
x86/

# Visual Studio cache files
# files ending in .cache can be ignored
*.[Cc]ache
# but keep track of directories ending in .cache
!*.[Cc]ache/
</file>

<file path="windows/cmake_toolchain.cmake">
# Custom CMake toolchain to force Visual Studio 2026
set(CMAKE_GENERATOR_PLATFORM x64)
</file>

<file path="windows/cmake_wrapper.bat">
@echo off
REM CMake wrapper to replace VS 16 2019 with VS 17 2022

set "ARGS=%*"
set "ARGS=%ARGS:Visual Studio 16 2019=Visual Studio 17 2022%"

"C:\Program Files\Microsoft Visual Studio\18\Community\Common7\IDE\CommonExtensions\Microsoft\CMake\CMake\bin\cmake.exe" %ARGS%
</file>

<file path="windows/CMakeLists.txt">
# Project-level configuration.
cmake_minimum_required(VERSION 3.14)

# Set minimum CMake policy version for Firebase compatibility
set(CMAKE_POLICY_VERSION_MINIMUM 3.5)

# Force use of Visual Studio 17 2022 generator (compatible with VS 2026)
if(NOT DEFINED CMAKE_GENERATOR)
  set(CMAKE_GENERATOR "Visual Studio 17 2022" CACHE INTERNAL "" FORCE)
endif()

project(nivio LANGUAGES CXX)

# The name of the executable created for the application. Change this to change
# the on-disk name of your application.
set(BINARY_NAME "nivio")

# Explicitly opt in to modern CMake behaviors to avoid warnings with recent
# versions of CMake.
cmake_policy(VERSION 3.14...3.25)

# Define build configuration option.
get_property(IS_MULTICONFIG GLOBAL PROPERTY GENERATOR_IS_MULTI_CONFIG)
if(IS_MULTICONFIG)
  set(CMAKE_CONFIGURATION_TYPES "Debug;Profile;Release"
    CACHE STRING "" FORCE)
else()
  if(NOT CMAKE_BUILD_TYPE AND NOT CMAKE_CONFIGURATION_TYPES)
    set(CMAKE_BUILD_TYPE "Debug" CACHE
      STRING "Flutter build mode" FORCE)
    set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS
      "Debug" "Profile" "Release")
  endif()
endif()
# Define settings for the Profile build mode.
set(CMAKE_EXE_LINKER_FLAGS_PROFILE "${CMAKE_EXE_LINKER_FLAGS_RELEASE}")
set(CMAKE_SHARED_LINKER_FLAGS_PROFILE "${CMAKE_SHARED_LINKER_FLAGS_RELEASE}")
set(CMAKE_C_FLAGS_PROFILE "${CMAKE_C_FLAGS_RELEASE}")
set(CMAKE_CXX_FLAGS_PROFILE "${CMAKE_CXX_FLAGS_RELEASE}")

# Use Unicode for all projects.
add_definitions(-DUNICODE -D_UNICODE)

# Compilation settings that should be applied to most targets.
#
# Be cautious about adding new options here, as plugins use this function by
# default. In most cases, you should add new options to specific targets instead
# of modifying this function.
function(APPLY_STANDARD_SETTINGS TARGET)
  target_compile_features(${TARGET} PUBLIC cxx_std_17)
  target_compile_options(${TARGET} PRIVATE /W4 /WX /wd"4100")
  target_compile_options(${TARGET} PRIVATE /EHsc)
  target_compile_definitions(${TARGET} PRIVATE "_HAS_EXCEPTIONS=0")
  target_compile_definitions(${TARGET} PRIVATE "$<$<CONFIG:Debug>:_DEBUG>")
endfunction()

# Flutter library and tool build rules.
set(FLUTTER_MANAGED_DIR "${CMAKE_CURRENT_SOURCE_DIR}/flutter")
add_subdirectory(${FLUTTER_MANAGED_DIR})

# Application build; see runner/CMakeLists.txt.
add_subdirectory("runner")


# Generated plugin build rules, which manage building the plugins and adding
# them to the application.
include(flutter/generated_plugins.cmake)


# === Installation ===
# Support files are copied into place next to the executable, so that it can
# run in place. This is done instead of making a separate bundle (as on Linux)
# so that building and running from within Visual Studio will work.
set(BUILD_BUNDLE_DIR "$<TARGET_FILE_DIR:${BINARY_NAME}>")
# Make the "install" step default, as it's required to run.
set(CMAKE_VS_INCLUDE_INSTALL_TO_DEFAULT_BUILD 1)
if(CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
  set(CMAKE_INSTALL_PREFIX "${BUILD_BUNDLE_DIR}" CACHE PATH "..." FORCE)
endif()

set(INSTALL_BUNDLE_DATA_DIR "${CMAKE_INSTALL_PREFIX}/data")
set(INSTALL_BUNDLE_LIB_DIR "${CMAKE_INSTALL_PREFIX}")

install(TARGETS ${BINARY_NAME} RUNTIME DESTINATION "${CMAKE_INSTALL_PREFIX}"
  COMPONENT Runtime)

install(FILES "${FLUTTER_ICU_DATA_FILE}" DESTINATION "${INSTALL_BUNDLE_DATA_DIR}"
  COMPONENT Runtime)

install(FILES "${FLUTTER_LIBRARY}" DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
  COMPONENT Runtime)

if(PLUGIN_BUNDLED_LIBRARIES)
  install(FILES "${PLUGIN_BUNDLED_LIBRARIES}"
    DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
    COMPONENT Runtime)
endif()

# Copy the native assets provided by the build.dart from all packages.
set(NATIVE_ASSETS_DIR "${PROJECT_BUILD_DIR}native_assets/windows/")
install(DIRECTORY "${NATIVE_ASSETS_DIR}"
   DESTINATION "${INSTALL_BUNDLE_LIB_DIR}"
   COMPONENT Runtime)

# Fully re-copy the assets directory on each build to avoid having stale files
# from a previous install.
set(FLUTTER_ASSET_DIR_NAME "flutter_assets")
install(CODE "
  file(REMOVE_RECURSE \"${INSTALL_BUNDLE_DATA_DIR}/${FLUTTER_ASSET_DIR_NAME}\")
  " COMPONENT Runtime)
install(DIRECTORY "${PROJECT_BUILD_DIR}/${FLUTTER_ASSET_DIR_NAME}"
  DESTINATION "${INSTALL_BUNDLE_DATA_DIR}" COMPONENT Runtime)

# Install the AOT library on non-Debug builds only.
install(FILES "${AOT_LIBRARY}" DESTINATION "${INSTALL_BUNDLE_DATA_DIR}"
  CONFIGURATIONS Profile;Release
  COMPONENT Runtime)
</file>

<file path="windows/flutter/CMakeLists.txt">
# This file controls Flutter-level build steps. It should not be edited.
cmake_minimum_required(VERSION 3.14)

set(EPHEMERAL_DIR "${CMAKE_CURRENT_SOURCE_DIR}/ephemeral")

# Configuration provided via flutter tool.
include(${EPHEMERAL_DIR}/generated_config.cmake)

# TODO: Move the rest of this into files in ephemeral. See
# https://github.com/flutter/flutter/issues/57146.
set(WRAPPER_ROOT "${EPHEMERAL_DIR}/cpp_client_wrapper")

# Set fallback configurations for older versions of the flutter tool.
if (NOT DEFINED FLUTTER_TARGET_PLATFORM)
  set(FLUTTER_TARGET_PLATFORM "windows-x64")
endif()

# === Flutter Library ===
set(FLUTTER_LIBRARY "${EPHEMERAL_DIR}/flutter_windows.dll")

# Published to parent scope for install step.
set(FLUTTER_LIBRARY ${FLUTTER_LIBRARY} PARENT_SCOPE)
set(FLUTTER_ICU_DATA_FILE "${EPHEMERAL_DIR}/icudtl.dat" PARENT_SCOPE)
set(PROJECT_BUILD_DIR "${PROJECT_DIR}/build/" PARENT_SCOPE)
set(AOT_LIBRARY "${PROJECT_DIR}/build/windows/app.so" PARENT_SCOPE)

list(APPEND FLUTTER_LIBRARY_HEADERS
  "flutter_export.h"
  "flutter_windows.h"
  "flutter_messenger.h"
  "flutter_plugin_registrar.h"
  "flutter_texture_registrar.h"
)
list(TRANSFORM FLUTTER_LIBRARY_HEADERS PREPEND "${EPHEMERAL_DIR}/")
add_library(flutter INTERFACE)
target_include_directories(flutter INTERFACE
  "${EPHEMERAL_DIR}"
)
target_link_libraries(flutter INTERFACE "${FLUTTER_LIBRARY}.lib")
add_dependencies(flutter flutter_assemble)

# === Wrapper ===
list(APPEND CPP_WRAPPER_SOURCES_CORE
  "core_implementations.cc"
  "standard_codec.cc"
)
list(TRANSFORM CPP_WRAPPER_SOURCES_CORE PREPEND "${WRAPPER_ROOT}/")
list(APPEND CPP_WRAPPER_SOURCES_PLUGIN
  "plugin_registrar.cc"
)
list(TRANSFORM CPP_WRAPPER_SOURCES_PLUGIN PREPEND "${WRAPPER_ROOT}/")
list(APPEND CPP_WRAPPER_SOURCES_APP
  "flutter_engine.cc"
  "flutter_view_controller.cc"
)
list(TRANSFORM CPP_WRAPPER_SOURCES_APP PREPEND "${WRAPPER_ROOT}/")

# Wrapper sources needed for a plugin.
add_library(flutter_wrapper_plugin STATIC
  ${CPP_WRAPPER_SOURCES_CORE}
  ${CPP_WRAPPER_SOURCES_PLUGIN}
)
apply_standard_settings(flutter_wrapper_plugin)
set_target_properties(flutter_wrapper_plugin PROPERTIES
  POSITION_INDEPENDENT_CODE ON)
set_target_properties(flutter_wrapper_plugin PROPERTIES
  CXX_VISIBILITY_PRESET hidden)
target_link_libraries(flutter_wrapper_plugin PUBLIC flutter)
target_include_directories(flutter_wrapper_plugin PUBLIC
  "${WRAPPER_ROOT}/include"
)
add_dependencies(flutter_wrapper_plugin flutter_assemble)

# Wrapper sources needed for the runner.
add_library(flutter_wrapper_app STATIC
  ${CPP_WRAPPER_SOURCES_CORE}
  ${CPP_WRAPPER_SOURCES_APP}
)
apply_standard_settings(flutter_wrapper_app)
target_link_libraries(flutter_wrapper_app PUBLIC flutter)
target_include_directories(flutter_wrapper_app PUBLIC
  "${WRAPPER_ROOT}/include"
)
add_dependencies(flutter_wrapper_app flutter_assemble)

# === Flutter tool backend ===
# _phony_ is a non-existent file to force this command to run every time,
# since currently there's no way to get a full input/output list from the
# flutter tool.
set(PHONY_OUTPUT "${CMAKE_CURRENT_BINARY_DIR}/_phony_")
set_source_files_properties("${PHONY_OUTPUT}" PROPERTIES SYMBOLIC TRUE)
add_custom_command(
  OUTPUT ${FLUTTER_LIBRARY} ${FLUTTER_LIBRARY_HEADERS}
    ${CPP_WRAPPER_SOURCES_CORE} ${CPP_WRAPPER_SOURCES_PLUGIN}
    ${CPP_WRAPPER_SOURCES_APP}
    ${PHONY_OUTPUT}
  COMMAND ${CMAKE_COMMAND} -E env
    ${FLUTTER_TOOL_ENVIRONMENT}
    "${FLUTTER_ROOT}/packages/flutter_tools/bin/tool_backend.bat"
      ${FLUTTER_TARGET_PLATFORM} $<CONFIG>
  VERBATIM
)
add_custom_target(flutter_assemble DEPENDS
  "${FLUTTER_LIBRARY}"
  ${FLUTTER_LIBRARY_HEADERS}
  ${CPP_WRAPPER_SOURCES_CORE}
  ${CPP_WRAPPER_SOURCES_PLUGIN}
  ${CPP_WRAPPER_SOURCES_APP}
)
</file>

<file path="windows/flutter/generated_plugin_registrant.cc">
//
//  Generated file. Do not edit.
//

// clang-format off

#include "generated_plugin_registrant.h"

#include <cloud_firestore/cloud_firestore_plugin_c_api.h>
#include <firebase_auth/firebase_auth_plugin_c_api.h>
#include <firebase_core/firebase_core_plugin_c_api.h>
#include <flutter_inappwebview_windows/flutter_inappwebview_windows_plugin_c_api.h>
#include <url_launcher_windows/url_launcher_windows.h>

void RegisterPlugins(flutter::PluginRegistry* registry) {
  CloudFirestorePluginCApiRegisterWithRegistrar(
      registry->GetRegistrarForPlugin("CloudFirestorePluginCApi"));
  FirebaseAuthPluginCApiRegisterWithRegistrar(
      registry->GetRegistrarForPlugin("FirebaseAuthPluginCApi"));
  FirebaseCorePluginCApiRegisterWithRegistrar(
      registry->GetRegistrarForPlugin("FirebaseCorePluginCApi"));
  FlutterInappwebviewWindowsPluginCApiRegisterWithRegistrar(
      registry->GetRegistrarForPlugin("FlutterInappwebviewWindowsPluginCApi"));
  UrlLauncherWindowsRegisterWithRegistrar(
      registry->GetRegistrarForPlugin("UrlLauncherWindows"));
}
</file>

<file path="windows/flutter/generated_plugin_registrant.h">
//
//  Generated file. Do not edit.
//

// clang-format off

#ifndef GENERATED_PLUGIN_REGISTRANT_
#define GENERATED_PLUGIN_REGISTRANT_

#include <flutter/plugin_registry.h>

// Registers Flutter plugins.
void RegisterPlugins(flutter::PluginRegistry* registry);

#endif  // GENERATED_PLUGIN_REGISTRANT_
</file>

<file path="windows/flutter/generated_plugins.cmake">
#
# Generated file, do not edit.
#

list(APPEND FLUTTER_PLUGIN_LIST
  cloud_firestore
  firebase_auth
  firebase_core
  flutter_inappwebview_windows
  url_launcher_windows
)

list(APPEND FLUTTER_FFI_PLUGIN_LIST
)

set(PLUGIN_BUNDLED_LIBRARIES)

foreach(plugin ${FLUTTER_PLUGIN_LIST})
  add_subdirectory(flutter/ephemeral/.plugin_symlinks/${plugin}/windows plugins/${plugin})
  target_link_libraries(${BINARY_NAME} PRIVATE ${plugin}_plugin)
  list(APPEND PLUGIN_BUNDLED_LIBRARIES $<TARGET_FILE:${plugin}_plugin>)
  list(APPEND PLUGIN_BUNDLED_LIBRARIES ${${plugin}_bundled_libraries})
endforeach(plugin)

foreach(ffi_plugin ${FLUTTER_FFI_PLUGIN_LIST})
  add_subdirectory(flutter/ephemeral/.plugin_symlinks/${ffi_plugin}/windows plugins/${ffi_plugin})
  list(APPEND PLUGIN_BUNDLED_LIBRARIES ${${ffi_plugin}_bundled_libraries})
endforeach(ffi_plugin)
</file>

<file path="windows/runner/CMakeLists.txt">
cmake_minimum_required(VERSION 3.14)
project(runner LANGUAGES CXX)

# Define the application target. To change its name, change BINARY_NAME in the
# top-level CMakeLists.txt, not the value here, or `flutter run` will no longer
# work.
#
# Any new source files that you add to the application should be added here.
add_executable(${BINARY_NAME} WIN32
  "flutter_window.cpp"
  "main.cpp"
  "utils.cpp"
  "win32_window.cpp"
  "${FLUTTER_MANAGED_DIR}/generated_plugin_registrant.cc"
  "Runner.rc"
  "runner.exe.manifest"
)

# Apply the standard set of build settings. This can be removed for applications
# that need different build settings.
apply_standard_settings(${BINARY_NAME})

# Add preprocessor definitions for the build version.
target_compile_definitions(${BINARY_NAME} PRIVATE "FLUTTER_VERSION=\"${FLUTTER_VERSION}\"")
target_compile_definitions(${BINARY_NAME} PRIVATE "FLUTTER_VERSION_MAJOR=${FLUTTER_VERSION_MAJOR}")
target_compile_definitions(${BINARY_NAME} PRIVATE "FLUTTER_VERSION_MINOR=${FLUTTER_VERSION_MINOR}")
target_compile_definitions(${BINARY_NAME} PRIVATE "FLUTTER_VERSION_PATCH=${FLUTTER_VERSION_PATCH}")
target_compile_definitions(${BINARY_NAME} PRIVATE "FLUTTER_VERSION_BUILD=${FLUTTER_VERSION_BUILD}")

# Disable Windows macros that collide with C++ standard library functions.
target_compile_definitions(${BINARY_NAME} PRIVATE "NOMINMAX")

# Add dependency libraries and include directories. Add any application-specific
# dependencies here.
target_link_libraries(${BINARY_NAME} PRIVATE flutter flutter_wrapper_app)
target_link_libraries(${BINARY_NAME} PRIVATE "dwmapi.lib")
target_include_directories(${BINARY_NAME} PRIVATE "${CMAKE_SOURCE_DIR}")

# Run the Flutter tool portions of the build. This must not be removed.
add_dependencies(${BINARY_NAME} flutter_assemble)
</file>

<file path="windows/runner/flutter_window.cpp">
#include "flutter_window.h"

#include <optional>

#include "flutter/generated_plugin_registrant.h"

FlutterWindow::FlutterWindow(const flutter::DartProject& project)
    : project_(project) {}

FlutterWindow::~FlutterWindow() {}

bool FlutterWindow::OnCreate() {
  if (!Win32Window::OnCreate()) {
    return false;
  }

  RECT frame = GetClientArea();

  // The size here must match the window dimensions to avoid unnecessary surface
  // creation / destruction in the startup path.
  flutter_controller_ = std::make_unique<flutter::FlutterViewController>(
      frame.right - frame.left, frame.bottom - frame.top, project_);
  // Ensure that basic setup of the controller was successful.
  if (!flutter_controller_->engine() || !flutter_controller_->view()) {
    return false;
  }
  RegisterPlugins(flutter_controller_->engine());
  SetChildContent(flutter_controller_->view()->GetNativeWindow());

  flutter_controller_->engine()->SetNextFrameCallback([&]() {
    this->Show();
  });

  // Flutter can complete the first frame before the "show window" callback is
  // registered. The following call ensures a frame is pending to ensure the
  // window is shown. It is a no-op if the first frame hasn't completed yet.
  flutter_controller_->ForceRedraw();

  return true;
}

void FlutterWindow::OnDestroy() {
  if (flutter_controller_) {
    flutter_controller_ = nullptr;
  }

  Win32Window::OnDestroy();
}

LRESULT
FlutterWindow::MessageHandler(HWND hwnd, UINT const message,
                              WPARAM const wparam,
                              LPARAM const lparam) noexcept {
  // Give Flutter, including plugins, an opportunity to handle window messages.
  if (flutter_controller_) {
    std::optional<LRESULT> result =
        flutter_controller_->HandleTopLevelWindowProc(hwnd, message, wparam,
                                                      lparam);
    if (result) {
      return *result;
    }
  }

  switch (message) {
    case WM_FONTCHANGE:
      flutter_controller_->engine()->ReloadSystemFonts();
      break;
  }

  return Win32Window::MessageHandler(hwnd, message, wparam, lparam);
}
</file>

<file path="windows/runner/flutter_window.h">
#ifndef RUNNER_FLUTTER_WINDOW_H_
#define RUNNER_FLUTTER_WINDOW_H_

#include <flutter/dart_project.h>
#include <flutter/flutter_view_controller.h>

#include <memory>

#include "win32_window.h"

// A window that does nothing but host a Flutter view.
class FlutterWindow : public Win32Window {
 public:
  // Creates a new FlutterWindow hosting a Flutter view running |project|.
  explicit FlutterWindow(const flutter::DartProject& project);
  virtual ~FlutterWindow();

 protected:
  // Win32Window:
  bool OnCreate() override;
  void OnDestroy() override;
  LRESULT MessageHandler(HWND window, UINT const message, WPARAM const wparam,
                         LPARAM const lparam) noexcept override;

 private:
  // The project to run.
  flutter::DartProject project_;

  // The Flutter instance hosted by this window.
  std::unique_ptr<flutter::FlutterViewController> flutter_controller_;
};

#endif  // RUNNER_FLUTTER_WINDOW_H_
</file>

<file path="windows/runner/main.cpp">
#include <flutter/dart_project.h>
#include <flutter/flutter_view_controller.h>
#include <windows.h>

#include "flutter_window.h"
#include "utils.h"

int APIENTRY wWinMain(_In_ HINSTANCE instance, _In_opt_ HINSTANCE prev,
                      _In_ wchar_t *command_line, _In_ int show_command) {
  // Attach to console when present (e.g., 'flutter run') or create a
  // new console when running with a debugger.
  if (!::AttachConsole(ATTACH_PARENT_PROCESS) && ::IsDebuggerPresent()) {
    CreateAndAttachConsole();
  }

  // Initialize COM, so that it is available for use in the library and/or
  // plugins.
  ::CoInitializeEx(nullptr, COINIT_APARTMENTTHREADED);

  flutter::DartProject project(L"data");

  std::vector<std::string> command_line_arguments =
      GetCommandLineArguments();

  project.set_dart_entrypoint_arguments(std::move(command_line_arguments));

  FlutterWindow window(project);
  Win32Window::Point origin(10, 10);
  Win32Window::Size size(1280, 720);
  if (!window.Create(L"nivio", origin, size)) {
    return EXIT_FAILURE;
  }
  window.SetQuitOnClose(true);

  ::MSG msg;
  while (::GetMessage(&msg, nullptr, 0, 0)) {
    ::TranslateMessage(&msg);
    ::DispatchMessage(&msg);
  }

  ::CoUninitialize();
  return EXIT_SUCCESS;
}
</file>

<file path="windows/runner/resource.h">
//{{NO_DEPENDENCIES}}
// Microsoft Visual C++ generated include file.
// Used by Runner.rc
//
#define IDI_APP_ICON                    101

// Next default values for new objects
//
#ifdef APSTUDIO_INVOKED
#ifndef APSTUDIO_READONLY_SYMBOLS
#define _APS_NEXT_RESOURCE_VALUE        102
#define _APS_NEXT_COMMAND_VALUE         40001
#define _APS_NEXT_CONTROL_VALUE         1001
#define _APS_NEXT_SYMED_VALUE           101
#endif
#endif
</file>

<file path="windows/runner/runner.exe.manifest">
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <application xmlns="urn:schemas-microsoft-com:asm.v3">
    <windowsSettings>
      <dpiAwareness xmlns="http://schemas.microsoft.com/SMI/2016/WindowsSettings">PerMonitorV2</dpiAwareness>
    </windowsSettings>
  </application>
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
      <!-- Windows 10 and Windows 11 -->
      <supportedOS Id="{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}"/>
    </application>
  </compatibility>
</assembly>
</file>

<file path="windows/runner/Runner.rc">
// Microsoft Visual C++ generated resource script.
//
#pragma code_page(65001)
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 2 resource.
//
#include "winres.h"

/////////////////////////////////////////////////////////////////////////////
#undef APSTUDIO_READONLY_SYMBOLS

/////////////////////////////////////////////////////////////////////////////
// English (United States) resources

#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US

#ifdef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// TEXTINCLUDE
//

1 TEXTINCLUDE
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE
BEGIN
    "#include ""winres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE
BEGIN
    "\r\n"
    "\0"
END

#endif    // APSTUDIO_INVOKED


/////////////////////////////////////////////////////////////////////////////
//
// Icon
//

// Icon with lowest ID value placed first to ensure application icon
// remains consistent on all systems.
IDI_APP_ICON            ICON                    "resources\\app_icon.ico"


/////////////////////////////////////////////////////////////////////////////
//
// Version
//

#if defined(FLUTTER_VERSION_MAJOR) && defined(FLUTTER_VERSION_MINOR) && defined(FLUTTER_VERSION_PATCH) && defined(FLUTTER_VERSION_BUILD)
#define VERSION_AS_NUMBER FLUTTER_VERSION_MAJOR,FLUTTER_VERSION_MINOR,FLUTTER_VERSION_PATCH,FLUTTER_VERSION_BUILD
#else
#define VERSION_AS_NUMBER 1,0,0,0
#endif

#if defined(FLUTTER_VERSION)
#define VERSION_AS_STRING FLUTTER_VERSION
#else
#define VERSION_AS_STRING "1.0.0"
#endif

VS_VERSION_INFO VERSIONINFO
 FILEVERSION VERSION_AS_NUMBER
 PRODUCTVERSION VERSION_AS_NUMBER
 FILEFLAGSMASK VS_FFI_FILEFLAGSMASK
#ifdef _DEBUG
 FILEFLAGS VS_FF_DEBUG
#else
 FILEFLAGS 0x0L
#endif
 FILEOS VOS__WINDOWS32
 FILETYPE VFT_APP
 FILESUBTYPE 0x0L
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904e4"
        BEGIN
            VALUE "CompanyName", "com.example" "\0"
            VALUE "FileDescription", "nivio" "\0"
            VALUE "FileVersion", VERSION_AS_STRING "\0"
            VALUE "InternalName", "nivio" "\0"
            VALUE "LegalCopyright", "Copyright (C) 2025 com.example. All rights reserved." "\0"
            VALUE "OriginalFilename", "nivio.exe" "\0"
            VALUE "ProductName", "nivio" "\0"
            VALUE "ProductVersion", VERSION_AS_STRING "\0"
        END
    END
    BLOCK "VarFileInfo"
    BEGIN
        VALUE "Translation", 0x409, 1252
    END
END

#endif    // English (United States) resources
/////////////////////////////////////////////////////////////////////////////



#ifndef APSTUDIO_INVOKED
/////////////////////////////////////////////////////////////////////////////
//
// Generated from the TEXTINCLUDE 3 resource.
//


/////////////////////////////////////////////////////////////////////////////
#endif    // not APSTUDIO_INVOKED
</file>

<file path="windows/runner/utils.cpp">
#include "utils.h"

#include <flutter_windows.h>
#include <io.h>
#include <stdio.h>
#include <windows.h>

#include <iostream>

void CreateAndAttachConsole() {
  if (::AllocConsole()) {
    FILE *unused;
    if (freopen_s(&unused, "CONOUT$", "w", stdout)) {
      _dup2(_fileno(stdout), 1);
    }
    if (freopen_s(&unused, "CONOUT$", "w", stderr)) {
      _dup2(_fileno(stdout), 2);
    }
    std::ios::sync_with_stdio();
    FlutterDesktopResyncOutputStreams();
  }
}

std::vector<std::string> GetCommandLineArguments() {
  // Convert the UTF-16 command line arguments to UTF-8 for the Engine to use.
  int argc;
  wchar_t** argv = ::CommandLineToArgvW(::GetCommandLineW(), &argc);
  if (argv == nullptr) {
    return std::vector<std::string>();
  }

  std::vector<std::string> command_line_arguments;

  // Skip the first argument as it's the binary name.
  for (int i = 1; i < argc; i++) {
    command_line_arguments.push_back(Utf8FromUtf16(argv[i]));
  }

  ::LocalFree(argv);

  return command_line_arguments;
}

std::string Utf8FromUtf16(const wchar_t* utf16_string) {
  if (utf16_string == nullptr) {
    return std::string();
  }
  unsigned int target_length = ::WideCharToMultiByte(
      CP_UTF8, WC_ERR_INVALID_CHARS, utf16_string,
      -1, nullptr, 0, nullptr, nullptr)
    -1; // remove the trailing null character
  int input_length = (int)wcslen(utf16_string);
  std::string utf8_string;
  if (target_length == 0 || target_length > utf8_string.max_size()) {
    return utf8_string;
  }
  utf8_string.resize(target_length);
  int converted_length = ::WideCharToMultiByte(
      CP_UTF8, WC_ERR_INVALID_CHARS, utf16_string,
      input_length, utf8_string.data(), target_length, nullptr, nullptr);
  if (converted_length == 0) {
    return std::string();
  }
  return utf8_string;
}
</file>

<file path="windows/runner/utils.h">
#ifndef RUNNER_UTILS_H_
#define RUNNER_UTILS_H_

#include <string>
#include <vector>

// Creates a console for the process, and redirects stdout and stderr to
// it for both the runner and the Flutter library.
void CreateAndAttachConsole();

// Takes a null-terminated wchar_t* encoded in UTF-16 and returns a std::string
// encoded in UTF-8. Returns an empty std::string on failure.
std::string Utf8FromUtf16(const wchar_t* utf16_string);

// Gets the command line arguments passed in as a std::vector<std::string>,
// encoded in UTF-8. Returns an empty std::vector<std::string> on failure.
std::vector<std::string> GetCommandLineArguments();

#endif  // RUNNER_UTILS_H_
</file>

<file path="windows/runner/win32_window.cpp">
#include "win32_window.h"

#include <dwmapi.h>
#include <flutter_windows.h>

#include "resource.h"

namespace {

/// Window attribute that enables dark mode window decorations.
///
/// Redefined in case the developer's machine has a Windows SDK older than
/// version 10.0.22000.0.
/// See: https://docs.microsoft.com/windows/win32/api/dwmapi/ne-dwmapi-dwmwindowattribute
#ifndef DWMWA_USE_IMMERSIVE_DARK_MODE
#define DWMWA_USE_IMMERSIVE_DARK_MODE 20
#endif

constexpr const wchar_t kWindowClassName[] = L"FLUTTER_RUNNER_WIN32_WINDOW";

/// Registry key for app theme preference.
///
/// A value of 0 indicates apps should use dark mode. A non-zero or missing
/// value indicates apps should use light mode.
constexpr const wchar_t kGetPreferredBrightnessRegKey[] =
  L"Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize";
constexpr const wchar_t kGetPreferredBrightnessRegValue[] = L"AppsUseLightTheme";

// The number of Win32Window objects that currently exist.
static int g_active_window_count = 0;

using EnableNonClientDpiScaling = BOOL __stdcall(HWND hwnd);

// Scale helper to convert logical scaler values to physical using passed in
// scale factor
int Scale(int source, double scale_factor) {
  return static_cast<int>(source * scale_factor);
}

// Dynamically loads the |EnableNonClientDpiScaling| from the User32 module.
// This API is only needed for PerMonitor V1 awareness mode.
void EnableFullDpiSupportIfAvailable(HWND hwnd) {
  HMODULE user32_module = LoadLibraryA("User32.dll");
  if (!user32_module) {
    return;
  }
  auto enable_non_client_dpi_scaling =
      reinterpret_cast<EnableNonClientDpiScaling*>(
          GetProcAddress(user32_module, "EnableNonClientDpiScaling"));
  if (enable_non_client_dpi_scaling != nullptr) {
    enable_non_client_dpi_scaling(hwnd);
  }
  FreeLibrary(user32_module);
}

}  // namespace

// Manages the Win32Window's window class registration.
class WindowClassRegistrar {
 public:
  ~WindowClassRegistrar() = default;

  // Returns the singleton registrar instance.
  static WindowClassRegistrar* GetInstance() {
    if (!instance_) {
      instance_ = new WindowClassRegistrar();
    }
    return instance_;
  }

  // Returns the name of the window class, registering the class if it hasn't
  // previously been registered.
  const wchar_t* GetWindowClass();

  // Unregisters the window class. Should only be called if there are no
  // instances of the window.
  void UnregisterWindowClass();

 private:
  WindowClassRegistrar() = default;

  static WindowClassRegistrar* instance_;

  bool class_registered_ = false;
};

WindowClassRegistrar* WindowClassRegistrar::instance_ = nullptr;

const wchar_t* WindowClassRegistrar::GetWindowClass() {
  if (!class_registered_) {
    WNDCLASS window_class{};
    window_class.hCursor = LoadCursor(nullptr, IDC_ARROW);
    window_class.lpszClassName = kWindowClassName;
    window_class.style = CS_HREDRAW | CS_VREDRAW;
    window_class.cbClsExtra = 0;
    window_class.cbWndExtra = 0;
    window_class.hInstance = GetModuleHandle(nullptr);
    window_class.hIcon =
        LoadIcon(window_class.hInstance, MAKEINTRESOURCE(IDI_APP_ICON));
    window_class.hbrBackground = 0;
    window_class.lpszMenuName = nullptr;
    window_class.lpfnWndProc = Win32Window::WndProc;
    RegisterClass(&window_class);
    class_registered_ = true;
  }
  return kWindowClassName;
}

void WindowClassRegistrar::UnregisterWindowClass() {
  UnregisterClass(kWindowClassName, nullptr);
  class_registered_ = false;
}

Win32Window::Win32Window() {
  ++g_active_window_count;
}

Win32Window::~Win32Window() {
  --g_active_window_count;
  Destroy();
}

bool Win32Window::Create(const std::wstring& title,
                         const Point& origin,
                         const Size& size) {
  Destroy();

  const wchar_t* window_class =
      WindowClassRegistrar::GetInstance()->GetWindowClass();

  const POINT target_point = {static_cast<LONG>(origin.x),
                              static_cast<LONG>(origin.y)};
  HMONITOR monitor = MonitorFromPoint(target_point, MONITOR_DEFAULTTONEAREST);
  UINT dpi = FlutterDesktopGetDpiForMonitor(monitor);
  double scale_factor = dpi / 96.0;

  HWND window = CreateWindow(
      window_class, title.c_str(), WS_OVERLAPPEDWINDOW,
      Scale(origin.x, scale_factor), Scale(origin.y, scale_factor),
      Scale(size.width, scale_factor), Scale(size.height, scale_factor),
      nullptr, nullptr, GetModuleHandle(nullptr), this);

  if (!window) {
    return false;
  }

  UpdateTheme(window);

  return OnCreate();
}

bool Win32Window::Show() {
  return ShowWindow(window_handle_, SW_SHOWNORMAL);
}

// static
LRESULT CALLBACK Win32Window::WndProc(HWND const window,
                                      UINT const message,
                                      WPARAM const wparam,
                                      LPARAM const lparam) noexcept {
  if (message == WM_NCCREATE) {
    auto window_struct = reinterpret_cast<CREATESTRUCT*>(lparam);
    SetWindowLongPtr(window, GWLP_USERDATA,
                     reinterpret_cast<LONG_PTR>(window_struct->lpCreateParams));

    auto that = static_cast<Win32Window*>(window_struct->lpCreateParams);
    EnableFullDpiSupportIfAvailable(window);
    that->window_handle_ = window;
  } else if (Win32Window* that = GetThisFromHandle(window)) {
    return that->MessageHandler(window, message, wparam, lparam);
  }

  return DefWindowProc(window, message, wparam, lparam);
}

LRESULT
Win32Window::MessageHandler(HWND hwnd,
                            UINT const message,
                            WPARAM const wparam,
                            LPARAM const lparam) noexcept {
  switch (message) {
    case WM_DESTROY:
      window_handle_ = nullptr;
      Destroy();
      if (quit_on_close_) {
        PostQuitMessage(0);
      }
      return 0;

    case WM_DPICHANGED: {
      auto newRectSize = reinterpret_cast<RECT*>(lparam);
      LONG newWidth = newRectSize->right - newRectSize->left;
      LONG newHeight = newRectSize->bottom - newRectSize->top;

      SetWindowPos(hwnd, nullptr, newRectSize->left, newRectSize->top, newWidth,
                   newHeight, SWP_NOZORDER | SWP_NOACTIVATE);

      return 0;
    }
    case WM_SIZE: {
      RECT rect = GetClientArea();
      if (child_content_ != nullptr) {
        // Size and position the child window.
        MoveWindow(child_content_, rect.left, rect.top, rect.right - rect.left,
                   rect.bottom - rect.top, TRUE);
      }
      return 0;
    }

    case WM_ACTIVATE:
      if (child_content_ != nullptr) {
        SetFocus(child_content_);
      }
      return 0;

    case WM_DWMCOLORIZATIONCOLORCHANGED:
      UpdateTheme(hwnd);
      return 0;
  }

  return DefWindowProc(window_handle_, message, wparam, lparam);
}

void Win32Window::Destroy() {
  OnDestroy();

  if (window_handle_) {
    DestroyWindow(window_handle_);
    window_handle_ = nullptr;
  }
  if (g_active_window_count == 0) {
    WindowClassRegistrar::GetInstance()->UnregisterWindowClass();
  }
}

Win32Window* Win32Window::GetThisFromHandle(HWND const window) noexcept {
  return reinterpret_cast<Win32Window*>(
      GetWindowLongPtr(window, GWLP_USERDATA));
}

void Win32Window::SetChildContent(HWND content) {
  child_content_ = content;
  SetParent(content, window_handle_);
  RECT frame = GetClientArea();

  MoveWindow(content, frame.left, frame.top, frame.right - frame.left,
             frame.bottom - frame.top, true);

  SetFocus(child_content_);
}

RECT Win32Window::GetClientArea() {
  RECT frame;
  GetClientRect(window_handle_, &frame);
  return frame;
}

HWND Win32Window::GetHandle() {
  return window_handle_;
}

void Win32Window::SetQuitOnClose(bool quit_on_close) {
  quit_on_close_ = quit_on_close;
}

bool Win32Window::OnCreate() {
  // No-op; provided for subclasses.
  return true;
}

void Win32Window::OnDestroy() {
  // No-op; provided for subclasses.
}

void Win32Window::UpdateTheme(HWND const window) {
  DWORD light_mode;
  DWORD light_mode_size = sizeof(light_mode);
  LSTATUS result = RegGetValue(HKEY_CURRENT_USER, kGetPreferredBrightnessRegKey,
                               kGetPreferredBrightnessRegValue,
                               RRF_RT_REG_DWORD, nullptr, &light_mode,
                               &light_mode_size);

  if (result == ERROR_SUCCESS) {
    BOOL enable_dark_mode = light_mode == 0;
    DwmSetWindowAttribute(window, DWMWA_USE_IMMERSIVE_DARK_MODE,
                          &enable_dark_mode, sizeof(enable_dark_mode));
  }
}
</file>

<file path="windows/runner/win32_window.h">
#ifndef RUNNER_WIN32_WINDOW_H_
#define RUNNER_WIN32_WINDOW_H_

#include <windows.h>

#include <functional>
#include <memory>
#include <string>

// A class abstraction for a high DPI-aware Win32 Window. Intended to be
// inherited from by classes that wish to specialize with custom
// rendering and input handling
class Win32Window {
 public:
  struct Point {
    unsigned int x;
    unsigned int y;
    Point(unsigned int x, unsigned int y) : x(x), y(y) {}
  };

  struct Size {
    unsigned int width;
    unsigned int height;
    Size(unsigned int width, unsigned int height)
        : width(width), height(height) {}
  };

  Win32Window();
  virtual ~Win32Window();

  // Creates a win32 window with |title| that is positioned and sized using
  // |origin| and |size|. New windows are created on the default monitor. Window
  // sizes are specified to the OS in physical pixels, hence to ensure a
  // consistent size this function will scale the inputted width and height as
  // as appropriate for the default monitor. The window is invisible until
  // |Show| is called. Returns true if the window was created successfully.
  bool Create(const std::wstring& title, const Point& origin, const Size& size);

  // Show the current window. Returns true if the window was successfully shown.
  bool Show();

  // Release OS resources associated with window.
  void Destroy();

  // Inserts |content| into the window tree.
  void SetChildContent(HWND content);

  // Returns the backing Window handle to enable clients to set icon and other
  // window properties. Returns nullptr if the window has been destroyed.
  HWND GetHandle();

  // If true, closing this window will quit the application.
  void SetQuitOnClose(bool quit_on_close);

  // Return a RECT representing the bounds of the current client area.
  RECT GetClientArea();

 protected:
  // Processes and route salient window messages for mouse handling,
  // size change and DPI. Delegates handling of these to member overloads that
  // inheriting classes can handle.
  virtual LRESULT MessageHandler(HWND window,
                                 UINT const message,
                                 WPARAM const wparam,
                                 LPARAM const lparam) noexcept;

  // Called when CreateAndShow is called, allowing subclass window-related
  // setup. Subclasses should return false if setup fails.
  virtual bool OnCreate();

  // Called when Destroy is called.
  virtual void OnDestroy();

 private:
  friend class WindowClassRegistrar;

  // OS callback called by message pump. Handles the WM_NCCREATE message which
  // is passed when the non-client area is being created and enables automatic
  // non-client DPI scaling so that the non-client area automatically
  // responds to changes in DPI. All other messages are handled by
  // MessageHandler.
  static LRESULT CALLBACK WndProc(HWND const window,
                                  UINT const message,
                                  WPARAM const wparam,
                                  LPARAM const lparam) noexcept;

  // Retrieves a class instance pointer for |window|
  static Win32Window* GetThisFromHandle(HWND const window) noexcept;

  // Update the window frame's theme to match the system theme.
  static void UpdateTheme(HWND const window);

  bool quit_on_close_ = false;

  // window handle for top level window.
  HWND window_handle_ = nullptr;

  // window handle for hosted content.
  HWND child_content_ = nullptr;
};

#endif  // RUNNER_WIN32_WINDOW_H_
</file>

<file path="lib/main.dart">
import 'package:firebase_core/firebase_core.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:flutter_native_splash/flutter_native_splash.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/firebase_options.dart';
import 'package:nivio/screens/home_screen.dart';
import 'package:nivio/screens/search_screen.dart';
import 'package:nivio/screens/media_detail_screen.dart';
import 'package:nivio/screens/player_screen.dart';
import 'package:nivio/screens/auth_screen.dart';
import 'package:nivio/screens/settings_screen.dart';

void main() async {
  WidgetsBinding widgetsBinding = WidgetsFlutterBinding.ensureInitialized();
  
  // Preserve splash screen while initializing
  FlutterNativeSplash.preserve(widgetsBinding: widgetsBinding);
  
  // Initialize Firebase with generated options
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );

  runApp(
    const ProviderScope(
      child: NivioApp(),
    ),
  );
  
  // Remove splash screen after app is ready
  FlutterNativeSplash.remove();
}

// Router configuration
final _router = GoRouter(
  initialLocation: '/',
  redirect: (context, state) {
    final user = FirebaseAuth.instance.currentUser;
    final isAuthRoute = state.matchedLocation == '/auth';
    
    // If not signed in and not on auth route, redirect to auth
    if (user == null && !isAuthRoute) {
      return '/auth';
    }
    
    // If signed in and on auth route, redirect to home
    if (user != null && isAuthRoute) {
      return '/';
    }
    
    // Otherwise, no redirect needed
    return null;
  },
  routes: [
    GoRoute(
      path: '/auth',
      builder: (context, state) => const AuthScreen(),
    ),
    GoRoute(
      path: '/',
      builder: (context, state) => const HomeScreen(),
    ),
    GoRoute(
      path: '/search',
      builder: (context, state) => const SearchScreen(),
    ),
    GoRoute(
      path: '/settings',
      builder: (context, state) => const SettingsScreen(),
    ),
    GoRoute(
      path: '/media/:id',
      builder: (context, state) {
        final id = state.pathParameters['id']!;
        final mediaType = state.uri.queryParameters['type'];
        return MediaDetailScreen(
          mediaId: int.parse(id),
          mediaType: mediaType,
        );
      },
    ),
    GoRoute(
      path: '/player/:id',
      builder: (context, state) {
        final id = state.pathParameters['id']!;
        final season = int.parse(state.uri.queryParameters['season'] ?? '1');
        final episode = int.parse(state.uri.queryParameters['episode'] ?? '1');
        final mediaType = state.uri.queryParameters['type'];
        return PlayerScreen(
          mediaId: int.parse(id),
          season: season,
          episode: episode,
          mediaType: mediaType,
        );
      },
    ),
  ],
);

class NivioApp extends StatelessWidget {
  const NivioApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      title: 'Nivio',
      theme: NivioTheme.darkTheme,
      routerConfig: _router,
      debugShowCheckedModeBanner: false,
    );
  }
}
</file>

<file path="lib/providers/service_providers.dart">
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:nivio/services/tmdb_service.dart';
import 'package:nivio/services/streaming_service.dart';
import 'package:nivio/services/watch_history_service.dart';

// Service Providers
final tmdbServiceProvider = Provider((ref) => TmdbService());

// Streaming service provider (vidsrc.cc, vidsrc.to, vidlink.pro)
final streamingServiceProvider = Provider((ref) => StreamingService());

final watchHistoryServiceProvider = Provider((ref) => WatchHistoryService());
</file>

<file path="lib/screens/media_detail_screen.dart">
import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:go_router/go_router.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/models/search_result.dart';
import 'package:nivio/models/season_info.dart';
import 'package:nivio/providers/media_provider.dart';
import 'package:nivio/services/tmdb_service.dart';
import 'package:video_player/video_player.dart';
import 'package:chewie/chewie.dart';
import 'package:youtube_explode_dart/youtube_explode_dart.dart' as yt;

class MediaDetailScreen extends ConsumerStatefulWidget {
  final int mediaId;
  final String? mediaType;

  const MediaDetailScreen({
    super.key,
    required this.mediaId,
    this.mediaType,
  });

  @override
  ConsumerState<MediaDetailScreen> createState() => _MediaDetailScreenState();
}

class _MediaDetailScreenState extends ConsumerState<MediaDetailScreen> {
  SearchResult? _media;
  bool _isLoading = true;
  String? _error;
  String? _trailerUrl;

  @override
  void initState() {
    super.initState();
    _fetchMediaDetails();
  }

  @override
  void dispose() {
    super.dispose();
  }

  String? _extractTrailerKey(dynamic videosData) {
    if (videosData == null) return null;
    
    final results = videosData['results'] as List<dynamic>?;
    if (results == null || results.isEmpty) return null;
    
    // ONLY get official trailers - nothing else
    for (final video in results) {
      if (video['site'] == 'YouTube' && 
          video['type'] == 'Trailer' &&
          video['official'] == true) {
        return 'https://www.youtube.com/watch?v=${video['key']}';
      }
    }
    
    return null;
  }

  Future<void> _fetchMediaDetails() async {
    setState(() {
      _isLoading = true;
      _error = null;
    });

    try {
      // Otherwise, fetch from TMDB
      final tmdbService = TmdbService();
      Map<String, dynamic>? detailsWithVideos;
      
      // Use mediaType if provided, otherwise try both
      if (widget.mediaType == 'movie') {
        detailsWithVideos = await tmdbService.getMovieDetailsWithVideos(widget.mediaId);
        detailsWithVideos['media_type'] = 'movie';
        final movieDetails = SearchResult.fromJson(detailsWithVideos);
        ref.read(selectedMediaProvider.notifier).state = movieDetails;
        setState(() {
          _media = movieDetails;
        });
      } else if (widget.mediaType == 'tv') {
        detailsWithVideos = await tmdbService.getTVShowDetailsWithVideos(widget.mediaId);
        detailsWithVideos['media_type'] = 'tv';
        final tvDetails = SearchResult.fromJson(detailsWithVideos);
        ref.read(selectedMediaProvider.notifier).state = tvDetails;
        setState(() {
          _media = tvDetails;
        });
      } else {
        // Try movie first, then TV show
        try {
          detailsWithVideos = await tmdbService.getMovieDetailsWithVideos(widget.mediaId);
          detailsWithVideos['media_type'] = 'movie';
          final movieDetails = SearchResult.fromJson(detailsWithVideos);
          ref.read(selectedMediaProvider.notifier).state = movieDetails;
          setState(() {
            _media = movieDetails;
          });
        } catch (e) {
          // If movie fails, try TV show
          detailsWithVideos = await tmdbService.getTVShowDetailsWithVideos(widget.mediaId);
          detailsWithVideos['media_type'] = 'tv';
          final tvDetails = SearchResult.fromJson(detailsWithVideos);
          ref.read(selectedMediaProvider.notifier).state = tvDetails;
          setState(() {
            _media = tvDetails;
          });
        }
      }

      // Extract trailer URL
      final trailerUrl = _extractTrailerKey(detailsWithVideos['videos']);
      if (trailerUrl != null) {
        setState(() {
          _trailerUrl = trailerUrl;
        });
      }

      setState(() {
        _isLoading = false;
      });
    } catch (e) {
      setState(() {
        _error = e.toString();
        _isLoading = false;
      });
    }
  }

  void _showTrailerPlayer(BuildContext context) {
    if (_trailerUrl == null) return;

    showDialog(
      context: context,
      barrierDismissible: true,
      barrierColor: Colors.black87,
      builder: (context) => TrailerPlayer(youtubeUrl: _trailerUrl!),
    );
  }

  @override
  Widget build(BuildContext context) {
    if (_isLoading) {
      return Scaffold(
        backgroundColor: NivioTheme.netflixBlack,
        appBar: AppBar(
          backgroundColor: NivioTheme.netflixBlack,
          elevation: 0,
        ),
        body: const Center(
          child: CircularProgressIndicator(
            color: NivioTheme.netflixRed,
          ),
        ),
      );
    }

    if (_error != null) {
      return Scaffold(
        backgroundColor: NivioTheme.netflixBlack,
        appBar: AppBar(
          backgroundColor: NivioTheme.netflixBlack,
          elevation: 0,
        ),
        body: Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              const Icon(
                Icons.error_outline,
                color: NivioTheme.netflixRed,
                size: 64,
              ),
              const SizedBox(height: 16),
              const Text('Failed to Load Details'),
              const SizedBox(height: 8),
              Text(
                _error!,
                style: const TextStyle(color: NivioTheme.netflixGrey),
                textAlign: TextAlign.center,
              ),
              const SizedBox(height: 24),
              ElevatedButton(
                onPressed: _fetchMediaDetails,
                style: ElevatedButton.styleFrom(
                  backgroundColor: NivioTheme.netflixRed,
                ),
                child: const Text('RETRY'),
              ),
            ],
          ),
        ),
      );
    }

    final media = _media;
    if (media == null) {
      return Scaffold(
        appBar: AppBar(),
        body: const Center(child: CircularProgressIndicator()),
      );
    }

    final tmdbService = TmdbService();
    final backdropUrl = tmdbService.getBackdropUrl(media.backdropPath);

    return Scaffold(
      body: CustomScrollView(
        slivers: [
          // Hero section with backdrop
          SliverAppBar(
            expandedHeight: 500,
            pinned: true,
            backgroundColor: Colors.transparent,
            flexibleSpace: FlexibleSpaceBar(
              background: Stack(
                fit: StackFit.expand,
                children: [
                  // Backdrop image
                  if (backdropUrl.isNotEmpty)
                    CachedNetworkImage(
                      imageUrl: backdropUrl,
                      fit: BoxFit.cover,
                      errorWidget: (context, url, error) => Container(
                        color: NivioTheme.netflixDarkGrey,
                      ),
                    )
                  else
                    Container(color: NivioTheme.netflixDarkGrey),
                  
                  // Gradient overlay (stronger for readability)
                  Container(
                    decoration: BoxDecoration(
                      gradient: LinearGradient(
                        begin: Alignment.topCenter,
                        end: Alignment.bottomCenter,
                        colors: [
                          Colors.black.withOpacity(0.3),
                          Colors.black.withOpacity(0.7),
                          NivioTheme.netflixBlack,
                        ],
                        stops: const [0.0, 0.7, 1.0],
                      ),
                    ),
                  ),
                      
                      // Title and info at bottom
                      Positioned(
                        bottom: 16,
                        left: 16,
                        right: 16,
                        child: Column(
                          crossAxisAlignment: CrossAxisAlignment.start,
                          children: [
                            Text(
                              media.title ?? media.name ?? 'Unknown',
                              style: Theme.of(context).textTheme.displayLarge?.copyWith(
                                fontWeight: FontWeight.bold,
                                shadows: [
                                  const Shadow(
                                    blurRadius: 10,
                                    color: Colors.black,
                                  ),
                                ],
                              ),
                            ),
                            const SizedBox(height: 8),
                            Row(
                              children: [
                                if (media.voteAverage != null) ...[
                                  const Icon(
                                    Icons.star,
                                    color: Colors.amber,
                                    size: 20,
                                  ),
                                  const SizedBox(width: 4),
                                  Text(
                                    media.voteAverage!.toStringAsFixed(1),
                                    style: Theme.of(context).textTheme.bodyLarge,
                                  ),
                                  const SizedBox(width: 16),
                                ],
                                if (media.releaseDate != null && media.releaseDate!.length >= 4)
                                  Text(
                                    media.releaseDate!.substring(0, 4),
                                    style: Theme.of(context).textTheme.bodyLarge,
                                  )
                                else if (media.firstAirDate != null && media.firstAirDate!.length >= 4)
                                  Text(
                                    media.firstAirDate!.substring(0, 4),
                                    style: Theme.of(context).textTheme.bodyLarge,
                                  ),
                              ],
                            ),
                            // Watch Trailer button (if trailer available)
                            if (_trailerUrl != null) ...[
                              const SizedBox(height: 16),
                              OutlinedButton.icon(
                                onPressed: () => _showTrailerPlayer(context),
                                icon: const Icon(Icons.play_circle_outline),
                                label: const Text('Watch Trailer'),
                                style: OutlinedButton.styleFrom(
                                  foregroundColor: Colors.white,
                                  side: const BorderSide(color: Colors.white, width: 2),
                                  padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 12),
                                ),
                              ),
                            ],
                          ],
                        ),
                      ),
                    ],
                  ),
                ),
              ),

              // Content
              SliverToBoxAdapter(
                child: Padding(
                  padding: const EdgeInsets.all(16),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      // Overview
                      if (media.overview != null && media.overview!.isNotEmpty) ...[
                        Text(
                          'Overview',
                          style: Theme.of(context).textTheme.headlineMedium,
                        ),
                        const SizedBox(height: 8),
                      Text(
                        media.overview!,
                        style: Theme.of(context).textTheme.bodyMedium,
                      ),
                      const SizedBox(height: 24),
                    ],

                    // For TV shows - Season/Episode selection
                    if (media.mediaType == 'tv')
                      _buildTVControls(context, media)
                    else
                      _buildMovieControls(context, media),
                  ],
                ),
              ),
            ),
          ],
        ),
    );
  }

  Widget _buildMovieControls(BuildContext context, SearchResult media) {
    return SizedBox(
      width: double.infinity,
      child: ElevatedButton.icon(
        onPressed: () {
          context.push('/player/${media.id}?season=1&episode=1');
        },
        icon: const Icon(Icons.play_arrow),
        label: const Text('PLAY'),
        style: ElevatedButton.styleFrom(
          padding: const EdgeInsets.symmetric(vertical: 16),
        ),
      ),
    );
  }

  Widget _buildTVControls(BuildContext context, SearchResult media) {
    final seriesInfoAsync = ref.watch(seriesInfoProvider(media.id));

    return seriesInfoAsync.when(
      data: (seriesInfo) {
        final selectedSeason = ref.watch(selectedSeasonProvider);

        return Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // Season selector
            Text(
              'Select Season',
              style: Theme.of(context).textTheme.headlineMedium,
            ),
            const SizedBox(height: 8),
            DropdownButtonFormField<int>(
              value: selectedSeason <= seriesInfo.seasons.length
                  ? selectedSeason
                  : 1,
              dropdownColor: NivioTheme.netflixDarkGrey,
              decoration: const InputDecoration(
                filled: true,
                fillColor: NivioTheme.netflixDarkGrey,
              ),
              items: seriesInfo.seasons
                  .where((s) => s.seasonNumber > 0)
                  .map((season) => DropdownMenuItem(
                        value: season.seasonNumber,
                        child: Text(
                          '${season.name} (${season.episodeCount} episodes)',
                          style: const TextStyle(color: Colors.white),
                        ),
                      ))
                  .toList(),
              onChanged: (value) {
                if (value != null) {
                  ref.read(selectedSeasonProvider.notifier).state = value;
                  ref.read(selectedEpisodeProvider.notifier).state = 1;
                }
              },
            ),
            const SizedBox(height: 24),

            // Episode list
            _buildEpisodeList(media, selectedSeason),
          ],
        );
      },
      loading: () => const Center(
        child: CircularProgressIndicator(color: NivioTheme.netflixRed),
      ),
      error: (err, stack) => Text(
        'Error loading seasons: $err',
        style: Theme.of(context).textTheme.bodyMedium?.copyWith(
              color: NivioTheme.netflixRed,
            ),
      ),
    );
  }

  Widget _buildEpisodeList(SearchResult media, int season) {
    final seasonDataAsync = ref.watch(
      seasonDataProvider((showId: media.id, seasonNumber: season)),
    );

    return seasonDataAsync.when(
      data: (seasonData) {
        return Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'Episodes',
              style: Theme.of(context).textTheme.headlineMedium,
            ),
            const SizedBox(height: 16),
            ...seasonData.episodes.map((episode) {
              return _buildNetflixEpisodeCard(media, episode, season);
            }),
          ],
        );
      },
      loading: () => const Center(
        child: CircularProgressIndicator(color: NivioTheme.netflixRed),
      ),
      error: (err, stack) => Text(
        'Error loading episodes: $err',
        style: Theme.of(context).textTheme.bodyMedium?.copyWith(
              color: NivioTheme.netflixRed,
            ),
      ),
    );
  }

  Widget _buildNetflixEpisodeCard(SearchResult media, EpisodeData episode, int season) {
    final stillUrl = episode.stillPath != null 
        ? 'https://image.tmdb.org/t/p/w500${episode.stillPath}'
        : '';
    
    return Container(
      margin: const EdgeInsets.only(bottom: 8),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // Episode thumbnail with play button overlay
          Stack(
            children: [
              ClipRRect(
                borderRadius: BorderRadius.circular(4),
                child: stillUrl.isNotEmpty
                    ? CachedNetworkImage(
                        imageUrl: stillUrl,
                        width: double.infinity,
                        height: 200,
                        fit: BoxFit.cover,
                        placeholder: (context, url) => Container(
                          width: double.infinity,
                          height: 200,
                          color: Colors.black.withOpacity(0.3),
                          child: const Center(
                            child: CircularProgressIndicator(
                              strokeWidth: 2,
                              color: NivioTheme.netflixRed,
                            ),
                          ),
                        ),
                        errorWidget: (context, url, error) => Container(
                          width: double.infinity,
                          height: 200,
                          color: Colors.black.withOpacity(0.3),
                          child: const Icon(Icons.movie, color: Colors.white54, size: 48),
                        ),
                      )
                    : Container(
                        width: double.infinity,
                        height: 200,
                        color: Colors.black.withOpacity(0.3),
                        child: const Icon(Icons.movie, color: Colors.white54, size: 48),
                      ),
              ),
              // Play button overlay
              Positioned.fill(
                child: Material(
                  color: Colors.transparent,
                  child: InkWell(
                    onTap: () {
                      context.push(
                        '/player/${media.id}'
                        '?season=$season'
                        '&episode=${episode.episodeNumber}',
                      );
                    },
                    child: Center(
                      child: Container(
                        width: 56,
                        height: 56,
                        decoration: BoxDecoration(
                          color: Colors.black.withOpacity(0.6),
                          shape: BoxShape.circle,
                          border: Border.all(color: Colors.white, width: 2),
                        ),
                        child: const Icon(
                          Icons.play_arrow,
                          color: Colors.white,
                          size: 32,
                        ),
                      ),
                    ),
                  ),
                ),
              ),
            ],
          ),
          const SizedBox(height: 12),
          // Episode info row
          Row(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Expanded(
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    // Episode number and title
                    Row(
                      children: [
                        Text(
                          '${episode.episodeNumber}. ',
                          style: const TextStyle(
                            fontSize: 15,
                            fontWeight: FontWeight.bold,
                            color: Colors.white,
                          ),
                        ),
                        Expanded(
                          child: Text(
                            episode.episodeName ?? 'Episode ${episode.episodeNumber}',
                            style: const TextStyle(
                              fontSize: 15,
                              fontWeight: FontWeight.bold,
                              color: Colors.white,
                            ),
                            maxLines: 1,
                            overflow: TextOverflow.ellipsis,
                          ),
                        ),
                      ],
                    ),
                    // Runtime
                    if (episode.runtime != null && episode.runtime! > 0) ...[
                      const SizedBox(height: 4),
                      Text(
                        '${episode.runtime}m',
                        style: const TextStyle(
                          fontSize: 12,
                          color: Colors.grey,
                        ),
                      ),
                    ],
                    const SizedBox(height: 8),
                    // Description
                    Text(
                      episode.overview != null && episode.overview!.isNotEmpty
                          ? episode.overview!
                          : 'No description available',
                      style: TextStyle(
                        fontSize: 13,
                        color: Colors.grey[400],
                        height: 1.4,
                      ),
                      maxLines: 3,
                      overflow: TextOverflow.ellipsis,
                    ),
                  ],
                ),
              ),
            ],
          ),
          const SizedBox(height: 16),
          // Divider
          Divider(
            color: Colors.grey[800],
            height: 1,
            thickness: 1,
          ),
          const SizedBox(height: 16),
        ],
      ),
    );
  }
}

// Trailer Player Widget with YouTube support
class TrailerPlayer extends StatefulWidget {
  final String youtubeUrl;

  const TrailerPlayer({super.key, required this.youtubeUrl});

  @override
  State<TrailerPlayer> createState() => _TrailerPlayerState();
}

class _TrailerPlayerState extends State<TrailerPlayer> {
  VideoPlayerController? _videoController;
  ChewieController? _chewieController;
  bool _isLoading = true;
  String? _error;

  @override
  void initState() {
    super.initState();
    _initializePlayer();
  }

  Future<void> _initializePlayer() async {
    try {
      // Extract YouTube video ID from URL
      final videoId = _extractYoutubeVideoId(widget.youtubeUrl);
      if (videoId == null) {
        setState(() {
          _error = 'Invalid YouTube URL';
          _isLoading = false;
        });
        return;
      }

      // Use youtube_explode_dart to get the actual video stream URL
      final youtubeClient = yt.YoutubeExplode();
      try {
        final manifest = await youtubeClient.videos.streamsClient.getManifest(videoId);
        
        // Get the best muxed stream (video + audio combined)
        final streamInfo = manifest.muxed.withHighestBitrate();
        final streamUrl = streamInfo.url.toString();
        
        _videoController = VideoPlayerController.networkUrl(
          Uri.parse(streamUrl),
          httpHeaders: {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
          },
        );

        await _videoController!.initialize();

        _chewieController = ChewieController(
          videoPlayerController: _videoController!,
          autoPlay: true,
          looping: false,
          allowFullScreen: true,
          allowMuting: true,
          showControls: true,
          materialProgressColors: ChewieProgressColors(
            playedColor: NivioTheme.netflixRed,
            handleColor: NivioTheme.netflixRed,
            backgroundColor: Colors.grey,
            bufferedColor: Colors.white30,
          ),
          placeholder: Container(
            color: Colors.black,
            child: const Center(
              child: CircularProgressIndicator(
                color: NivioTheme.netflixRed,
              ),
            ),
          ),
          errorBuilder: (context, errorMessage) {
            return Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Icon(
                    Icons.error_outline,
                    color: NivioTheme.netflixRed,
                    size: 64,
                  ),
                  const SizedBox(height: 16),
                  const Text(
                    'Unable to play trailer',
                    style: TextStyle(color: Colors.white, fontSize: 18),
                  ),
                  const SizedBox(height: 8),
                  Text(
                    errorMessage,
                    style: const TextStyle(color: NivioTheme.netflixGrey),
                    textAlign: TextAlign.center,
                  ),
                ],
              ),
            );
          },
        );

        setState(() {
          _isLoading = false;
        });
      } finally {
        youtubeClient.close();
      }
    } catch (e) {
      setState(() {
        _error = e.toString();
        _isLoading = false;
      });
    }
  }

  String? _extractYoutubeVideoId(String url) {
    final regExp = RegExp(
      r'(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})',
      caseSensitive: false,
    );
    final match = regExp.firstMatch(url);
    return match?.group(1);
  }

  @override
  void dispose() {
    _videoController?.dispose();
    _chewieController?.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Dialog.fullscreen(
      backgroundColor: Colors.black,
      child: Container(
        color: Colors.black,
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            // Header with gradient
            Container(
              padding: const EdgeInsets.symmetric(horizontal: 20, vertical: 16),
              decoration: BoxDecoration(
                gradient: LinearGradient(
                  colors: [
                    NivioTheme.netflixRed.withOpacity(0.8),
                    Colors.black,
                  ],
                  begin: Alignment.topLeft,
                  end: Alignment.bottomRight,
                ),
              ),
              child: Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Row(
                    children: const [
                      Icon(
                        Icons.play_circle_filled,
                        color: Colors.white,
                        size: 28,
                      ),
                      SizedBox(width: 12),
                      Text(
                        'Official Trailer',
                        style: TextStyle(
                          color: Colors.white,
                          fontSize: 22,
                          fontWeight: FontWeight.bold,
                          letterSpacing: 0.5,
                        ),
                      ),
                    ],
                  ),
                  IconButton(
                    icon: const Icon(Icons.close, color: Colors.white, size: 28),
                    onPressed: () => Navigator.pop(context),
                    tooltip: 'Close',
                    style: IconButton.styleFrom(
                      backgroundColor: Colors.white.withOpacity(0.1),
                      shape: RoundedRectangleBorder(
                        borderRadius: BorderRadius.circular(8),
                      ),
                    ),
                  ),
                ],
              ),
            ),
            
            // Video player with 16:9 aspect ratio
            Expanded(
              child: Container(
                margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
                child: _isLoading
                    ? AspectRatio(
                        aspectRatio: 16 / 9,
                        child: Container(
                          decoration: BoxDecoration(
                            color: Colors.black87,
                            borderRadius: BorderRadius.circular(8),
                          ),
                          child: const Center(
                            child: Column(
                              mainAxisSize: MainAxisSize.min,
                              children: [
                                CircularProgressIndicator(
                                  color: NivioTheme.netflixRed,
                                  strokeWidth: 3,
                                ),
                                SizedBox(height: 16),
                                Text(
                                  'Loading trailer...',
                                  style: TextStyle(
                                    color: Colors.white70,
                                    fontSize: 14,
                                  ),
                                ),
                              ],
                            ),
                          ),
                        ),
                      )
                    : _error != null
                        ? AspectRatio(
                            aspectRatio: 16 / 9,
                            child: Container(
                              decoration: BoxDecoration(
                                color: Colors.black87,
                                borderRadius: BorderRadius.circular(8),
                              ),
                              child: Center(
                                child: Column(
                                  mainAxisAlignment: MainAxisAlignment.center,
                                  children: [
                                    Container(
                                      padding: const EdgeInsets.all(20),
                                      decoration: BoxDecoration(
                                        color: NivioTheme.netflixRed.withOpacity(0.1),
                                        shape: BoxShape.circle,
                                      ),
                                      child: const Icon(
                                        Icons.error_outline,
                                        color: NivioTheme.netflixRed,
                                        size: 48,
                                      ),
                                    ),
                                    const SizedBox(height: 24),
                                    const Text(
                                      'Unable to Load Trailer',
                                      style: TextStyle(
                                        color: Colors.white,
                                        fontSize: 18,
                                        fontWeight: FontWeight.w600,
                                      ),
                                    ),
                                    const SizedBox(height: 12),
                                    Padding(
                                      padding: const EdgeInsets.symmetric(horizontal: 32),
                                      child: Text(
                                        _error!,
                                        style: const TextStyle(
                                          color: NivioTheme.netflixGrey,
                                          fontSize: 13,
                                        ),
                                        textAlign: TextAlign.center,
                                        maxLines: 3,
                                        overflow: TextOverflow.ellipsis,
                                      ),
                                    ),
                                  ],
                                ),
                              ),
                            ),
                          )
                        : _chewieController != null
                            ? Center(
                                child: AspectRatio(
                                  aspectRatio: 16 / 9,
                                  child: ClipRRect(
                                    borderRadius: BorderRadius.circular(8),
                                    child: Chewie(controller: _chewieController!),
                                  ),
                                ),
                              )
                            : AspectRatio(
                                aspectRatio: 16 / 9,
                                child: Container(
                                  decoration: BoxDecoration(
                                    color: Colors.black87,
                                    borderRadius: BorderRadius.circular(8),
                                  ),
                                  child: const Center(
                                    child: Text(
                                      'Video player not initialized',
                                      style: TextStyle(
                                        color: Colors.white70,
                                        fontSize: 14,
                                      ),
                                    ),
                                  ),
                                ),
                              ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
</file>

<file path="lib/widgets/media_card.dart">
import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:nivio/models/watch_history.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/services/tmdb_service.dart';

class MediaCard extends StatefulWidget {
  final WatchHistory history;

  const MediaCard({super.key, required this.history});

  @override
  State<MediaCard> createState() => _MediaCardState();
}

class _MediaCardState extends State<MediaCard> with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _scaleAnimation;
  late Animation<double> _elevationAnimation;

  @override
  void initState() {
    super.initState();
    _animationController = AnimationController(
      duration: const Duration(milliseconds: 250),
      vsync: this,
    );
    
    _scaleAnimation = Tween<double>(begin: 1.0, end: 1.04).animate(
      CurvedAnimation(parent: _animationController, curve: Curves.easeOutCubic),
    );
    
    _elevationAnimation = Tween<double>(begin: 0.0, end: 1.0).animate(
      CurvedAnimation(parent: _animationController, curve: Curves.easeOutCubic),
    );
  }

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final tmdbService = TmdbService();
    final posterUrl = tmdbService.getPosterUrl(widget.history.posterPath);

    return MouseRegion(
      onEnter: (_) => _animationController.forward(),
      onExit: (_) => _animationController.reverse(),
      child: GestureDetector(
        onTap: () {
          context.push(
            '/player/${widget.history.tmdbId}'
            '?season=${widget.history.currentSeason}'
            '&episode=${widget.history.currentEpisode}'
            '&type=${widget.history.mediaType}',
          );
        },
        child: AnimatedBuilder(
          animation: _animationController,
          builder: (context, child) {
            return Transform.scale(
              scale: _scaleAnimation.value,
              child: Container(
                width: 130,
                margin: const EdgeInsets.only(right: 8),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    // Poster with progress bar
                    Container(
                      decoration: BoxDecoration(
                        borderRadius: BorderRadius.circular(4),
                        boxShadow: [
                          BoxShadow(
                            color: Colors.black.withOpacity(0.5 * _elevationAnimation.value),
                            blurRadius: 15 * _elevationAnimation.value,
                            spreadRadius: 1 * _elevationAnimation.value,
                            offset: Offset(0, 6 * _elevationAnimation.value),
                          ),
                        ],
                      ),
                      child: Stack(
                        children: [
                          ClipRRect(
                            borderRadius: BorderRadius.circular(4),
                            child: posterUrl.isNotEmpty
                                ? CachedNetworkImage(
                                    imageUrl: posterUrl,
                                    height: 180,
                                    width: 130,
                                    fit: BoxFit.cover,
                                    placeholder: (context, url) => Container(
                                      color: NivioTheme.netflixDarkGrey,
                                      child: const Center(
                                        child: CircularProgressIndicator(
                                          color: NivioTheme.netflixRed,
                                        ),
                                      ),
                                    ),
                                    errorWidget: (context, url, error) => Container(
                                      color: NivioTheme.netflixDarkGrey,
                                      child: const Icon(
                                        Icons.movie,
                                        color: NivioTheme.netflixGrey,
                                        size: 48,
                                      ),
                                    ),
                                  )
                                : Container(
                                    height: 180,
                                    width: 130,
                                    color: NivioTheme.netflixDarkGrey,
                                    child: const Icon(
                                      Icons.movie,
                                      color: NivioTheme.netflixGrey,
                                      size: 48,
                                    ),
                                  ),
                          ),
                          // Progress bar at bottom
                          Positioned(
                            bottom: 0,
                            left: 0,
                            right: 0,
                            child: LinearProgressIndicator(
                              value: widget.history.progressPercent,
                              backgroundColor: Colors.grey.withOpacity(0.3),
                              valueColor: const AlwaysStoppedAnimation<Color>(
                                NivioTheme.netflixRed,
                              ),
                            ),
                          ),
                          // Play icon overlay with animation
                          Positioned.fill(
                            child: AnimatedOpacity(
                              opacity: 0.6 + (0.4 * _elevationAnimation.value),
                              duration: const Duration(milliseconds: 200),
                              child: Container(
                                decoration: BoxDecoration(
                                  gradient: LinearGradient(
                                    begin: Alignment.topCenter,
                                    end: Alignment.bottomCenter,
                                    colors: [
                                      Colors.transparent,
                                      Colors.black.withOpacity(0.7),
                                    ],
                                  ),
                                  borderRadius: BorderRadius.circular(4),
                                ),
                                child: Icon(
                                  Icons.play_circle_fill,
                                  color: Colors.white,
                                  size: 48 + (8 * _elevationAnimation.value),
                                ),
                              ),
                            ),
                          ),
                        ],
                      ),
                    ),
                    const SizedBox(height: 4),
                    // Title
                    Text(
                      widget.history.title,
                      maxLines: 1,
                      overflow: TextOverflow.ellipsis,
                      style: Theme.of(context).textTheme.bodySmall,
                    ),
                    // Episode info for TV shows
                    if (widget.history.mediaType == 'tv')
                      Text(
                        'S${widget.history.currentSeason} E${widget.history.currentEpisode}',
                        style: Theme.of(context).textTheme.bodySmall?.copyWith(
                              color: NivioTheme.netflixGrey,
                            ),
                      ),
                  ],
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
</file>

<file path="macos/Flutter/GeneratedPluginRegistrant.swift">
//
//  Generated file. Do not edit.
//

import FlutterMacOS
import Foundation

import cloud_firestore
import firebase_auth
import firebase_core
import flutter_inappwebview_macos
import package_info_plus
import path_provider_foundation
import shared_preferences_foundation
import sqflite_darwin
import url_launcher_macos
import video_player_avfoundation
import wakelock_plus

func RegisterGeneratedPlugins(registry: FlutterPluginRegistry) {
  FLTFirebaseFirestorePlugin.register(with: registry.registrar(forPlugin: "FLTFirebaseFirestorePlugin"))
  FLTFirebaseAuthPlugin.register(with: registry.registrar(forPlugin: "FLTFirebaseAuthPlugin"))
  FLTFirebaseCorePlugin.register(with: registry.registrar(forPlugin: "FLTFirebaseCorePlugin"))
  InAppWebViewFlutterPlugin.register(with: registry.registrar(forPlugin: "InAppWebViewFlutterPlugin"))
  FPPPackageInfoPlusPlugin.register(with: registry.registrar(forPlugin: "FPPPackageInfoPlusPlugin"))
  PathProviderPlugin.register(with: registry.registrar(forPlugin: "PathProviderPlugin"))
  SharedPreferencesPlugin.register(with: registry.registrar(forPlugin: "SharedPreferencesPlugin"))
  SqflitePlugin.register(with: registry.registrar(forPlugin: "SqflitePlugin"))
  UrlLauncherPlugin.register(with: registry.registrar(forPlugin: "UrlLauncherPlugin"))
  FVPVideoPlayerPlugin.register(with: registry.registrar(forPlugin: "FVPVideoPlayerPlugin"))
  WakelockPlusMacosPlugin.register(with: registry.registrar(forPlugin: "WakelockPlusMacosPlugin"))
}
</file>

<file path="pubspec.lock">
# Generated by pub
# See https://dart.dev/tools/pub/glossary#lockfile
packages:
  _fe_analyzer_shared:
    dependency: transitive
    description:
      name: _fe_analyzer_shared
      sha256: da0d9209ca76bde579f2da330aeb9df62b6319c834fa7baae052021b0462401f
      url: "https://pub.dev"
    source: hosted
    version: "85.0.0"
  _flutterfire_internals:
    dependency: transitive
    description:
      name: _flutterfire_internals
      sha256: ff0a84a2734d9e1089f8aedd5c0af0061b82fb94e95260d943404e0ef2134b11
      url: "https://pub.dev"
    source: hosted
    version: "1.3.59"
  analyzer:
    dependency: transitive
    description:
      name: analyzer
      sha256: f4ad0fea5f102201015c9aae9d93bc02f75dd9491529a8c21f88d17a8523d44c
      url: "https://pub.dev"
    source: hosted
    version: "7.6.0"
  analyzer_plugin:
    dependency: transitive
    description:
      name: analyzer_plugin
      sha256: a5ab7590c27b779f3d4de67f31c4109dbe13dd7339f86461a6f2a8ab2594d8ce
      url: "https://pub.dev"
    source: hosted
    version: "0.13.4"
  ansicolor:
    dependency: transitive
    description:
      name: ansicolor
      sha256: "50e982d500bc863e1d703448afdbf9e5a72eb48840a4f766fa361ffd6877055f"
      url: "https://pub.dev"
    source: hosted
    version: "2.0.3"
  archive:
    dependency: transitive
    description:
      name: archive
      sha256: "2fde1607386ab523f7a36bb3e7edb43bd58e6edaf2ffb29d8a6d578b297fdbbd"
      url: "https://pub.dev"
    source: hosted
    version: "4.0.7"
  args:
    dependency: transitive
    description:
      name: args
      sha256: d0481093c50b1da8910eb0bb301626d4d8eb7284aa739614d2b394ee09e3ea04
      url: "https://pub.dev"
    source: hosted
    version: "2.7.0"
  async:
    dependency: transitive
    description:
      name: async
      sha256: "758e6d74e971c3e5aceb4110bfd6698efc7f501675bcfe0c775459a8140750eb"
      url: "https://pub.dev"
    source: hosted
    version: "2.13.0"
  boolean_selector:
    dependency: transitive
    description:
      name: boolean_selector
      sha256: "8aab1771e1243a5063b8b0ff68042d67334e3feab9e95b9490f9a6ebf73b42ea"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.2"
  build:
    dependency: transitive
    description:
      name: build
      sha256: "51dc711996cbf609b90cbe5b335bbce83143875a9d58e4b5c6d3c4f684d3dda7"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.4"
  build_config:
    dependency: transitive
    description:
      name: build_config
      sha256: "4ae2de3e1e67ea270081eaee972e1bd8f027d459f249e0f1186730784c2e7e33"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.2"
  build_daemon:
    dependency: transitive
    description:
      name: build_daemon
      sha256: bf05f6e12cfea92d3c09308d7bcdab1906cd8a179b023269eed00c071004b957
      url: "https://pub.dev"
    source: hosted
    version: "4.1.1"
  build_resolvers:
    dependency: transitive
    description:
      name: build_resolvers
      sha256: ee4257b3f20c0c90e72ed2b57ad637f694ccba48839a821e87db762548c22a62
      url: "https://pub.dev"
    source: hosted
    version: "2.5.4"
  build_runner:
    dependency: "direct dev"
    description:
      name: build_runner
      sha256: "382a4d649addbfb7ba71a3631df0ec6a45d5ab9b098638144faf27f02778eb53"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.4"
  build_runner_core:
    dependency: transitive
    description:
      name: build_runner_core
      sha256: "85fbbb1036d576d966332a3f5ce83f2ce66a40bea1a94ad2d5fc29a19a0d3792"
      url: "https://pub.dev"
    source: hosted
    version: "9.1.2"
  built_collection:
    dependency: transitive
    description:
      name: built_collection
      sha256: "376e3dd27b51ea877c28d525560790aee2e6fbb5f20e2f85d5081027d94e2100"
      url: "https://pub.dev"
    source: hosted
    version: "5.1.1"
  built_value:
    dependency: transitive
    description:
      name: built_value
      sha256: a30f0a0e38671e89a492c44d005b5545b830a961575bbd8336d42869ff71066d
      url: "https://pub.dev"
    source: hosted
    version: "8.12.0"
  cached_network_image:
    dependency: "direct main"
    description:
      name: cached_network_image
      sha256: "7c1183e361e5c8b0a0f21a28401eecdbde252441106a9816400dd4c2b2424916"
      url: "https://pub.dev"
    source: hosted
    version: "3.4.1"
  cached_network_image_platform_interface:
    dependency: transitive
    description:
      name: cached_network_image_platform_interface
      sha256: "35814b016e37fbdc91f7ae18c8caf49ba5c88501813f73ce8a07027a395e2829"
      url: "https://pub.dev"
    source: hosted
    version: "4.1.1"
  cached_network_image_web:
    dependency: transitive
    description:
      name: cached_network_image_web
      sha256: "980842f4e8e2535b8dbd3d5ca0b1f0ba66bf61d14cc3a17a9b4788a3685ba062"
      url: "https://pub.dev"
    source: hosted
    version: "1.3.1"
  characters:
    dependency: transitive
    description:
      name: characters
      sha256: f71061c654a3380576a52b451dd5532377954cf9dbd272a78fc8479606670803
      url: "https://pub.dev"
    source: hosted
    version: "1.4.0"
  checked_yaml:
    dependency: transitive
    description:
      name: checked_yaml
      sha256: "959525d3162f249993882720d52b7e0c833978df229be20702b33d48d91de70f"
      url: "https://pub.dev"
    source: hosted
    version: "2.0.4"
  chewie:
    dependency: "direct main"
    description:
      name: chewie
      sha256: "44bcfc5f0dfd1de290c87c9d86a61308b3282a70b63435d5557cfd60f54a69ca"
      url: "https://pub.dev"
    source: hosted
    version: "1.13.0"
  cli_util:
    dependency: transitive
    description:
      name: cli_util
      sha256: ff6785f7e9e3c38ac98b2fb035701789de90154024a75b6cb926445e83197d1c
      url: "https://pub.dev"
    source: hosted
    version: "0.4.2"
  clock:
    dependency: transitive
    description:
      name: clock
      sha256: fddb70d9b5277016c77a80201021d40a2247104d9f4aa7bab7157b7e3f05b84b
      url: "https://pub.dev"
    source: hosted
    version: "1.1.2"
  cloud_firestore:
    dependency: "direct main"
    description:
      name: cloud_firestore
      sha256: "2d33da4465bdb81b6685c41b535895065adcb16261beb398f5f3bbc623979e9c"
      url: "https://pub.dev"
    source: hosted
    version: "5.6.12"
  cloud_firestore_platform_interface:
    dependency: transitive
    description:
      name: cloud_firestore_platform_interface
      sha256: "413c4e01895cf9cb3de36fa5c219479e06cd4722876274ace5dfc9f13ab2e39b"
      url: "https://pub.dev"
    source: hosted
    version: "6.6.12"
  cloud_firestore_web:
    dependency: transitive
    description:
      name: cloud_firestore_web
      sha256: c1e30fc4a0fcedb08723fb4b1f12ee4e56d937cbf9deae1bda43cbb6367bb4cf
      url: "https://pub.dev"
    source: hosted
    version: "4.4.12"
  code_builder:
    dependency: transitive
    description:
      name: code_builder
      sha256: "11654819532ba94c34de52ff5feb52bd81cba1de00ef2ed622fd50295f9d4243"
      url: "https://pub.dev"
    source: hosted
    version: "4.11.0"
  collection:
    dependency: transitive
    description:
      name: collection
      sha256: "2f5709ae4d3d59dd8f7cd309b4e023046b57d8a6c82130785d2b0e5868084e76"
      url: "https://pub.dev"
    source: hosted
    version: "1.19.1"
  convert:
    dependency: transitive
    description:
      name: convert
      sha256: b30acd5944035672bc15c6b7a8b47d773e41e2f17de064350988c5d02adb1c68
      url: "https://pub.dev"
    source: hosted
    version: "3.1.2"
  crypto:
    dependency: transitive
    description:
      name: crypto
      sha256: c8ea0233063ba03258fbcf2ca4d6dadfefe14f02fab57702265467a19f27fadf
      url: "https://pub.dev"
    source: hosted
    version: "3.0.7"
  csslib:
    dependency: transitive
    description:
      name: csslib
      sha256: "09bad715f418841f976c77db72d5398dc1253c21fb9c0c7f0b0b985860b2d58e"
      url: "https://pub.dev"
    source: hosted
    version: "1.0.2"
  cupertino_icons:
    dependency: transitive
    description:
      name: cupertino_icons
      sha256: ba631d1c7f7bef6b729a622b7b752645a2d076dba9976925b8f25725a30e1ee6
      url: "https://pub.dev"
    source: hosted
    version: "1.0.8"
  custom_lint_core:
    dependency: transitive
    description:
      name: custom_lint_core
      sha256: "31110af3dde9d29fb10828ca33f1dce24d2798477b167675543ce3d208dee8be"
      url: "https://pub.dev"
    source: hosted
    version: "0.7.5"
  custom_lint_visitor:
    dependency: transitive
    description:
      name: custom_lint_visitor
      sha256: "4a86a0d8415a91fbb8298d6ef03e9034dc8e323a599ddc4120a0e36c433983a2"
      url: "https://pub.dev"
    source: hosted
    version: "1.0.0+7.7.0"
  dart_style:
    dependency: transitive
    description:
      name: dart_style
      sha256: "8a0e5fba27e8ee025d2ffb4ee820b4e6e2cf5e4246a6b1a477eb66866947e0bb"
      url: "https://pub.dev"
    source: hosted
    version: "3.1.1"
  dbus:
    dependency: transitive
    description:
      name: dbus
      sha256: "79e0c23480ff85dc68de79e2cd6334add97e48f7f4865d17686dd6ea81a47e8c"
      url: "https://pub.dev"
    source: hosted
    version: "0.7.11"
  dio:
    dependency: "direct main"
    description:
      name: dio
      sha256: d90ee57923d1828ac14e492ca49440f65477f4bb1263575900be731a3dac66a9
      url: "https://pub.dev"
    source: hosted
    version: "5.9.0"
  dio_web_adapter:
    dependency: transitive
    description:
      name: dio_web_adapter
      sha256: "7586e476d70caecaf1686d21eee7247ea43ef5c345eab9e0cc3583ff13378d78"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.1"
  fake_async:
    dependency: transitive
    description:
      name: fake_async
      sha256: "5368f224a74523e8d2e7399ea1638b37aecfca824a3cc4dfdf77bf1fa905ac44"
      url: "https://pub.dev"
    source: hosted
    version: "1.3.3"
  ffi:
    dependency: transitive
    description:
      name: ffi
      sha256: "289279317b4b16eb2bb7e271abccd4bf84ec9bdcbe999e278a94b804f5630418"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.4"
  file:
    dependency: transitive
    description:
      name: file
      sha256: a3b4f84adafef897088c160faf7dfffb7696046cb13ae90b508c2cbc95d3b8d4
      url: "https://pub.dev"
    source: hosted
    version: "7.0.1"
  firebase_auth:
    dependency: "direct main"
    description:
      name: firebase_auth
      sha256: "0fed2133bee1369ee1118c1fef27b2ce0d84c54b7819a2b17dada5cfec3b03ff"
      url: "https://pub.dev"
    source: hosted
    version: "5.7.0"
  firebase_auth_platform_interface:
    dependency: transitive
    description:
      name: firebase_auth_platform_interface
      sha256: "871c9df4ec9a754d1a793f7eb42fa3b94249d464cfb19152ba93e14a5966b386"
      url: "https://pub.dev"
    source: hosted
    version: "7.7.3"
  firebase_auth_web:
    dependency: transitive
    description:
      name: firebase_auth_web
      sha256: d9ada769c43261fd1b18decf113186e915c921a811bd5014f5ea08f4cf4bc57e
      url: "https://pub.dev"
    source: hosted
    version: "5.15.3"
  firebase_core:
    dependency: "direct main"
    description:
      name: firebase_core
      sha256: "7be63a3f841fc9663342f7f3a011a42aef6a61066943c90b1c434d79d5c995c5"
      url: "https://pub.dev"
    source: hosted
    version: "3.15.2"
  firebase_core_platform_interface:
    dependency: transitive
    description:
      name: firebase_core_platform_interface
      sha256: cccb4f572325dc14904c02fcc7db6323ad62ba02536833dddb5c02cac7341c64
      url: "https://pub.dev"
    source: hosted
    version: "6.0.2"
  firebase_core_web:
    dependency: transitive
    description:
      name: firebase_core_web
      sha256: "0ed0dc292e8f9ac50992e2394e9d336a0275b6ae400d64163fdf0a8a8b556c37"
      url: "https://pub.dev"
    source: hosted
    version: "2.24.1"
  fixnum:
    dependency: transitive
    description:
      name: fixnum
      sha256: b6dc7065e46c974bc7c5f143080a6764ec7a4be6da1285ececdc37be96de53be
      url: "https://pub.dev"
    source: hosted
    version: "1.1.1"
  flutter:
    dependency: "direct main"
    description: flutter
    source: sdk
    version: "0.0.0"
  flutter_cache_manager:
    dependency: transitive
    description:
      name: flutter_cache_manager
      sha256: "400b6592f16a4409a7f2bb929a9a7e38c72cceb8ffb99ee57bbf2cb2cecf8386"
      url: "https://pub.dev"
    source: hosted
    version: "3.4.1"
  flutter_inappwebview:
    dependency: "direct main"
    description:
      name: flutter_inappwebview
      sha256: "80092d13d3e29b6227e25b67973c67c7210bd5e35c4b747ca908e31eb71a46d5"
      url: "https://pub.dev"
    source: hosted
    version: "6.1.5"
  flutter_inappwebview_android:
    dependency: transitive
    description:
      name: flutter_inappwebview_android
      sha256: "62557c15a5c2db5d195cb3892aab74fcaec266d7b86d59a6f0027abd672cddba"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.3"
  flutter_inappwebview_internal_annotations:
    dependency: transitive
    description:
      name: flutter_inappwebview_internal_annotations
      sha256: "787171d43f8af67864740b6f04166c13190aa74a1468a1f1f1e9ee5b90c359cd"
      url: "https://pub.dev"
    source: hosted
    version: "1.2.0"
  flutter_inappwebview_ios:
    dependency: transitive
    description:
      name: flutter_inappwebview_ios
      sha256: "5818cf9b26cf0cbb0f62ff50772217d41ea8d3d9cc00279c45f8aabaa1b4025d"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.2"
  flutter_inappwebview_macos:
    dependency: transitive
    description:
      name: flutter_inappwebview_macos
      sha256: c1fbb86af1a3738e3541364d7d1866315ffb0468a1a77e34198c9be571287da1
      url: "https://pub.dev"
    source: hosted
    version: "1.1.2"
  flutter_inappwebview_platform_interface:
    dependency: transitive
    description:
      name: flutter_inappwebview_platform_interface
      sha256: cf5323e194096b6ede7a1ca808c3e0a078e4b33cc3f6338977d75b4024ba2500
      url: "https://pub.dev"
    source: hosted
    version: "1.3.0+1"
  flutter_inappwebview_web:
    dependency: transitive
    description:
      name: flutter_inappwebview_web
      sha256: "55f89c83b0a0d3b7893306b3bb545ba4770a4df018204917148ebb42dc14a598"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.2"
  flutter_inappwebview_windows:
    dependency: transitive
    description:
      name: flutter_inappwebview_windows
      sha256: "8b4d3a46078a2cdc636c4a3d10d10f2a16882f6be607962dbfff8874d1642055"
      url: "https://pub.dev"
    source: hosted
    version: "0.6.0"
  flutter_launcher_icons:
    dependency: "direct dev"
    description:
      name: flutter_launcher_icons
      sha256: "10f13781741a2e3972126fae08393d3c4e01fa4cd7473326b94b72cf594195e7"
      url: "https://pub.dev"
    source: hosted
    version: "0.14.4"
  flutter_lints:
    dependency: "direct dev"
    description:
      name: flutter_lints
      sha256: "3105dc8492f6183fb076ccf1f351ac3d60564bff92e20bfc4af9cc1651f4e7e1"
      url: "https://pub.dev"
    source: hosted
    version: "6.0.0"
  flutter_native_splash:
    dependency: "direct dev"
    description:
      name: flutter_native_splash
      sha256: "4fb9f4113350d3a80841ce05ebf1976a36de622af7d19aca0ca9a9911c7ff002"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.7"
  flutter_riverpod:
    dependency: "direct main"
    description:
      name: flutter_riverpod
      sha256: "9532ee6db4a943a1ed8383072a2e3eeda041db5657cdf6d2acecf3c21ecbe7e1"
      url: "https://pub.dev"
    source: hosted
    version: "2.6.1"
  flutter_svg:
    dependency: "direct main"
    description:
      name: flutter_svg
      sha256: "055de8921be7b8e8b98a233c7a5ef84b3a6fcc32f46f1ebf5b9bb3576d108355"
      url: "https://pub.dev"
    source: hosted
    version: "2.2.2"
  flutter_test:
    dependency: "direct dev"
    description: flutter
    source: sdk
    version: "0.0.0"
  flutter_web_plugins:
    dependency: transitive
    description: flutter
    source: sdk
    version: "0.0.0"
  freezed:
    dependency: "direct dev"
    description:
      name: freezed
      sha256: "59a584c24b3acdc5250bb856d0d3e9c0b798ed14a4af1ddb7dc1c7b41df91c9c"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.8"
  freezed_annotation:
    dependency: "direct main"
    description:
      name: freezed_annotation
      sha256: c2e2d632dd9b8a2b7751117abcfc2b4888ecfe181bd9fca7170d9ef02e595fe2
      url: "https://pub.dev"
    source: hosted
    version: "2.4.4"
  frontend_server_client:
    dependency: transitive
    description:
      name: frontend_server_client
      sha256: f64a0333a82f30b0cca061bc3d143813a486dc086b574bfb233b7c1372427694
      url: "https://pub.dev"
    source: hosted
    version: "4.0.0"
  glob:
    dependency: transitive
    description:
      name: glob
      sha256: c3f1ee72c96f8f78935e18aa8cecced9ab132419e8625dc187e1c2408efc20de
      url: "https://pub.dev"
    source: hosted
    version: "2.1.3"
  go_router:
    dependency: "direct main"
    description:
      name: go_router
      sha256: f02fd7d2a4dc512fec615529824fdd217fecb3a3d3de68360293a551f21634b3
      url: "https://pub.dev"
    source: hosted
    version: "14.8.1"
  graphs:
    dependency: transitive
    description:
      name: graphs
      sha256: "741bbf84165310a68ff28fe9e727332eef1407342fca52759cb21ad8177bb8d0"
      url: "https://pub.dev"
    source: hosted
    version: "2.3.2"
  hive:
    dependency: "direct main"
    description:
      name: hive
      sha256: "8dcf6db979d7933da8217edcec84e9df1bdb4e4edc7fc77dbd5aa74356d6d941"
      url: "https://pub.dev"
    source: hosted
    version: "2.2.3"
  hive_flutter:
    dependency: "direct main"
    description:
      name: hive_flutter
      sha256: dca1da446b1d808a51689fb5d0c6c9510c0a2ba01e22805d492c73b68e33eecc
      url: "https://pub.dev"
    source: hosted
    version: "1.1.0"
  html:
    dependency: transitive
    description:
      name: html
      sha256: "6d1264f2dffa1b1101c25a91dff0dc2daee4c18e87cd8538729773c073dbf602"
      url: "https://pub.dev"
    source: hosted
    version: "0.15.6"
  http:
    dependency: transitive
    description:
      name: http
      sha256: "87721a4a50b19c7f1d49001e51409bddc46303966ce89a65af4f4e6004896412"
      url: "https://pub.dev"
    source: hosted
    version: "1.6.0"
  http_multi_server:
    dependency: transitive
    description:
      name: http_multi_server
      sha256: aa6199f908078bb1c5efb8d8638d4ae191aac11b311132c3ef48ce352fb52ef8
      url: "https://pub.dev"
    source: hosted
    version: "3.2.2"
  http_parser:
    dependency: transitive
    description:
      name: http_parser
      sha256: "178d74305e7866013777bab2c3d8726205dc5a4dd935297175b19a23a2e66571"
      url: "https://pub.dev"
    source: hosted
    version: "4.1.2"
  image:
    dependency: transitive
    description:
      name: image
      sha256: "4e973fcf4caae1a4be2fa0a13157aa38a8f9cb049db6529aa00b4d71abc4d928"
      url: "https://pub.dev"
    source: hosted
    version: "4.5.4"
  intl:
    dependency: "direct main"
    description:
      name: intl
      sha256: d6f56758b7d3014a48af9701c085700aac781a92a87a62b1333b46d8879661cf
      url: "https://pub.dev"
    source: hosted
    version: "0.19.0"
  io:
    dependency: transitive
    description:
      name: io
      sha256: dfd5a80599cf0165756e3181807ed3e77daf6dd4137caaad72d0b7931597650b
      url: "https://pub.dev"
    source: hosted
    version: "1.0.5"
  js:
    dependency: transitive
    description:
      name: js
      sha256: "53385261521cc4a0c4658fd0ad07a7d14591cf8fc33abbceae306ddb974888dc"
      url: "https://pub.dev"
    source: hosted
    version: "0.7.2"
  json_annotation:
    dependency: "direct main"
    description:
      name: json_annotation
      sha256: "1ce844379ca14835a50d2f019a3099f419082cfdd231cd86a142af94dd5c6bb1"
      url: "https://pub.dev"
    source: hosted
    version: "4.9.0"
  json_serializable:
    dependency: "direct dev"
    description:
      name: json_serializable
      sha256: c50ef5fc083d5b5e12eef489503ba3bf5ccc899e487d691584699b4bdefeea8c
      url: "https://pub.dev"
    source: hosted
    version: "6.9.5"
  leak_tracker:
    dependency: transitive
    description:
      name: leak_tracker
      sha256: "33e2e26bdd85a0112ec15400c8cbffea70d0f9c3407491f672a2fad47915e2de"
      url: "https://pub.dev"
    source: hosted
    version: "11.0.2"
  leak_tracker_flutter_testing:
    dependency: transitive
    description:
      name: leak_tracker_flutter_testing
      sha256: "1dbc140bb5a23c75ea9c4811222756104fbcd1a27173f0c34ca01e16bea473c1"
      url: "https://pub.dev"
    source: hosted
    version: "3.0.10"
  leak_tracker_testing:
    dependency: transitive
    description:
      name: leak_tracker_testing
      sha256: "8d5a2d49f4a66b49744b23b018848400d23e54caf9463f4eb20df3eb8acb2eb1"
      url: "https://pub.dev"
    source: hosted
    version: "3.0.2"
  lints:
    dependency: transitive
    description:
      name: lints
      sha256: a5e2b223cb7c9c8efdc663ef484fdd95bb243bff242ef5b13e26883547fce9a0
      url: "https://pub.dev"
    source: hosted
    version: "6.0.0"
  logging:
    dependency: transitive
    description:
      name: logging
      sha256: c8245ada5f1717ed44271ed1c26b8ce85ca3228fd2ffdb75468ab01979309d61
      url: "https://pub.dev"
    source: hosted
    version: "1.3.0"
  matcher:
    dependency: transitive
    description:
      name: matcher
      sha256: dc58c723c3c24bf8d3e2d3ad3f2f9d7bd9cf43ec6feaa64181775e60190153f2
      url: "https://pub.dev"
    source: hosted
    version: "0.12.17"
  material_color_utilities:
    dependency: transitive
    description:
      name: material_color_utilities
      sha256: f7142bb1154231d7ea5f96bc7bde4bda2a0945d2806bb11670e30b850d56bdec
      url: "https://pub.dev"
    source: hosted
    version: "0.11.1"
  meta:
    dependency: transitive
    description:
      name: meta
      sha256: "23f08335362185a5ea2ad3a4e597f1375e78bce8a040df5c600c8d3552ef2394"
      url: "https://pub.dev"
    source: hosted
    version: "1.17.0"
  mime:
    dependency: transitive
    description:
      name: mime
      sha256: "41a20518f0cb1256669420fdba0cd90d21561e560ac240f26ef8322e45bb7ed6"
      url: "https://pub.dev"
    source: hosted
    version: "2.0.0"
  nested:
    dependency: transitive
    description:
      name: nested
      sha256: "03bac4c528c64c95c722ec99280375a6f2fc708eec17c7b3f07253b626cd2a20"
      url: "https://pub.dev"
    source: hosted
    version: "1.0.0"
  octo_image:
    dependency: transitive
    description:
      name: octo_image
      sha256: "34faa6639a78c7e3cbe79be6f9f96535867e879748ade7d17c9b1ae7536293bd"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.0"
  package_config:
    dependency: transitive
    description:
      name: package_config
      sha256: f096c55ebb7deb7e384101542bfba8c52696c1b56fca2eb62827989ef2353bbc
      url: "https://pub.dev"
    source: hosted
    version: "2.2.0"
  package_info_plus:
    dependency: transitive
    description:
      name: package_info_plus
      sha256: f69da0d3189a4b4ceaeb1a3defb0f329b3b352517f52bed4290f83d4f06bc08d
      url: "https://pub.dev"
    source: hosted
    version: "9.0.0"
  package_info_plus_platform_interface:
    dependency: transitive
    description:
      name: package_info_plus_platform_interface
      sha256: "202a487f08836a592a6bd4f901ac69b3a8f146af552bbd14407b6b41e1c3f086"
      url: "https://pub.dev"
    source: hosted
    version: "3.2.1"
  path:
    dependency: transitive
    description:
      name: path
      sha256: "75cca69d1490965be98c73ceaea117e8a04dd21217b37b292c9ddbec0d955bc5"
      url: "https://pub.dev"
    source: hosted
    version: "1.9.1"
  path_parsing:
    dependency: transitive
    description:
      name: path_parsing
      sha256: "883402936929eac138ee0a45da5b0f2c80f89913e6dc3bf77eb65b84b409c6ca"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.0"
  path_provider:
    dependency: transitive
    description:
      name: path_provider
      sha256: "50c5dd5b6e1aaf6fb3a78b33f6aa3afca52bf903a8a5298f53101fdaee55bbcd"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.5"
  path_provider_android:
    dependency: transitive
    description:
      name: path_provider_android
      sha256: e122c5ea805bb6773bb12ce667611265980940145be920cd09a4b0ec0285cb16
      url: "https://pub.dev"
    source: hosted
    version: "2.2.20"
  path_provider_foundation:
    dependency: transitive
    description:
      name: path_provider_foundation
      sha256: efaec349ddfc181528345c56f8eda9d6cccd71c177511b132c6a0ddaefaa2738
      url: "https://pub.dev"
    source: hosted
    version: "2.4.3"
  path_provider_linux:
    dependency: transitive
    description:
      name: path_provider_linux
      sha256: f7a1fe3a634fe7734c8d3f2766ad746ae2a2884abe22e241a8b301bf5cac3279
      url: "https://pub.dev"
    source: hosted
    version: "2.2.1"
  path_provider_platform_interface:
    dependency: transitive
    description:
      name: path_provider_platform_interface
      sha256: "88f5779f72ba699763fa3a3b06aa4bf6de76c8e5de842cf6f29e2e06476c2334"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.2"
  path_provider_windows:
    dependency: transitive
    description:
      name: path_provider_windows
      sha256: bd6f00dbd873bfb70d0761682da2b3a2c2fccc2b9e84c495821639601d81afe7
      url: "https://pub.dev"
    source: hosted
    version: "2.3.0"
  petitparser:
    dependency: transitive
    description:
      name: petitparser
      sha256: "1a97266a94f7350d30ae522c0af07890c70b8e62c71e8e3920d1db4d23c057d1"
      url: "https://pub.dev"
    source: hosted
    version: "7.0.1"
  platform:
    dependency: transitive
    description:
      name: platform
      sha256: "5d6b1b0036a5f331ebc77c850ebc8506cbc1e9416c27e59b439f917a902a4984"
      url: "https://pub.dev"
    source: hosted
    version: "3.1.6"
  plugin_platform_interface:
    dependency: transitive
    description:
      name: plugin_platform_interface
      sha256: "4820fbfdb9478b1ebae27888254d445073732dae3d6ea81f0b7e06d5dedc3f02"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.8"
  pool:
    dependency: transitive
    description:
      name: pool
      sha256: "978783255c543aa3586a1b3c21f6e9d720eb315376a915872c61ef8b5c20177d"
      url: "https://pub.dev"
    source: hosted
    version: "1.5.2"
  posix:
    dependency: transitive
    description:
      name: posix
      sha256: "6323a5b0fa688b6a010df4905a56b00181479e6d10534cecfecede2aa55add61"
      url: "https://pub.dev"
    source: hosted
    version: "6.0.3"
  provider:
    dependency: transitive
    description:
      name: provider
      sha256: "4e82183fa20e5ca25703ead7e05de9e4cceed1fbd1eadc1ac3cb6f565a09f272"
      url: "https://pub.dev"
    source: hosted
    version: "6.1.5+1"
  pub_semver:
    dependency: transitive
    description:
      name: pub_semver
      sha256: "5bfcf68ca79ef689f8990d1160781b4bad40a3bd5e5218ad4076ddb7f4081585"
      url: "https://pub.dev"
    source: hosted
    version: "2.2.0"
  pubspec_parse:
    dependency: transitive
    description:
      name: pubspec_parse
      sha256: "0560ba233314abbed0a48a2956f7f022cce7c3e1e73df540277da7544cad4082"
      url: "https://pub.dev"
    source: hosted
    version: "1.5.0"
  riverpod:
    dependency: transitive
    description:
      name: riverpod
      sha256: "59062512288d3056b2321804332a13ffdd1bf16df70dcc8e506e411280a72959"
      url: "https://pub.dev"
    source: hosted
    version: "2.6.1"
  riverpod_analyzer_utils:
    dependency: transitive
    description:
      name: riverpod_analyzer_utils
      sha256: "837a6dc33f490706c7f4632c516bcd10804ee4d9ccc8046124ca56388715fdf3"
      url: "https://pub.dev"
    source: hosted
    version: "0.5.9"
  riverpod_annotation:
    dependency: "direct main"
    description:
      name: riverpod_annotation
      sha256: e14b0bf45b71326654e2705d462f21b958f987087be850afd60578fcd502d1b8
      url: "https://pub.dev"
    source: hosted
    version: "2.6.1"
  riverpod_generator:
    dependency: "direct dev"
    description:
      name: riverpod_generator
      sha256: "120d3310f687f43e7011bb213b90a436f1bbc300f0e4b251a72c39bccb017a4f"
      url: "https://pub.dev"
    source: hosted
    version: "2.6.4"
  rxdart:
    dependency: transitive
    description:
      name: rxdart
      sha256: "5c3004a4a8dbb94bd4bf5412a4def4acdaa12e12f269737a5751369e12d1a962"
      url: "https://pub.dev"
    source: hosted
    version: "0.28.0"
  shared_preferences:
    dependency: "direct main"
    description:
      name: shared_preferences
      sha256: "6e8bf70b7fef813df4e9a36f658ac46d107db4b4cfe1048b477d4e453a8159f5"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.3"
  shared_preferences_android:
    dependency: transitive
    description:
      name: shared_preferences_android
      sha256: "34266009473bf71d748912da4bf62d439185226c03e01e2d9687bc65bbfcb713"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.15"
  shared_preferences_foundation:
    dependency: transitive
    description:
      name: shared_preferences_foundation
      sha256: "1c33a907142607c40a7542768ec9badfd16293bac51da3a4482623d15845f88b"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.5"
  shared_preferences_linux:
    dependency: transitive
    description:
      name: shared_preferences_linux
      sha256: "580abfd40f415611503cae30adf626e6656dfb2f0cee8f465ece7b6defb40f2f"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.1"
  shared_preferences_platform_interface:
    dependency: transitive
    description:
      name: shared_preferences_platform_interface
      sha256: "57cbf196c486bc2cf1f02b85784932c6094376284b3ad5779d1b1c6c6a816b80"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.1"
  shared_preferences_web:
    dependency: transitive
    description:
      name: shared_preferences_web
      sha256: c49bd060261c9a3f0ff445892695d6212ff603ef3115edbb448509d407600019
      url: "https://pub.dev"
    source: hosted
    version: "2.4.3"
  shared_preferences_windows:
    dependency: transitive
    description:
      name: shared_preferences_windows
      sha256: "94ef0f72b2d71bc3e700e025db3710911bd51a71cefb65cc609dd0d9a982e3c1"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.1"
  shelf:
    dependency: transitive
    description:
      name: shelf
      sha256: e7dd780a7ffb623c57850b33f43309312fc863fb6aa3d276a754bb299839ef12
      url: "https://pub.dev"
    source: hosted
    version: "1.4.2"
  shelf_web_socket:
    dependency: transitive
    description:
      name: shelf_web_socket
      sha256: "3632775c8e90d6c9712f883e633716432a27758216dfb61bd86a8321c0580925"
      url: "https://pub.dev"
    source: hosted
    version: "3.0.0"
  shimmer:
    dependency: "direct main"
    description:
      name: shimmer
      sha256: "5f88c883a22e9f9f299e5ba0e4f7e6054857224976a5d9f839d4ebdc94a14ac9"
      url: "https://pub.dev"
    source: hosted
    version: "3.0.0"
  simple_sparse_list:
    dependency: transitive
    description:
      name: simple_sparse_list
      sha256: aa648fd240fa39b49dcd11c19c266990006006de6699a412de485695910fbc1f
      url: "https://pub.dev"
    source: hosted
    version: "0.1.4"
  sky_engine:
    dependency: transitive
    description: flutter
    source: sdk
    version: "0.0.0"
  source_gen:
    dependency: transitive
    description:
      name: source_gen
      sha256: "35c8150ece9e8c8d263337a265153c3329667640850b9304861faea59fc98f6b"
      url: "https://pub.dev"
    source: hosted
    version: "2.0.0"
  source_helper:
    dependency: transitive
    description:
      name: source_helper
      sha256: a447acb083d3a5ef17f983dd36201aeea33fedadb3228fa831f2f0c92f0f3aca
      url: "https://pub.dev"
    source: hosted
    version: "1.3.7"
  source_span:
    dependency: transitive
    description:
      name: source_span
      sha256: "254ee5351d6cb365c859e20ee823c3bb479bf4a293c22d17a9f1bf144ce86f7c"
      url: "https://pub.dev"
    source: hosted
    version: "1.10.1"
  sqflite:
    dependency: transitive
    description:
      name: sqflite
      sha256: e2297b1da52f127bc7a3da11439985d9b536f75070f3325e62ada69a5c585d03
      url: "https://pub.dev"
    source: hosted
    version: "2.4.2"
  sqflite_android:
    dependency: transitive
    description:
      name: sqflite_android
      sha256: ecd684501ebc2ae9a83536e8b15731642b9570dc8623e0073d227d0ee2bfea88
      url: "https://pub.dev"
    source: hosted
    version: "2.4.2+2"
  sqflite_common:
    dependency: transitive
    description:
      name: sqflite_common
      sha256: "6ef422a4525ecc601db6c0a2233ff448c731307906e92cabc9ba292afaae16a6"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.6"
  sqflite_darwin:
    dependency: transitive
    description:
      name: sqflite_darwin
      sha256: "279832e5cde3fe99e8571879498c9211f3ca6391b0d818df4e17d9fff5c6ccb3"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.2"
  sqflite_platform_interface:
    dependency: transitive
    description:
      name: sqflite_platform_interface
      sha256: "8dd4515c7bdcae0a785b0062859336de775e8c65db81ae33dd5445f35be61920"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.0"
  stack_trace:
    dependency: transitive
    description:
      name: stack_trace
      sha256: "8b27215b45d22309b5cddda1aa2b19bdfec9df0e765f2de506401c071d38d1b1"
      url: "https://pub.dev"
    source: hosted
    version: "1.12.1"
  state_notifier:
    dependency: transitive
    description:
      name: state_notifier
      sha256: b8677376aa54f2d7c58280d5a007f9e8774f1968d1fb1c096adcb4792fba29bb
      url: "https://pub.dev"
    source: hosted
    version: "1.0.0"
  stream_channel:
    dependency: transitive
    description:
      name: stream_channel
      sha256: "969e04c80b8bcdf826f8f16579c7b14d780458bd97f56d107d3950fdbeef059d"
      url: "https://pub.dev"
    source: hosted
    version: "2.1.4"
  stream_transform:
    dependency: transitive
    description:
      name: stream_transform
      sha256: ad47125e588cfd37a9a7f86c7d6356dde8dfe89d071d293f80ca9e9273a33871
      url: "https://pub.dev"
    source: hosted
    version: "2.1.1"
  string_scanner:
    dependency: transitive
    description:
      name: string_scanner
      sha256: "921cd31725b72fe181906c6a94d987c78e3b98c2e205b397ea399d4054872b43"
      url: "https://pub.dev"
    source: hosted
    version: "1.4.1"
  synchronized:
    dependency: transitive
    description:
      name: synchronized
      sha256: c254ade258ec8282947a0acbbc90b9575b4f19673533ee46f2f6e9b3aeefd7c0
      url: "https://pub.dev"
    source: hosted
    version: "3.4.0"
  term_glyph:
    dependency: transitive
    description:
      name: term_glyph
      sha256: "7f554798625ea768a7518313e58f83891c7f5024f88e46e7182a4558850a4b8e"
      url: "https://pub.dev"
    source: hosted
    version: "1.2.2"
  test_api:
    dependency: transitive
    description:
      name: test_api
      sha256: ab2726c1a94d3176a45960b6234466ec367179b87dd74f1611adb1f3b5fb9d55
      url: "https://pub.dev"
    source: hosted
    version: "0.7.7"
  timing:
    dependency: transitive
    description:
      name: timing
      sha256: "62ee18aca144e4a9f29d212f5a4c6a053be252b895ab14b5821996cff4ed90fe"
      url: "https://pub.dev"
    source: hosted
    version: "1.0.2"
  typed_data:
    dependency: transitive
    description:
      name: typed_data
      sha256: f9049c039ebfeb4cf7a7104a675823cd72dba8297f264b6637062516699fa006
      url: "https://pub.dev"
    source: hosted
    version: "1.4.0"
  unicode:
    dependency: transitive
    description:
      name: unicode
      sha256: "0d99edbd2e74726bed2e4989713c8bec02e5581628e334d8c88c0271593fb402"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.8"
  universal_io:
    dependency: transitive
    description:
      name: universal_io
      sha256: "1722b2dcc462b4b2f3ee7d188dad008b6eb4c40bbd03a3de451d82c78bba9aad"
      url: "https://pub.dev"
    source: hosted
    version: "2.2.2"
  url_launcher:
    dependency: "direct main"
    description:
      name: url_launcher
      sha256: f6a7e5c4835bb4e3026a04793a4199ca2d14c739ec378fdfe23fc8075d0439f8
      url: "https://pub.dev"
    source: hosted
    version: "6.3.2"
  url_launcher_android:
    dependency: transitive
    description:
      name: url_launcher_android
      sha256: "5c8b6c2d89a78f5a1cca70a73d9d5f86c701b36b42f9c9dac7bad592113c28e9"
      url: "https://pub.dev"
    source: hosted
    version: "6.3.24"
  url_launcher_ios:
    dependency: transitive
    description:
      name: url_launcher_ios
      sha256: "6b63f1441e4f653ae799166a72b50b1767321ecc263a57aadf825a7a2a5477d9"
      url: "https://pub.dev"
    source: hosted
    version: "6.3.5"
  url_launcher_linux:
    dependency: transitive
    description:
      name: url_launcher_linux
      sha256: "4e9ba368772369e3e08f231d2301b4ef72b9ff87c31192ef471b380ef29a4935"
      url: "https://pub.dev"
    source: hosted
    version: "3.2.1"
  url_launcher_macos:
    dependency: transitive
    description:
      name: url_launcher_macos
      sha256: "8262208506252a3ed4ff5c0dc1e973d2c0e0ef337d0a074d35634da5d44397c9"
      url: "https://pub.dev"
    source: hosted
    version: "3.2.4"
  url_launcher_platform_interface:
    dependency: transitive
    description:
      name: url_launcher_platform_interface
      sha256: "552f8a1e663569be95a8190206a38187b531910283c3e982193e4f2733f01029"
      url: "https://pub.dev"
    source: hosted
    version: "2.3.2"
  url_launcher_web:
    dependency: transitive
    description:
      name: url_launcher_web
      sha256: "4bd2b7b4dc4d4d0b94e5babfffbca8eac1a126c7f3d6ecbc1a11013faa3abba2"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.1"
  url_launcher_windows:
    dependency: transitive
    description:
      name: url_launcher_windows
      sha256: "3284b6d2ac454cf34f114e1d3319866fdd1e19cdc329999057e44ffe936cfa77"
      url: "https://pub.dev"
    source: hosted
    version: "3.1.4"
  uuid:
    dependency: transitive
    description:
      name: uuid
      sha256: a11b666489b1954e01d992f3d601b1804a33937b5a8fe677bd26b8a9f96f96e8
      url: "https://pub.dev"
    source: hosted
    version: "4.5.2"
  vector_graphics:
    dependency: transitive
    description:
      name: vector_graphics
      sha256: a4f059dc26fc8295b5921376600a194c4ec7d55e72f2fe4c7d2831e103d461e6
      url: "https://pub.dev"
    source: hosted
    version: "1.1.19"
  vector_graphics_codec:
    dependency: transitive
    description:
      name: vector_graphics_codec
      sha256: "99fd9fbd34d9f9a32efd7b6a6aae14125d8237b10403b422a6a6dfeac2806146"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.13"
  vector_graphics_compiler:
    dependency: transitive
    description:
      name: vector_graphics_compiler
      sha256: d354a7ec6931e6047785f4db12a1f61ec3d43b207fc0790f863818543f8ff0dc
      url: "https://pub.dev"
    source: hosted
    version: "1.1.19"
  vector_math:
    dependency: transitive
    description:
      name: vector_math
      sha256: d530bd74fea330e6e364cda7a85019c434070188383e1cd8d9777ee586914c5b
      url: "https://pub.dev"
    source: hosted
    version: "2.2.0"
  video_player:
    dependency: "direct main"
    description:
      name: video_player
      sha256: "096bc28ce10d131be80dfb00c223024eb0fba301315a406728ab43dd99c45bdf"
      url: "https://pub.dev"
    source: hosted
    version: "2.10.1"
  video_player_android:
    dependency: transitive
    description:
      name: video_player_android
      sha256: cf768d02924b91e333e2bc1ff928528f57d686445874f383bafab12d0bdfc340
      url: "https://pub.dev"
    source: hosted
    version: "2.8.17"
  video_player_avfoundation:
    dependency: transitive
    description:
      name: video_player_avfoundation
      sha256: "03fc6d07dba2499588d30887329b399c1fe2d68ce4b7fcff0db79f44a2603f69"
      url: "https://pub.dev"
    source: hosted
    version: "2.8.6"
  video_player_platform_interface:
    dependency: transitive
    description:
      name: video_player_platform_interface
      sha256: "57c5d73173f76d801129d0531c2774052c5a7c11ccb962f1830630decd9f24ec"
      url: "https://pub.dev"
    source: hosted
    version: "6.6.0"
  video_player_web:
    dependency: transitive
    description:
      name: video_player_web
      sha256: "9f3c00be2ef9b76a95d94ac5119fb843dca6f2c69e6c9968f6f2b6c9e7afbdeb"
      url: "https://pub.dev"
    source: hosted
    version: "2.4.0"
  vm_service:
    dependency: transitive
    description:
      name: vm_service
      sha256: "45caa6c5917fa127b5dbcfbd1fa60b14e583afdc08bfc96dda38886ca252eb60"
      url: "https://pub.dev"
    source: hosted
    version: "15.0.2"
  wakelock_plus:
    dependency: transitive
    description:
      name: wakelock_plus
      sha256: "9296d40c9adbedaba95d1e704f4e0b434be446e2792948d0e4aa977048104228"
      url: "https://pub.dev"
    source: hosted
    version: "1.4.0"
  wakelock_plus_platform_interface:
    dependency: transitive
    description:
      name: wakelock_plus_platform_interface
      sha256: "036deb14cd62f558ca3b73006d52ce049fabcdcb2eddfe0bf0fe4e8a943b5cf2"
      url: "https://pub.dev"
    source: hosted
    version: "1.3.0"
  watcher:
    dependency: transitive
    description:
      name: watcher
      sha256: "592ab6e2892f67760543fb712ff0177f4ec76c031f02f5b4ff8d3fc5eb9fb61a"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.4"
  web:
    dependency: transitive
    description:
      name: web
      sha256: "868d88a33d8a87b18ffc05f9f030ba328ffefba92d6c127917a2ba740f9cfe4a"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.1"
  web_socket:
    dependency: transitive
    description:
      name: web_socket
      sha256: "34d64019aa8e36bf9842ac014bb5d2f5586ca73df5e4d9bf5c936975cae6982c"
      url: "https://pub.dev"
    source: hosted
    version: "1.0.1"
  web_socket_channel:
    dependency: transitive
    description:
      name: web_socket_channel
      sha256: d645757fb0f4773d602444000a8131ff5d48c9e47adfe9772652dd1a4f2d45c8
      url: "https://pub.dev"
    source: hosted
    version: "3.0.3"
  win32:
    dependency: transitive
    description:
      name: win32
      sha256: d7cb55e04cd34096cd3a79b3330245f54cb96a370a1c27adb3c84b917de8b08e
      url: "https://pub.dev"
    source: hosted
    version: "5.15.0"
  xdg_directories:
    dependency: transitive
    description:
      name: xdg_directories
      sha256: "7a3f37b05d989967cdddcbb571f1ea834867ae2faa29725fd085180e0883aa15"
      url: "https://pub.dev"
    source: hosted
    version: "1.1.0"
  xml:
    dependency: transitive
    description:
      name: xml
      sha256: "971043b3a0d3da28727e40ed3e0b5d18b742fa5a68665cca88e74b7876d5e025"
      url: "https://pub.dev"
    source: hosted
    version: "6.6.1"
  yaml:
    dependency: transitive
    description:
      name: yaml
      sha256: b9da305ac7c39faa3f030eccd175340f968459dae4af175130b3fc47e40d76ce
      url: "https://pub.dev"
    source: hosted
    version: "3.1.3"
  youtube_explode_dart:
    dependency: "direct main"
    description:
      name: youtube_explode_dart
      sha256: "947ba05e0c4f050743e480e7bca3575ff6427d86cc898c1a69f5e1d188cdc9e0"
      url: "https://pub.dev"
    source: hosted
    version: "2.5.3"
  youtube_player_flutter:
    dependency: "direct main"
    description:
      name: youtube_player_flutter
      sha256: e64eeebaa5f7dc1d55d103cc9abf05f87d8013bae0d3b6a11aad5d33a2f7f5b4
      url: "https://pub.dev"
    source: hosted
    version: "9.1.3"
sdks:
  dart: ">=3.10.0 <4.0.0"
  flutter: ">=3.35.0"
</file>

<file path="pubspec.yaml">
name: nivio
description: "Netflix-style streaming app"
publish_to: 'none'
version: 1.0.0

environment:
  sdk: ^3.10.0

dependencies:
  flutter:
    sdk: flutter

  # State Management
  flutter_riverpod: ^2.6.1
  riverpod_annotation: ^2.6.1

  # Networking
  dio: ^5.7.0

  # Local Storage
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  shared_preferences: ^2.3.3

  # Firebase
  firebase_core: ^3.8.0
  firebase_auth: ^5.3.3
  cloud_firestore: ^5.5.0

  # Video Player
  video_player: ^2.9.2
  chewie: ^1.8.5
  youtube_player_flutter: ^9.0.3
  youtube_explode_dart: ^2.2.4
  flutter_inappwebview: ^6.1.5

  # UI & Images
  cached_network_image: ^3.4.1
  shimmer: ^3.0.0
  flutter_svg: ^2.0.10+1

  # Navigation
  go_router: ^14.6.2

  # Utilities
  intl: ^0.19.0
  freezed_annotation: ^2.4.4
  json_annotation: ^4.9.0
  url_launcher: ^6.3.1

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^6.0.0

  # Code Generation
  build_runner: ^2.4.13
  freezed: ^2.5.7
  json_serializable: ^6.8.0
  riverpod_generator: ^2.6.2

  # Splash Screen & App Icon
  flutter_native_splash: ^2.4.2
  flutter_launcher_icons: ^0.14.2

flutter:
  uses-material-design: true

  assets:
  - assets/images/
  - assets/icons/

# App Icon Configuration
flutter_launcher_icons:
  android: true
  ios: true
  image_path: "assets/images/nivio-dark.png"
  adaptive_icon_background: "#000000"
  adaptive_icon_foreground: "assets/images/nivio-dark.png"
  min_sdk_android: 21
  remove_alpha_ios: true

# Splash Screen Configuration  
flutter_native_splash:
  color: "#000000"
  image: assets/images/nivio-dark.png
  android: true
  ios: true
  web: false
  android_12:
    image: assets/images/nivio-dark.png
    color: "#000000"
</file>

<file path="lib/widgets/webview_player.dart">
import 'package:flutter/material.dart';
import 'package:flutter_inappwebview/flutter_inappwebview.dart';
import 'package:nivio/core/theme.dart';

/// WebView-based player for embedding vidsrc iframe streams using flutter_inappwebview
class WebViewPlayer extends StatefulWidget {
  final String streamUrl;
  final String title;

  const WebViewPlayer({
    super.key,
    required this.streamUrl,
    required this.title,
  });

  @override
  State<WebViewPlayer> createState() => _WebViewPlayerState();
}

class _WebViewPlayerState extends State<WebViewPlayer> {
  InAppWebViewController? _webViewController;
  bool _isLoading = true;
  double _progress = 0;

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        Center(
          child: AspectRatio(
            aspectRatio: 16 / 9,
            child: InAppWebView(
              initialUrlRequest: URLRequest(url: WebUri(widget.streamUrl)),
          initialSettings: InAppWebViewSettings(
            javaScriptEnabled: true,
            mediaPlaybackRequiresUserGesture: false,
            allowsInlineMediaPlayback: true,
            useOnLoadResource: true,
            useShouldOverrideUrlLoading: true,
            useShouldInterceptRequest: true, // Enable request interception for ad blocking
            userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',
            transparentBackground: true,
            // Additional settings for better ad blocking
            blockNetworkImage: false,
            blockNetworkLoads: false,
            cacheEnabled: false,
            clearCache: true,
            disableContextMenu: true,
            supportZoom: false,
          ),
          onWebViewCreated: (controller) {
            _webViewController = controller;
            print('üåê WebView created for: ${widget.streamUrl}');
          },
          onLoadStart: (controller, url) {
            setState(() {
              _isLoading = true;
            });
            print('üîÑ Loading started: $url');
          },
          onLoadStop: (controller, url) async {
            setState(() {
              _isLoading = false;
            });
            print('‚úÖ Loading completed: $url');
            
            // Inject ultra aggressive ad-blocking and overlay removal script
            await controller.evaluateJavascript(source: '''
              (function() {
                console.log('üõ°Ô∏è Ultra ad-blocking activated');
                
                // Block ALL popups and redirects
                window.open = function() {
                  console.log('üö´ Blocked popup');
                  return null;
                };
                
                // Override alert, confirm, prompt
                window.alert = function() { return true; };
                window.confirm = function() { return true; };
                window.prompt = function() { return null; };
                
                // Block location changes
                const originalLocation = window.location.href;
                Object.defineProperty(window, 'location', {
                  get: function() {
                    return {
                      href: originalLocation,
                      assign: function() { console.log('üö´ Blocked redirect'); },
                      replace: function() { console.log('üö´ Blocked redirect'); },
                      reload: function() { console.log('üö´ Blocked reload'); }
                    };
                  }
                });
                
                // Aggressive element removal
                function removeAds() {
                  try {
                    // Remove by class/id patterns
                    const selectors = [
                      '[class*="ad-"]', '[class*="ads-"]', '[class*="advert"]',
                      '[id*="ad-"]', '[id*="ads-"]', '[id*="advert"]',
                      '[class*="banner"]', '[id*="banner"]',
                      '[class*="popup"]', '[id*="popup"]',
                      '[class*="modal"]', '[id*="modal"]',
                      '[class*="overlay"]', '[id*="overlay"]',
                      '[class*="sponsor"]', '[id*="sponsor"]',
                      'iframe[src*="ad"]', 'iframe[src*="banner"]',
                      'iframe[src*="popup"]', 'iframe[src*="doubleclick"]',
                      'ins.adsbygoogle', '.advertisement', '.ad-container',
                      '[data-ad-slot]', '[data-ad-client]'
                    ];
                    
                    selectors.forEach(function(selector) {
                      try {
                        document.querySelectorAll(selector).forEach(function(el) {
                          el.remove();
                        });
                      } catch(e) {}
                    });
                    
                    // Remove elements with position fixed/absolute and high z-index
                    document.querySelectorAll('*').forEach(function(el) {
                      try {
                        const style = window.getComputedStyle(el);
                        const zIndex = parseInt(style.zIndex);
                        const position = style.position;
                        
                        if ((position === 'fixed' || position === 'absolute') && 
                            zIndex > 1000 && 
                            (el.offsetWidth > window.innerWidth * 0.5 || 
                             el.offsetHeight > window.innerHeight * 0.5)) {
                          el.remove();
                        }
                      } catch(e) {}
                    });
                    
                    // Force enable scrolling
                    document.body.style.overflow = 'auto !important';
                    document.documentElement.style.overflow = 'auto !important';
                    document.body.style.pointerEvents = 'auto';
                  } catch(e) {
                    console.error('Error removing ads:', e);
                  }
                }
                
                // Run immediately
                removeAds();
                
                // Run repeatedly to catch dynamically loaded ads
                setInterval(removeAds, 300);
                
                // Observer for DOM changes
                const observer = new MutationObserver(removeAds);
                observer.observe(document.body, {
                  childList: true,
                  subtree: true
                });
                
                // Block fetch requests to ad servers
                const originalFetch = window.fetch;
                window.fetch = function() {
                  const url = arguments[0];
                  if (typeof url === 'string') {
                    const adPatterns = ['ad', 'analytics', 'tracking', 'doubleclick', 'googlesyndication'];
                    if (adPatterns.some(pattern => url.toLowerCase().includes(pattern))) {
                      console.log('üö´ Blocked fetch:', url);
                      return Promise.reject(new Error('Blocked'));
                    }
                  }
                  return originalFetch.apply(this, arguments);
                };
                
                // Block XHR requests to ad servers
                const originalXHR = XMLHttpRequest.prototype.open;
                XMLHttpRequest.prototype.open = function() {
                  const url = arguments[1];
                  if (typeof url === 'string') {
                    const adPatterns = ['ad', 'analytics', 'tracking', 'doubleclick', 'googlesyndication'];
                    if (adPatterns.some(pattern => url.toLowerCase().includes(pattern))) {
                      console.log('üö´ Blocked XHR:', url);
                      throw new Error('Blocked');
                    }
                  }
                  return originalXHR.apply(this, arguments);
                };
                
                console.log('‚úÖ Ad-blocking fully initialized');
              })();
            ''');
          },
          onProgressChanged: (controller, progress) {
            setState(() {
              _progress = progress / 100;
            });
          },
          onReceivedError: (controller, request, error) {
            print('‚ùå WebView error: ${error.description}');
          },
          shouldInterceptRequest: (controller, request) async {
            final url = request.url.toString().toLowerCase();
            
            // Ultra aggressive ad blocking - block any suspicious domains
            final adPatterns = [
              'ad', 'ads', 'advert', 'advertising', 'advertisement',
              'doubleclick', 'googlesyndication', 'googleadservices',
              'google-analytics', 'googletagmanager', 'googletagservices',
              'facebook.com/tr', 'facebook.net',
              'analytics', 'tracking', 'tracker', 'track',
              'banner', 'popup', 'popunder', 'sponsor',
              'pagead', 'adservice', 'adserver', 'adsystem',
              'taboola', 'outbrain', 'revcontent', 'mgid',
              'criteo', 'pubmatic', 'openx', 'rubiconproject',
              'smartadserver', 'appnexus', 'adnxs',
              'exoclick', 'propellerads', 'popcash', 'popads',
              'clickadu', 'hilltopads', 'adsterra',
            ];
            
            // Check if URL contains any ad pattern
            for (final pattern in adPatterns) {
              if (url.contains(pattern)) {
                print('üö´ Blocked request: $url');
                return null; // Block the request
              }
            }
            
            return null; // Allow the request to proceed normally
          },
          shouldOverrideUrlLoading: (controller, navigationAction) async {
            final url = navigationAction.request.url;
            
            // Block navigation to ad domains
            if (url != null) {
              final urlString = url.toString().toLowerCase();
              final adDomains = [
                'ad', 'ads', 'doubleclick', 'googlesyndication',
                'advertising', 'popup', 'banner', 'sponsor',
                'analytics', 'tracking', 'facebook.com/tr',
                'exoclick', 'propeller', 'popcash', 'popads',
                'clickadu', 'adsterra',
              ];
              
              for (final domain in adDomains) {
                if (urlString.contains(domain)) {
                  print('üö´ Blocked navigation to: $urlString');
                  return NavigationActionPolicy.CANCEL;
                }
              }
            }
            
            return NavigationActionPolicy.ALLOW;
          },
            ),
          ),
        ),
        
        // Loading indicator
        if (_isLoading)
          Container(
            color: Colors.black,
            child: Center(
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  const CircularProgressIndicator(
                    color: NivioTheme.netflixRed,
                  ),
                  const SizedBox(height: 16),
                  Text(
                    'Loading player...',
                    style: const TextStyle(color: Colors.white70),
                  ),
                  if (_progress > 0 && _progress < 1)
                    Padding(
                      padding: const EdgeInsets.only(top: 8),
                      child: Text(
                        '${(_progress * 100).toInt()}%',
                        style: const TextStyle(color: Colors.white54, fontSize: 12),
                      ),
                    ),
                ],
              ),
            ),
          ),
      ],
    );
  }

  @override
  void dispose() {
    _webViewController = null;
    super.dispose();
  }
}
</file>

<file path="README.md">
<div align="center">

<img src="assets/images/nivio-dark.png" alt="Nivio Logo" width="200"/>


### *Your Gateway to Global Entertainment*

A modern, Netflix-inspired streaming platform built with Flutter. Discover movies and TV shows across multiple languages with intelligent search, personalized recommendations, and seamless playback.

[![Flutter](https://img.shields.io/badge/Flutter-3.10+-02569B?logo=flutter&logoColor=white)](https://flutter.dev)
[![Firebase](https://img.shields.io/badge/Firebase-Integrated-FFCA28?logo=firebase&logoColor=black)](https://firebase.google.com)
[![TMDB](https://img.shields.io/badge/TMDB-API-01D277?logo=themoviedatabase&logoColor=white)](https://www.themoviedb.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

[Features](#-features) ‚Ä¢ [Screenshots](#-screenshots) ‚Ä¢ [Installation](#-installation) ‚Ä¢ [Tech Stack](#-tech-stack) ‚Ä¢ [Contributing](#-contributing)

</div>

---

## üåü Features

### üåç **Multi-Language Content Discovery**
- **5 Language Hubs**: Tamil, Telugu, Hindi, Korean, and Japanese (Anime)
- **Customizable Preferences**: Toggle languages on/off in settings
- **Latest OTT Releases**: Dedicated Tamil OTT section with 6-month filter
- **Trending & Popular**: Curated content for each language

### üîç **Advanced Search**
- **Universal Search**: Find content across all languages
- **Smart Filters**: Filter by language (Tamil, Telugu, Hindi, Korean, Japanese)
- **Sort Options**: By popularity, title, or release year
- **Infinite Scroll Pagination**: Instagram-style smooth loading
- **Auto-Load Optimization**: Automatically loads more pages when results are sparse

### üì∫ **Seamless Viewing Experience**
- **Continue Watching**: Pick up exactly where you left off with automatic resume
- **Progress Tracking**: Automatic playback position sync across devices
- **Multiple Streaming Providers**: Intelligent fallback across vidsrc.cc, vidsrc.to, and vidlink
- **Manual Server Switch**: Change streaming provider on-the-fly
- **Ultra Ad-Blocking**: Aggressive ad and popup blocking for clean playback
- **16:9 Aspect Ratio**: Consistent cinematic viewing experience
- **Cross-Platform WebView**: Works on Android, iOS, Windows, and Web
- **Season/Episode Picker**: Easy TV show navigation with episode grids
- **Official Trailers**: High-quality YouTube trailer playback in fullscreen modal

### üé® **Beautiful UI/UX**
- **Netflix-Inspired Design**: Familiar dark theme with red accents
- **Hero Slider**: Mixed regional and trending content with smooth animations
- **Custom Branding**: Professional logo integration in header and splash
- **Native Splash Screen**: Branded app launch experience
- **Adaptive Icons**: Platform-specific app icons for all platforms
- **Smooth Animations**: Hover effects, transitions, and loading states
- **Responsive Layout**: Optimized for mobile, tablet, and desktop
- **Fullscreen Trailer Modal**: Cinematic trailer viewing experience

### ‚òÅÔ∏è **Cloud-Powered Features**
- **Firebase Authentication**: Secure anonymous login
- **Cloud Firestore Sync**: Watch history across devices
- **Local-First Architecture**: Instant UI updates with Hive
- **Offline Support**: Background sync when online

---

## üì∏ Screenshots

> *Coming soon - Add your app screenshots here!*

---

## üöÄ Installation

### Prerequisites

- Flutter SDK (^3.10.0)
- Android Studio / Xcode (for mobile development)
- Visual Studio 2022 (for Windows development) - optional
- NuGet (for Windows builds) - optional
- Firebase account
- TMDB API key ([Get one here](https://www.themoviedb.org/settings/api))

### Quick Start

1. **Clone the repository**
   ```bash
   git clone https://github.com/nirmaleeswar30/Nivio.git
   cd Nivio
   ```

2. **Install dependencies**
   ```bash
   flutter pub get
   ```

3. **Generate code**
   ```bash
   dart run build_runner build --delete-conflicting-outputs
   ```

4. **Configure Firebase** (See [FIREBASE_SETUP.md](FIREBASE_SETUP.md))
   - Add `google-services.json` to `android/app/`
   - Add `GoogleService-Info.plist` to `ios/Runner/`
   - Enable Anonymous Auth in Firebase Console
   - Create Firestore database

5. **Update TMDB API Key**
   - Edit `lib/core/constants.dart`
   - Replace with your API key

6. **Run the app**
   ```bash
   flutter run
   ```

### Build for Production

```bash
# Android APK
flutter build apk --release

# Android App Bundle (Play Store)
flutter build appbundle --release

# iOS
flutter build ios --release

# Windows (requires NuGet)
flutter build windows --release

# Web
flutter build web --release
```

See [BUILD_GUIDE.md](BUILD_GUIDE.md) for detailed instructions.

---

## üèóÔ∏è Architecture

### **State Management**
- **Riverpod**: Reactive, compile-safe state management
- **Freezed**: Immutable data models with unions
- **Code Generation**: Type-safe JSON serialization

### **Data Layer**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   UI Layer  ‚îÇ ‚Üê Riverpod Providers
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Services   ‚îÇ ‚Üê TMDB API, Streaming Providers, Firebase
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇLocal Storage‚îÇ ‚Üê Hive (Watch History)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Key Features Implementation**

#### üîç Search Pagination
- Local state management for smooth scrolling
- Fetches next page at 500px from bottom
- Auto-loads additional pages when results < 10
- Filters out 'person' type results
- Preserves scroll position with `PageStorageKey`

#### üåê Language Filtering
- SharedPreferences for user preferences
- Conditional rendering based on toggles
- Separate providers per language
- Popular + Trending sections for each

#### ‚èØÔ∏è Watch History Sync
- Hive for local caching (instant updates)
- Firestore for cloud backup
- Conflict resolution by timestamp
- Progress tracked every 5 seconds
- Auto-resume from last position
- Automatic media details fetching when navigating from continue watching

---

## üõ†Ô∏è Tech Stack

| Category | Technologies |
|----------|-------------|
| **Framework** | Flutter 3.10+ |
| **State Management** | Riverpod 2.6+, Freezed 2.5+ |
| **Backend** | Firebase (Auth, Firestore) |
| **APIs** | TMDB v3, Streaming Providers (vidsrc.cc, vidsrc.to, vidlink) |
| **Storage** | Hive (local), SharedPreferences |
| **Video** | video_player, Chewie, youtube_player_flutter, flutter_inappwebview |
| **Network** | Dio 5.7+, cached_network_image |
| **Navigation** | GoRouter 14.6+ |
| **UI Components** | Shimmer, flutter_svg, flutter_native_splash |

---

## üìÇ Project Structure

```
lib/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ constants.dart          # API keys, endpoints
‚îÇ   ‚îî‚îÄ‚îÄ theme.dart              # App theme (Netflix-style)
‚îú‚îÄ‚îÄ models/                     # Freezed data models
‚îÇ   ‚îú‚îÄ‚îÄ search_result.dart
‚îÇ   ‚îú‚îÄ‚îÄ season_info.dart
‚îÇ   ‚îî‚îÄ‚îÄ watch_history.dart
‚îú‚îÄ‚îÄ providers/                  # Riverpod providers
‚îÇ   ‚îú‚îÄ‚îÄ home_providers.dart
‚îÇ   ‚îú‚îÄ‚îÄ search_provider.dart
‚îÇ   ‚îú‚îÄ‚îÄ language_preferences_provider.dart
‚îÇ   ‚îî‚îÄ‚îÄ watch_history_provider.dart
‚îú‚îÄ‚îÄ screens/                    # UI screens
‚îÇ   ‚îú‚îÄ‚îÄ auth_screen.dart
‚îÇ   ‚îú‚îÄ‚îÄ home_screen.dart
‚îÇ   ‚îú‚îÄ‚îÄ search_screen.dart
‚îÇ   ‚îú‚îÄ‚îÄ media_detail_screen.dart
‚îÇ   ‚îú‚îÄ‚îÄ player_screen.dart
‚îÇ   ‚îî‚îÄ‚îÄ settings_screen.dart
‚îú‚îÄ‚îÄ services/                   # Business logic
‚îÇ   ‚îú‚îÄ‚îÄ tmdb_service.dart
‚îÇ   ‚îú‚îÄ‚îÄ streaming_service.dart
‚îÇ   ‚îî‚îÄ‚îÄ watch_history_service.dart
‚îî‚îÄ‚îÄ widgets/                    # Reusable components
    ‚îú‚îÄ‚îÄ content_row.dart
    ‚îú‚îÄ‚îÄ continue_watching_row.dart
    ‚îú‚îÄ‚îÄ featured_content_slider.dart
    ‚îú‚îÄ‚îÄ media_card.dart
    ‚îú‚îÄ‚îÄ search_result_card.dart
    ‚îî‚îÄ‚îÄ webview_player.dart        # Ultra ad-blocked WebView player

assets/
‚îî‚îÄ‚îÄ images/
    ‚îú‚îÄ‚îÄ nivio-dark.png         # App logo
    ‚îî‚îÄ‚îÄ app-icon.png           # Launcher icon

android/
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ src/main/
        ‚îú‚îÄ‚îÄ AndroidManifest.xml
        ‚îî‚îÄ‚îÄ res/                # Generated icons & splash

ios/
‚îî‚îÄ‚îÄ Runner/
    ‚îú‚îÄ‚îÄ Info.plist
    ‚îî‚îÄ‚îÄ Assets.xcassets/       # Generated icons
```

---

## üéØ Roadmap

- [x] **Multi-Platform Support**: Android, iOS, Windows, Web
- [x] **Provider Switching**: Manual and automatic fallback
- [x] **Ultra Ad-Blocking**: Clean viewing experience
- [x] **Trailer Playback**: Official trailers with YouTube integration
- [x] **16:9 Aspect Ratio**: Consistent cinematic experience
- [ ] **Watchlist Feature**: Save shows for later
- [ ] **User Profiles**: Multiple profiles per account
- [ ] **Download Support**: Offline viewing
- [ ] **Chromecast**: Cast to TV
- [ ] **Recommendations**: AI-powered suggestions
- [ ] **Social Features**: Share & discuss with friends
- [ ] **Multi-Audio Support**: Select audio tracks
- [ ] **Subtitle Options**: Multiple languages

---

## ü§ù Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

Please ensure your code follows the project's style guidelines and includes appropriate tests.

---

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ‚ö†Ô∏è Disclaimer

**Nivio is for educational purposes only.** This project demonstrates Flutter development best practices and API integration. Users are responsible for ensuring their usage complies with TMDB's Terms of Service and applicable copyright laws. The developers do not host or distribute any copyrighted content.

---

## üôè Acknowledgments

- **[The Movie Database (TMDB)](https://www.themoviedb.org/)** - Movie and TV show metadata
- **[Firebase](https://firebase.google.com)** - Backend infrastructure
- **[Flutter](https://flutter.dev)** - Amazing cross-platform framework
- **Netflix** - UI/UX inspiration
- **Open Source Community** - For incredible packages and tools

---

## üìû Support & Contact

- **Issues**: [GitHub Issues](https://github.com/nirmaleeswar30/Nivio/issues)
- **Discussions**: [GitHub Discussions](https://github.com/nirmaleeswar30/Nivio/discussions)
- **Email**: [Your Email]

---

<div align="center">

### ‚≠ê Star this repo if you find it useful!

**Made with ‚ù§Ô∏è and Flutter**

[Report Bug](https://github.com/nirmaleeswar30/Nivio/issues) ‚Ä¢ [Request Feature](https://github.com/nirmaleeswar30/Nivio/issues)

</div>
</file>

<file path="lib/screens/player_screen.dart">
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:video_player/video_player.dart';
import 'package:chewie/chewie.dart';
import 'package:nivio/core/theme.dart';
import 'package:nivio/providers/media_provider.dart';
import 'package:nivio/providers/service_providers.dart';
import 'package:nivio/providers/settings_providers.dart';
import 'package:nivio/models/stream_result.dart';
import 'package:nivio/widgets/webview_player.dart';
import 'dart:async';

class PlayerScreen extends ConsumerStatefulWidget {
  final int mediaId;
  final int season;
  final int episode;
  final String? mediaType;

  const PlayerScreen({
    super.key,
    required this.mediaId,
    required this.season,
    required this.episode,
    this.mediaType,
  });

  @override
  ConsumerState<PlayerScreen> createState() => _PlayerScreenState();
}

class _PlayerScreenState extends ConsumerState<PlayerScreen> {
  VideoPlayerController? _videoController;
  ChewieController? _chewieController;
  StreamResult? _streamResult;
  bool _isLoading = true;
  String? _error;
  Timer? _progressTimer;
  String _currentProvider = '';
  int _retryCount = 0;
  int _currentProviderIndex = 0; // Track which provider we're using
  static const int _maxRetries = 3;
  static const int _maxProviders = 3; // vidsrc.cc, vidsrc.to, vidlink
  static const List<String> _providerNames = ['vidsrc.cc', 'vidsrc.to', 'vidlink'];
  final FocusNode _focusNode = FocusNode();

  @override
  void initState() {
    super.initState();
    _initializePlayer();
    // Set preferred orientations for better video experience
    SystemChrome.setPreferredOrientations([
      DeviceOrientation.landscapeLeft,
      DeviceOrientation.landscapeRight,
      DeviceOrientation.portraitUp,
    ]);
    // Request focus for keyboard shortcuts
    WidgetsBinding.instance.addPostFrameCallback((_) {
      _focusNode.requestFocus();
    });
  }

  KeyEventResult _handleKeyEvent(FocusNode node, KeyEvent event) {
    if (event is! KeyDownEvent) return KeyEventResult.ignored;
    if (_videoController == null || !_videoController!.value.isInitialized) {
      return KeyEventResult.ignored;
    }

    switch (event.logicalKey) {
      case LogicalKeyboardKey.space:
      case LogicalKeyboardKey.keyK:
        // Play/Pause
        if (_videoController!.value.isPlaying) {
          _videoController!.pause();
        } else {
          _videoController!.play();
        }
        return KeyEventResult.handled;

      case LogicalKeyboardKey.arrowLeft:
      case LogicalKeyboardKey.keyJ:
        // Seek backward 10s
        final currentPos = _videoController!.value.position;
        final newPos = currentPos - const Duration(seconds: 10);
        _videoController!.seekTo(newPos < Duration.zero ? Duration.zero : newPos);
        return KeyEventResult.handled;

      case LogicalKeyboardKey.arrowRight:
      case LogicalKeyboardKey.keyL:
        // Seek forward 10s
        final currentPos = _videoController!.value.position;
        final duration = _videoController!.value.duration;
        final newPos = currentPos + const Duration(seconds: 10);
        _videoController!.seekTo(newPos > duration ? duration : newPos);
        return KeyEventResult.handled;

      case LogicalKeyboardKey.keyF:
        // Toggle fullscreen (handled by Chewie)
        return KeyEventResult.ignored;

      case LogicalKeyboardKey.keyM:
        // Mute/Unmute
        final currentVolume = _videoController!.value.volume;
        _videoController!.setVolume(currentVolume > 0 ? 0 : 1);
        return KeyEventResult.handled;

      case LogicalKeyboardKey.arrowUp:
        // Volume up
        final currentVolume = _videoController!.value.volume;
        _videoController!.setVolume((currentVolume + 0.1).clamp(0, 1));
        return KeyEventResult.handled;

      case LogicalKeyboardKey.arrowDown:
        // Volume down
        final currentVolume = _videoController!.value.volume;
        _videoController!.setVolume((currentVolume - 0.1).clamp(0, 1));
        return KeyEventResult.handled;

      default:
        return KeyEventResult.ignored;
    }
  }

  Future<void> _initializePlayer() async {
    setState(() {
      _isLoading = true;
      _error = null;
    });

    try {
      // Check if media is already selected, if not fetch it from TMDB
      var media = ref.read(selectedMediaProvider);
      if (media == null) {
        print('üì• Fetching media details from TMDB (ID: ${widget.mediaId}, Type: ${widget.mediaType})...');
        setState(() {
          _currentProvider = 'Loading media details...';
        });
        
        // Fetch media details from TMDB
        final tmdbService = ref.read(tmdbServiceProvider);
        
        // Use mediaType if provided, otherwise try TV first then movie
        if (widget.mediaType == 'tv') {
          media = await tmdbService.getTVShowDetails(widget.mediaId);
          ref.read(selectedMediaProvider.notifier).state = media;
          print('‚úÖ Loaded TV show: ${media.name}');
        } else if (widget.mediaType == 'movie') {
          media = await tmdbService.getMovieDetails(widget.mediaId);
          ref.read(selectedMediaProvider.notifier).state = media;
          print('‚úÖ Loaded movie: ${media.title}');
        } else {
          // No type specified, try TV show first, then movie
          try {
            media = await tmdbService.getTVShowDetails(widget.mediaId);
            ref.read(selectedMediaProvider.notifier).state = media;
            print('‚úÖ Loaded TV show: ${media.name}');
          } catch (e) {
            // If TV show fails, try movie
            media = await tmdbService.getMovieDetails(widget.mediaId);
            ref.read(selectedMediaProvider.notifier).state = media;
            print('‚úÖ Loaded movie: ${media.title}');
          }
        }
      }

      // Show which provider we're trying
      setState(() {
        _currentProvider = 'Fetching stream...';
      });

      // Fetch stream URL from streaming service
      final streamingService = ref.read(streamingServiceProvider);
      
      // Use quality from settings (user's preference)
      final settingsQuality = ref.read(videoQualityProvider);
      
      // If user manually selected a quality in player, use that. Otherwise use settings.
      final manualQuality = ref.read(selectedQualityProvider);
      final preferredQuality = manualQuality ?? (settingsQuality == 'auto' ? null : settingsQuality);

      final result = await streamingService.fetchStreamUrl(
        media: media,
        season: widget.season,
        episode: widget.episode,
        preferredQuality: preferredQuality,
        providerIndex: _currentProviderIndex, // Use current provider index
      );

      if (result == null) {
        // Try next provider if available
        if (_currentProviderIndex < _maxProviders - 1) {
          print('‚è≠Ô∏è Trying next provider...');
          _currentProviderIndex++;
          setState(() {
            _error = 'Provider unavailable, trying next...';
          });
          await Future.delayed(const Duration(milliseconds: 500));
          _initializePlayer(); // Retry with next provider
          return;
        }
        throw Exception('Failed to get stream URL from all providers');
      }

      _streamResult = result;
      _currentProvider = result.provider;

      // Check if this is an iframe embed provider (vidsrc.cc, vidsrc.to, vidlink)
      if (result.provider == 'vidsrc.cc' || 
          result.provider == 'vidsrc.to' || 
          result.provider == 'vidlink') {
        print('‚úÖ Using WebView for ${result.provider} embed');
        
        // Just add to continue watching - no progress tracking for WebView
        _markAsWatchedSimple();
        
        setState(() {
          _isLoading = false;
          _retryCount = 0;
        });
        return; // WebView will be rendered in build method
      }

      // For direct video URLs, use video_player + chewie
      print('‚úÖ Using video_player for direct stream URL');
      
      // Initialize video player with error handling
      _videoController = VideoPlayerController.networkUrl(
        Uri.parse(result.url),
        httpHeaders: {
          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
        },
      );

      // Add listener for player state changes
      _videoController!.addListener(_onVideoPlayerStateChanged);

      await _videoController!.initialize();

      // Get playback speed from settings and apply it
      final playbackSpeed = ref.read(playbackSpeedProvider);
      await _videoController!.setPlaybackSpeed(playbackSpeed);

      _chewieController = ChewieController(
        videoPlayerController: _videoController!,
        autoPlay: true,
        looping: false,
        allowFullScreen: true,
        allowMuting: true,
        showControls: true,
        playbackSpeeds: const [0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0],
        materialProgressColors: ChewieProgressColors(
          playedColor: NivioTheme.netflixRed,
          handleColor: NivioTheme.netflixRed,
          backgroundColor: NivioTheme.netflixGrey,
          bufferedColor: NivioTheme.netflixLightGrey,
        ),
        placeholder: Container(
          color: Colors.black,
          child: const Center(
            child: CircularProgressIndicator(
              color: NivioTheme.netflixRed,
            ),
          ),
        ),
        errorBuilder: (context, errorMessage) {
          return Center(
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                const Icon(
                  Icons.error_outline,
                  color: NivioTheme.netflixRed,
                  size: 64,
                ),
                const SizedBox(height: 16),
                Text(
                  'Playback Error',
                  style: Theme.of(context).textTheme.headlineMedium,
                ),
                const SizedBox(height: 8),
                Text(
                  errorMessage,
                  style: Theme.of(context).textTheme.bodyMedium,
                  textAlign: TextAlign.center,
                ),
                const SizedBox(height: 16),
                ElevatedButton.icon(
                  onPressed: () {
                    if (_retryCount < _maxRetries) {
                      _retryCount++;
                      _initializePlayer();
                    }
                  },
                  icon: const Icon(Icons.refresh),
                  label: Text('Retry ($_retryCount/$_maxRetries)'),
                  style: ElevatedButton.styleFrom(
                    backgroundColor: NivioTheme.netflixRed,
                    foregroundColor: Colors.white,
                  ),
                ),
              ],
            ),
          );
        },
        autoInitialize: true,
      );

      // Start progress tracking
      _startProgressTracking();

      // Check for existing watch history to resume
      final historyService = ref.read(watchHistoryServiceProvider);
      await historyService.init();
      final history = await historyService.getHistory(widget.mediaId);
      
      if (history != null &&
          history.currentSeason == widget.season &&
          history.currentEpisode == widget.episode &&
          history.lastPositionSeconds > 0 &&
          history.lastPositionSeconds < history.totalDurationSeconds - 30) {
        // Resume from last position (if not within 30s of end)
        await _videoController!.seekTo(
          Duration(seconds: history.lastPositionSeconds),
        );
        
        // Show resume notification
        if (mounted) {
          ScaffoldMessenger.of(context).showSnackBar(
            SnackBar(
              content: Text('Resumed from ${_formatDuration(Duration(seconds: history.lastPositionSeconds))}'),
              duration: const Duration(seconds: 2),
              backgroundColor: NivioTheme.netflixRed,
            ),
          );
        }
      }

      setState(() {
        _isLoading = false;
        _retryCount = 0; // Reset retry count on success
        _currentProviderIndex = 0; // Reset provider index on success
      });
    } catch (e) {
      setState(() {
        _error = e.toString();
        _isLoading = false;
      });
      
      // Try next provider first before retrying same provider
      if (_currentProviderIndex < _maxProviders - 1) {
        print('‚ùå Error with provider, trying next: $e');
        _currentProviderIndex++;
        setState(() {
          _error = 'Switching to next provider...';
        });
        await Future.delayed(const Duration(milliseconds: 500));
        _initializePlayer();
        return;
      }
      
      // All providers failed, try auto-retry on certain errors
      if (_retryCount < _maxRetries && 
          (e.toString().contains('network') || e.toString().contains('timeout'))) {
        await Future.delayed(const Duration(seconds: 2));
        _retryCount++;
        _currentProviderIndex = 0; // Reset to first provider
        _initializePlayer();
      }
    }
  }

  void _onVideoPlayerStateChanged() {
    if (_videoController == null) return;
    
    // Handle buffering state
    if (_videoController!.value.isBuffering) {
      // Could show buffering indicator here
    }
    
    // Auto-save progress when video completes
    if (_videoController!.value.position >= _videoController!.value.duration - const Duration(seconds: 30)) {
      _markAsCompleted();
    }
  }

  Future<void> _markAsCompleted() async {
    final media = ref.read(selectedMediaProvider);
    if (media == null) return;

    final historyService = ref.read(watchHistoryServiceProvider);
    await historyService.updateProgress(
      tmdbId: widget.mediaId,
      mediaType: media.mediaType,
      title: media.title ?? media.name ?? 'Unknown',
      posterPath: media.posterPath,
      currentSeason: widget.season,
      currentEpisode: widget.episode,
      totalSeasons: 1,
      totalEpisodes: null,
      lastPosition: _videoController!.value.duration,
      totalDuration: _videoController!.value.duration,
    );
  }

  /// Simple mark as watched for WebView players (no progress tracking)
  Future<void> _markAsWatchedSimple() async {
    final media = ref.read(selectedMediaProvider);
    if (media == null) return;

    final historyService = ref.read(watchHistoryServiceProvider);
    await historyService.init();
    
    // Add to continue watching with minimal progress (1% to show it was started)
    await historyService.updateProgress(
      tmdbId: widget.mediaId,
      mediaType: media.mediaType,
      title: media.title ?? media.name ?? 'Unknown',
      posterPath: media.posterPath,
      currentSeason: widget.season,
      currentEpisode: widget.episode,
      totalSeasons: 1,
      totalEpisodes: null,
      lastPosition: const Duration(seconds: 1), // 1 second progress
      totalDuration: const Duration(seconds: 100), // 1% progress
    );
    
    print('üìù Added to Continue Watching: ${media.title ?? media.name}');
  }

  String _formatDuration(Duration duration) {
    String twoDigits(int n) => n.toString().padLeft(2, '0');
    final hours = duration.inHours;
    final minutes = duration.inMinutes.remainder(60);
    final seconds = duration.inSeconds.remainder(60);
    
    if (hours > 0) {
      return '${twoDigits(hours)}:${twoDigits(minutes)}:${twoDigits(seconds)}';
    }
    return '${twoDigits(minutes)}:${twoDigits(seconds)}';
  }

  void _startProgressTracking() {
    _progressTimer = Timer.periodic(const Duration(seconds: 5), (timer) {
      if (_videoController != null &&
          _videoController!.value.isInitialized &&
          _videoController!.value.isPlaying) {
        _saveProgress();
      }
    });
  }

  Future<void> _saveProgress() async {
    if (_videoController == null || !_videoController!.value.isInitialized) {
      return;
    }

    final media = ref.read(selectedMediaProvider);
    if (media == null) return;

    final position = _videoController!.value.position;
    final duration = _videoController!.value.duration;

    final historyService = ref.read(watchHistoryServiceProvider);
    await historyService.updateProgress(
      tmdbId: widget.mediaId,
      mediaType: media.mediaType,
      title: media.title ?? media.name ?? 'Unknown',
      posterPath: media.posterPath,
      currentSeason: widget.season,
      currentEpisode: widget.episode,
      totalSeasons: 1, // TODO: Get from series info
      totalEpisodes: null,
      lastPosition: position,
      totalDuration: duration,
    );
  }

  @override
  void dispose() {
    _progressTimer?.cancel();
    
    // Save progress for video_player
    if (_videoController != null && _videoController!.value.isInitialized) {
      _saveProgress();
    }
    
    _videoController?.removeListener(_onVideoPlayerStateChanged);
    _videoController?.dispose();
    _chewieController?.dispose();
    _focusNode.dispose();
    
    // Reset orientations
    SystemChrome.setPreferredOrientations([
      DeviceOrientation.portraitUp,
      DeviceOrientation.landscapeLeft,
      DeviceOrientation.landscapeRight,
    ]);
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final media = ref.watch(selectedMediaProvider);
    
    return Focus(
      focusNode: _focusNode,
      onKeyEvent: _handleKeyEvent,
      child: Scaffold(
        backgroundColor: Colors.black,
        extendBodyBehindAppBar: true,
        appBar: _streamResult != null
            ? AppBar(
                backgroundColor: Colors.black.withOpacity(0.7),
                elevation: 0,
                leading: IconButton(
                  icon: const Icon(Icons.arrow_back, color: Colors.white),
                  onPressed: () => Navigator.pop(context),
                  tooltip: 'Back',
                ),
                title: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    Text(
                      media?.title ?? media?.name ?? 'Playing',
                      style: const TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.w600,
                        color: Colors.white,
                      ),
                      maxLines: 1,
                      overflow: TextOverflow.ellipsis,
                    ),
                    Row(
                      children: [
                        if (media?.mediaType == 'tv')
                          Container(
                            padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
                            decoration: BoxDecoration(
                              color: NivioTheme.netflixRed,
                              borderRadius: BorderRadius.circular(3),
                            ),
                            child: Text(
                              'S${widget.season} E${widget.episode}',
                              style: const TextStyle(
                                fontSize: 9,
                                fontWeight: FontWeight.bold,
                                color: Colors.white,
                              ),
                            ),
                          ),
                        const SizedBox(width: 6),
                        Container(
                          padding: const EdgeInsets.symmetric(horizontal: 5, vertical: 2),
                          decoration: BoxDecoration(
                            color: Colors.white.withOpacity(0.2),
                            borderRadius: BorderRadius.circular(3),
                          ),
                          child: Text(
                            _streamResult!.provider.toUpperCase(),
                            style: const TextStyle(
                              fontSize: 9,
                              fontWeight: FontWeight.w500,
                              color: Colors.white70,
                              letterSpacing: 0.5,
                            ),
                          ),
                        ),
                      ],
                    ),
                  ],
                ),
                actions: [
                  // Switch Server button
                  PopupMenuButton<int>(
                    icon: const Icon(Icons.swap_horiz, color: Colors.white),
                    tooltip: 'Switch Server',
                    color: const Color(0xFF1F1F1F),
                    onSelected: (providerIndex) async {
                      if (providerIndex == _currentProviderIndex) return; // Same provider
                      
                      final currentPosition = _videoController?.value.position;
                      
                      // Show snackbar before rebuilding
                      if (mounted) {
                        ScaffoldMessenger.of(context).showSnackBar(
                          SnackBar(
                            content: Text('Switching to ${_providerNames[providerIndex]}...'),
                            duration: const Duration(seconds: 2),
                            backgroundColor: NivioTheme.netflixRed,
                          ),
                        );
                      }
                      
                      // Dispose controllers first
                      _videoController?.dispose();
                      _chewieController?.dispose();
                      _videoController = null;
                      _chewieController = null;
                      
                      // Then update state and reinitialize
                      setState(() {
                        _currentProviderIndex = providerIndex;
                        _isLoading = true;
                        _error = null;
                        _retryCount = 0;
                        _streamResult = null; // Clear old stream result to force rebuild
                      });
                      
                      await _initializePlayer();
                      
                      if (currentPosition != null && _videoController != null) {
                        await _videoController!.seekTo(currentPosition);
                      }
                    },
                    itemBuilder: (context) {
                      return List.generate(_maxProviders, (index) {
                        final isSelected = index == _currentProviderIndex;
                        return PopupMenuItem(
                          value: index,
                          child: Row(
                            children: [
                              Icon(
                                isSelected ? Icons.check_circle : Icons.circle_outlined,
                                color: isSelected ? NivioTheme.netflixRed : Colors.white70,
                                size: 18,
                              ),
                              const SizedBox(width: 12),
                              Text(
                                _providerNames[index],
                                style: TextStyle(
                                  color: isSelected ? NivioTheme.netflixRed : Colors.white,
                                  fontWeight: isSelected ? FontWeight.bold : FontWeight.normal,
                                ),
                              ),
                            ],
                          ),
                        );
                      });
                    },
                  ),
                  // Quality selector
                  if (_streamResult!.availableQualities.length > 1)
                    PopupMenuButton<String>(
                      icon: const Icon(Icons.hd, color: Colors.white),
                      tooltip: 'Quality',
                      color: const Color(0xFF1F1F1F),
                      onSelected: (quality) async {
                        final currentPosition = _videoController?.value.position;
                        ref.read(selectedQualityProvider.notifier).state = quality;
                        
                        ScaffoldMessenger.of(context).showSnackBar(
                          SnackBar(
                            content: Text('Switching to $quality...'),
                            duration: const Duration(seconds: 2),
                            backgroundColor: NivioTheme.netflixRed,
                          ),
                        );
                        
                        _videoController?.dispose();
                        _chewieController?.dispose();
                        await _initializePlayer();
                        
                        if (currentPosition != null && _videoController != null) {
                          await _videoController!.seekTo(currentPosition);
                        }
                      },
                      itemBuilder: (context) {
                        return _streamResult!.availableQualities.map((quality) {
                          final isSelected = quality == _streamResult!.quality;
                          return PopupMenuItem(
                            value: quality,
                            child: Row(
                              children: [
                                Icon(
                                  isSelected ? Icons.check_circle : Icons.circle_outlined,
                                  color: isSelected ? NivioTheme.netflixRed : Colors.white70,
                                  size: 18,
                                ),
                                const SizedBox(width: 12),
                                Text(
                                  quality,
                                  style: TextStyle(
                                    color: isSelected ? NivioTheme.netflixRed : Colors.white,
                                    fontWeight: isSelected ? FontWeight.bold : FontWeight.normal,
                                  ),
                                ),
                              ],
                            ),
                          );
                        }).toList();
                      },
                    ),
                ],
              )
            : null,
        body: Center(
          child: _isLoading
              ? _buildLoadingState()
              : _error != null
                  ? _buildErrorState()
                  : _streamResult != null &&
                          (_streamResult!.provider == 'vidsrc.cc' ||
                           _streamResult!.provider == 'vidsrc.to' ||
                           _streamResult!.provider == 'vidlink')
                      ? _buildWebViewPlayer()
                      : _chewieController != null &&
                              _chewieController!.videoPlayerController.value.isInitialized
                          ? _buildVideoPlayer()
                          : _buildLoadingState(),
        ),
      ),
    );
  }

  Widget _buildLoadingState() {
    return Container(
      color: Colors.black,
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          const SizedBox(
            width: 60,
            height: 60,
            child: CircularProgressIndicator(
              color: NivioTheme.netflixRed,
              strokeWidth: 4,
            ),
          ),
          const SizedBox(height: 32),
          Text(
            _currentProvider.isNotEmpty ? _currentProvider : _providerNames[_currentProviderIndex],
            style: const TextStyle(
              fontSize: 18,
              fontWeight: FontWeight.w500,
              color: Colors.white,
            ),
          ),
          const SizedBox(height: 12),
          Text(
            'Trying provider ${_currentProviderIndex + 1}/$_maxProviders...',
            style: const TextStyle(
              fontSize: 14,
              color: Colors.white54,
            ),
          ),
          if (_retryCount > 0) ...[
            const SizedBox(height: 24),
            Container(
              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
              decoration: BoxDecoration(
                color: Colors.orange.withOpacity(0.2),
                borderRadius: BorderRadius.circular(20),
                border: Border.all(color: Colors.orange, width: 1),
              ),
              child: Text(
                'Retry $_retryCount/$_maxRetries',
                style: const TextStyle(
                  fontSize: 12,
                  color: Colors.orange,
                  fontWeight: FontWeight.w600,
                ),
              ),
            ),
          ],
        ],
      ),
    );
  }

  Widget _buildErrorState() {
    return Container(
      color: Colors.black,
      padding: const EdgeInsets.all(32.0),
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Container(
            padding: const EdgeInsets.all(20),
            decoration: BoxDecoration(
              color: NivioTheme.netflixRed.withOpacity(0.1),
              shape: BoxShape.circle,
            ),
            child: const Icon(
              Icons.error_outline,
              color: NivioTheme.netflixRed,
              size: 64,
            ),
          ),
          const SizedBox(height: 32),
          const Text(
            'Failed to Load Stream',
            style: TextStyle(
              fontSize: 24,
              fontWeight: FontWeight.bold,
              color: Colors.white,
            ),
          ),
          const SizedBox(height: 16),
          Text(
            _error!,
            textAlign: TextAlign.center,
            style: const TextStyle(
              fontSize: 14,
              color: Colors.white70,
              height: 1.5,
            ),
          ),
          const SizedBox(height: 40),
          Row(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              // Switch Server button (if more providers available)
              if (_currentProviderIndex < _maxProviders - 1) ...[
                ElevatedButton.icon(
                  onPressed: () {
                    setState(() {
                      _error = null;
                      _isLoading = true;
                      _currentProviderIndex++;
                      _retryCount = 0;
                      _streamResult = null; // Clear old stream result
                    });
                    _initializePlayer();
                  },
                  icon: const Icon(Icons.swap_horiz, size: 20),
                  label: const Text('SWITCH SERVER'),
                  style: ElevatedButton.styleFrom(
                    backgroundColor: Colors.orange,
                    padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 16),
                  ),
                ),
                const SizedBox(width: 16),
              ],
              ElevatedButton.icon(
                onPressed: () {
                  setState(() {
                    _retryCount = 0;
                    _currentProviderIndex = 0; // Reset to first provider
                    _streamResult = null; // Clear old stream result
                  });
                  _initializePlayer();
                },
                icon: const Icon(Icons.refresh, size: 20),
                label: const Text('RETRY'),
                style: ElevatedButton.styleFrom(
                  backgroundColor: NivioTheme.netflixRed,
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(8),
                  ),
                  elevation: 0,
                ),
              ),
              const SizedBox(width: 16),
              OutlinedButton.icon(
                onPressed: () => Navigator.pop(context),
                icon: const Icon(Icons.arrow_back, size: 20),
                label: const Text('GO BACK'),
                style: OutlinedButton.styleFrom(
                  foregroundColor: Colors.white,
                  side: const BorderSide(color: Colors.white54, width: 1.5),
                  padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 16),
                  shape: RoundedRectangleBorder(
                    borderRadius: BorderRadius.circular(8),
                  ),
                ),
              ),
            ],
          ),
        ],
      ),
    );
  }

  Widget _buildWebViewPlayer() {
    return WebViewPlayer(
      key: ValueKey(_streamResult!.url), // Force rebuild when URL changes
      streamUrl: _streamResult!.url,
      title: ref.read(selectedMediaProvider)?.title ??
          ref.read(selectedMediaProvider)?.name ??
          'Video',
    );
  }

  Widget _buildVideoPlayer() {
    return Center(
      child: AspectRatio(
        aspectRatio: 16 / 9, // Force 16:9 aspect ratio
        child: Chewie(controller: _chewieController!),
      ),
    );
  }
}
</file>

</files>
